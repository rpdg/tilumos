{"version":3,"sources":["/ts/opg.ts"],"names":[],"mappings":"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","file":"opg.js","sourcesContent":["import {ListBox, CheckBox, RadioBox} from \"./ui/FormControls\";\r\nimport {api} from  'util/api';\r\nimport Table from \"./ui/Table\";\r\nimport PopUp from \"./ui/Popup\";\r\nimport Panel from \"./ui/Panel\";\r\nimport Tree from \"./ui/Tree\";\r\nimport {TabBar, TabNavigator, TabView} from \"./ui/TabView\";\r\n\r\nimport {request, string, dateTime, is, url, convert, format, array} from  'util/utils';\r\n\r\n\r\n//a ui factory class\r\nclass OpgUi {\r\n\r\n\tjq: JQuery;\r\n\r\n\tconstructor(se: JQuery | any[] | Element | DocumentFragment | Text | string) {\r\n\t\tthis.jq = $(se);\r\n\t\tif (this.jq.length === 0) {\r\n\t\t\tthrow new Error('There is no dom object to be processed.');\r\n\t\t}\r\n\t}\r\n\r\n\r\n\ttable(cfg: any): Table {\r\n\t\treturn new Table(this.jq, cfg);\r\n\t}\r\n\r\n\ttree(cfg) {\r\n\t\treturn new Tree(this.jq, cfg);\r\n\t}\r\n\r\n\tlistBox(cfg: any): ListBox {\r\n\t\treturn new ListBox(this.jq, cfg);\r\n\t}\r\n\r\n\tcheckBox(cfg: any): CheckBox {\r\n\t\treturn new CheckBox(this.jq, cfg);\r\n\t}\r\n\r\n\tradioBox(cfg: any): RadioBox {\r\n\t\treturn new RadioBox(this.jq, cfg);\r\n\t}\r\n\r\n\tpopup(cfg): PopUp {\r\n\t\treturn new PopUp(this.jq, cfg);\r\n\t}\r\n\r\n\tpanel(cfg): Panel {\r\n\t\treturn new Panel(this.jq, cfg);\r\n\t}\r\n\r\n\ttabView(cfg): TabView {\r\n\t\treturn new TabView(this.jq, cfg);\r\n\t}\r\n\r\n}\r\n\r\n\r\nlet opg: any = (se: JQuery | any[] | Element | DocumentFragment | Text | string) => new OpgUi(se);\r\n\r\n\r\nopg.api = api;\r\n\r\nopg.request = request;\r\nopg.dateTime = dateTime;\r\nopg.string = string;\r\nopg.is = is;\r\nopg.url = url;\r\nopg.convert = convert;\r\nopg.format = format;\r\nopg.array = array;\r\n\r\n\r\n//\r\nopg.popTop = PopUp.popTop;\r\nopg.alert = PopUp.alert;\r\nopg.confirm = PopUp.confirm;\r\n\r\nopg.ok = function (message, callBack?: Function, options ?: any = {}) {\r\n\tPopUp.alert('<i class=\"ico-ok\"></i><span>' + message + '</span>', callBack, options);\r\n};\r\nopg.err = function (message, callBack?: Function, options ?: any = {}): void {\r\n\tPopUp.alert('<i class=\"ico-error\"></i><span>' + message + '</span>', callBack, options);\r\n};\r\nopg.warn = function (message, callBack?: Function, options ?: any = {}) {\r\n\tPopUp.alert('<i class=\"ico-warn\"></i><span>' + message + '</span>', callBack, options);\r\n};\r\nopg.danger = function (message, callBack?: Function, options ?: any = {}) {\r\n\tPopUp.confirm('<i class=\"ico-warn\"></i><span>' + message + '</span>', callBack, options);\r\n};\r\n\r\n\r\n//Pub/Sub\r\n//https://github.com/cowboy/jquery-tiny-pubsub\r\nlet ps_obj = $({});\r\n\r\nopg.listen = function (events: string, handler: (eventObject: JQueryEventObject, ...args: any[]) => any) {\r\n\tps_obj.on.apply(ps_obj, arguments);\r\n};\r\nopg.dispatch = function (eventType: string, extraParameters?: any[] | Object) {\r\n\tps_obj.trigger.apply(ps_obj, arguments);\r\n};\r\nopg.unListen = function () {\r\n\tps_obj.off.apply(ps_obj, arguments);\r\n};\r\n\r\n\r\n/*\r\n //https://github.com/daniellmb/MinPubSub/\r\n // the topic/subscription hash\r\n let cache = {};\r\n opg.dispatch = function (topic: string, args ?: Array) {\r\n // summary:\r\n //    Publish some data on a named topic.\r\n // topic: String\r\n //    The channel to publish on\r\n // args: Array?\r\n //    The data to publish. Each array item is converted into an ordered\r\n //    arguments on the subscribed functions.\r\n //\r\n // example:\r\n //    Publish stuff on '/some/topic'. Anything subscribed will be called\r\n //    with a function signature like: function(a,b,c){ ... }\r\n //\r\n //    publish('/some/topic', ['a','b','c']);\r\n\r\n let subs = cache[topic],\r\n len = subs ? subs.length : 0;\r\n\r\n //can change loop or reverse array if the order matters\r\n while (len--) {\r\n subs[len].apply(null, args || []);\r\n }\r\n };\r\n\r\n opg.listen = function (topic: string, callback: Function) {\r\n // summary:\r\n //    Register a callback on a named topic.\r\n // topic: String\r\n //    The channel to subscribe to\r\n // callback: Function\r\n //    The handler event. Anytime something is publish'ed on a\r\n //    subscribed channel, the callback will be called with the\r\n //    published array as ordered arguments.\r\n //\r\n // returns: Array\r\n //    A handle which can be used to unsubscribe this particular subscription.\r\n //\r\n // example:\r\n //    subscribe('/some/topic', function(a, b, c){ handle data  });\r\n\r\n if (!cache[topic]) {\r\n cache[topic] = [];\r\n }\r\n cache[topic].push(callback);\r\n return [topic, callback]; // Array\r\n };\r\n\r\n opg.unListen = function ( handle,  callback) {\r\n // summary:\r\n //    Disconnect a subscribed function for a topic.\r\n // handle: Array\r\n //    The return value from a subscribe call.\r\n // example:\r\n //    var handle = subscribe('/some/topic', function(){});\r\n //    unsubscribe(handle);\r\n\r\n let subs = cache[callback ? handle : handle[0]],\r\n callback = callback || handle[1],\r\n len = subs ? subs.length : 0;\r\n\r\n while (len--) {\r\n if (subs[len] === callback) {\r\n subs.splice(len, 1);\r\n }\r\n }\r\n };\r\n */\r\n\r\n\r\n//\r\nopg.wrapPanel = Panel.wrapPanel;\r\n\r\n\r\nwindow['opg'] = opg;\r\n\r\nexport default opg ;\r\n"]}