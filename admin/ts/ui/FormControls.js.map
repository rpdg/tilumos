{"version":3,"sources":["/ts/ui/FormControls.ts"],"names":[],"mappings":"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","file":"FormControls.js","sourcesContent":["import {AjaxDisplayObject, DisplayObject} from './DisplayOject';\r\n\r\ninterface IFormControls {\r\n\telementName: string;\r\n\tgetValue(): any;\r\n\tgetText(): any;\r\n}\r\n\r\nclass ListBox extends AjaxDisplayObject implements IFormControls {\r\n\r\n\telementName: string;\r\n\tprivate autoPrependBlank:boolean|string;\r\n\r\n\tconstructor(jq: JQuery, cfg: any) {\r\n\r\n\t\tcfg = $.extend({\r\n\t\t\tautoPrependBlank: true,\r\n\t\t\tbindOptions: {\r\n\t\t\t\t//mode: 'append',\r\n\t\t\t\ttemplate: '<option value=\"${' + (cfg.value || 'id') + '}\">${' + (cfg.text || 'name') + '}</option>'\r\n\t\t\t}\r\n\t\t}, cfg);\r\n\r\n\t\tcfg.name = cfg.name || ( 'opgElem_' + DisplayObject.guid() );\r\n\r\n\t\t//如果是从空容器创建的，将jq对象指定到select控件上\r\n\t\tif (jq[0].tagName !== 'SELECT') {\r\n\t\t\tjq = $('<select name=\"' + cfg.name + '\"></select>').appendTo(jq);\r\n\t\t}\r\n\r\n\r\n\t\tsuper(jq, cfg);\r\n\r\n\r\n\t}\r\n\r\n\tinit(jq: JQuery, cfg: any) {\r\n\r\n\t\tsuper.init(jq, cfg);\r\n\r\n\t\tthis._initSelectedIndex = cfg.selectedIndex || 0;\r\n\t\tthis.elementName = cfg.name;\r\n\t\tthis.autoPrependBlank = cfg.autoPrependBlank||false;\r\n\r\n\t\t//add event listener\r\n\t\tjq.on(\"change.opg\", (evt) => {\r\n\t\t\tthis.selectedIndex = evt.target.selectedIndex;\r\n\t\t});\r\n\t}\r\n\r\n\tbindHandler(json) {\r\n\r\n\t\tif (this.autoPrependBlank) {\r\n\t\t\tlet txt = (typeof this.autoPrependBlank === 'string') ? this.autoPrependBlank : '请选择';\r\n\t\t\tthis.jq.prepend(`<option value=\"\">${txt}</option>`);\r\n\t\t}\r\n\r\n\t\tthis._items = this.jq.find(\"option\");\r\n\r\n\t\tlet i = (this._items.length > this._initSelectedIndex) ? this._initSelectedIndex : (this._items.length ? 0 : -1);\r\n\r\n\t\tif (typeof this.onBind === 'function') this.onBind(json);\r\n\r\n\t\tif (i > -1) {\r\n\t\t\tthis.selectedIndex = <number> i;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic set selectedIndex(i: number) {\r\n\t\tthis._prevIndex = this._selectedIndex;\r\n\r\n\t\t//(this.jq[0] as HTMLSelectElement).selectedIndex = i;\r\n\t\t$(this._items).removeAttr('selected').eq(i).attr('selected', 'selected');\r\n\r\n\t\tthis._selectedIndex = i;\r\n\r\n\t\tlet evt: Event = {target: this._items[i]} as Event;\r\n\t\tthis.selectHandler(evt);\r\n\r\n\t}\r\n\r\n\tgetValue(): string | number {\r\n\t\treturn this.jq.val();\r\n\t}\r\n\r\n\tgetText(): string {\r\n\t\tlet selectElem: HTMLSelectElement = this.jq[0] as HTMLSelectElement;\r\n\r\n\t\tif (selectElem.options.length) {\r\n\t\t\treturn (selectElem.options[selectElem.selectedIndex] as HTMLOptionElement).text;\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n\r\nclass CheckBox extends AjaxDisplayObject implements IFormControls {\r\n\telementName: string;\r\n\r\n\tconstructor(jq: JQuery, cfg: any) {\r\n\r\n\t\tif (!cfg.labelClass) cfg.labelClass = 'lbAutoWidth';\r\n\r\n\t\tif (!cfg.name) cfg.name = 'opgElem_' + DisplayObject.guid();\r\n\r\n\t\tcfg = $.extend({\r\n\t\t\tbindOptions: {\r\n\t\t\t\ttemplate: '<label class=\"' + cfg.labelClass + '\"><input name=\"' + cfg.name\r\n\t\t\t\t+ '\" type=\"checkbox\" value=\"${' + (cfg.value || 'id') + '}\">${' + (cfg.text || 'name') + '}</label>'\r\n\t\t\t\t+ (cfg.joiner === undefined ? ' ' : cfg.joiner)\r\n\t\t\t}\r\n\t\t}, cfg);\r\n\r\n\r\n\t\tsuper(jq, cfg);\r\n\r\n\t}\r\n\r\n\tinit(jq: JQuery, cfg: any) {\r\n\r\n\t\tsuper.init(jq, cfg);\r\n\r\n\t\tthis.elementName = cfg.name;\r\n\r\n\t\tthis._initSelectedIndex = cfg.selectedIndex || [];\r\n\t\tthis._prevIndex = [];\r\n\t\tthis._selectedIndex = [];\r\n\r\n\t\t//add event listener\r\n\t\tjq.on(\"change.opg\", ':checkbox', (evt) => {\r\n\t\t\tthis.selectHandler(evt);\r\n\t\t});\r\n\t}\r\n\r\n\tbindHandler(json) {\r\n\t\tthis._items = this.jq.find(\"input[name='\" + this.elementName + \"']:checkbox\");\r\n\t\tif (typeof this.onBind === 'function') this.onBind(json);\r\n\r\n\t\tlet iSel = <number[]> this._initSelectedIndex;\r\n\t\tif (iSel.length) {\r\n\t\t\tthis.selectedIndex = iSel;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpublic set selectedIndex(arr: number[]) {\r\n\r\n\t\tlet chkIdx = [], chkItem = [];\r\n\t\tfor (let i = 0, l = arr.length; i < l; i++) {\r\n\t\t\tlet ix = arr[i];\r\n\t\t\tlet item = this._items.eq(ix);\r\n\t\t\tif (item.length) {\r\n\t\t\t\tchkIdx.push(ix);\r\n\r\n\t\t\t\tif (!item.prop('checked')) {\r\n\t\t\t\t\tchkItem.push(item.prop('checked', true));\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif (chkItem.length) {\r\n\t\t\tthis._prevIndex = this.selectedIndex;\r\n\t\t\tthis.selectedIndex = chkIdx;\r\n\t\t\tlet evt: Event = {target: $(chkItem)} as Event;\r\n\t\t\tthis.selectHandler(evt);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tget selectedItem(): JQuery {\r\n\t\treturn this._items.filter(':checked');\r\n\t}\r\n\r\n\tget selectedData(): Array {\r\n\t\tlet s = this.selectedItem,\r\n\t\t\tarr = [],\r\n\t\t\tthat = this;\r\n\r\n\t\ts.each((i, opt) => {\r\n\t\t\tlet src = that.data[that._items.index(opt)],\r\n\t\t\t\ttar = {};\r\n\t\t\tfor (let key: string in src)\r\n\t\t\t\tif (src.hasOwnProperty(key) && key.indexOf(\":\") === -1)\r\n\t\t\t\t\ttar[key] = src[key];\r\n\r\n\t\t\tarr.push(tar);\r\n\t\t});\r\n\t\treturn arr;\r\n\t}\r\n\r\n\tset selectedData(arr: Array) {\r\n\t\tthis._items.each((i, elem: HTMLInputElement) => {\r\n\t\t\telem.checked = arr.indexOf(elem.value) > -1;\r\n\t\t})\r\n\t}\r\n\r\n\tgetValue(): Array {\r\n\t\tlet arr = [];\r\n\t\tlet s: JQuery = this.selectedItem;\r\n\t\tif (s.length) {\r\n\t\t\ts.each(function (i, o: HTMLInputElement) {\r\n\t\t\t\tarr.push(o.value);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn arr;\r\n\t}\r\n\r\n\tgetText(): Array {\r\n\t\tlet arr = [];\r\n\t\tlet s: JQuery = this.selectedItem;\r\n\t\tif (s.length) {\r\n\t\t\ts.each(function (i, o: HTMLInputElement) {\r\n\t\t\t\tarr.push($(o.parentNode).text());\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn arr;\r\n\t}\r\n}\r\n\r\nclass RadioBox extends AjaxDisplayObject implements IFormControls {\r\n\r\n\telementName: string;\r\n\r\n\tconstructor(jq: JQuery, cfg: any) {\r\n\r\n\t\tcfg.name = cfg.name || ( 'opgElem_' + DisplayObject.guid() );\r\n\r\n\t\tcfg = $.extend({\r\n\t\t\tbindOptions: {\r\n\t\t\t\ttemplate: '<label class=\"lbAutoWidth\"><input name=\"' + cfg.name\r\n\t\t\t\t+ '\" type=\"radio\" value=\"${' + (cfg.value || 'id') + '}\">${' + (cfg.text || 'name') + '}</label>'\r\n\t\t\t\t+ (cfg.joiner === undefined ? ' ' : cfg.joiner)\r\n\t\t\t}\r\n\t\t}, cfg);\r\n\r\n\r\n\t\tsuper(jq, cfg);\r\n\r\n\t}\r\n\r\n\tinit(jq: JQuery, cfg: any) {\r\n\t\tsuper.init(jq, cfg);\r\n\r\n\t\tthis.elementName = cfg.name;\r\n\t\tthis._initSelectedIndex = ~~cfg.selectedIndex;\r\n\r\n\t\t//add event listener\r\n\t\tjq.on(\"change.opg\", (evt) => {\r\n\t\t\tthis.selectedIndex = this._items.index(evt.target);\r\n\t\t});\r\n\t}\r\n\r\n\tbindHandler(json) {\r\n\t\tthis._items = this.jq.find(\"input[name='\" + this.elementName + \"']:radio\");\r\n\r\n\t\tlet i = (this._items.length > this._initSelectedIndex) ? this._initSelectedIndex : (this._items.length ? 0 : -1);\r\n\r\n\t\tif (typeof this.onBind === 'function') this.onBind(json);\r\n\r\n\t\tif (i > -1) {\r\n\r\n\t\t\tthis._items.eq(i as number).prop('checked', true);\r\n\r\n\t\t\tthis.selectedIndex = i;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tget selectedItem(): JQuery {\r\n\t\treturn this._items.filter(':checked');\r\n\t}\r\n\r\n\tgetValue(): string {\r\n\t\treturn this.selectedItem.val();\r\n\t}\r\n\r\n\tgetText(): string {\r\n\t\tlet s = this.selectedItem;\r\n\t\tif (s.length) {\r\n\t\t\treturn s.parent().text();\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n}\r\nexport {ListBox, CheckBox, RadioBox};"]}