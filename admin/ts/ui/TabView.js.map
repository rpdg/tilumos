{"version":3,"sources":["/ts/ui/TabView.ts"],"names":[],"mappings":"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","file":"TabView.js","sourcesContent":["import {DisplayObject} from './DisplayOject';\r\n\r\nclass TabBar extends DisplayObject {\r\n\r\n\tprevIndex: number;\r\n\tselectedIndex: number;\r\n\tonSelect?: Function;\r\n\r\n\tdata: any;\r\n\tbar: JQuery;\r\n\titems: JQuery;\r\n\r\n\r\n\tprotected _prevIndex: number;\r\n\tprotected _selectedIndex: number;\r\n\tprotected _initSelectedIndex: number;\r\n\r\n\r\n\tconstructor(jq, cfg) {\r\n\t\tcfg = $.extend({\r\n\t\t\tautoFire: true,\r\n\t\t\tselectedIndex: 0,\r\n\t\t\tbindOptions: {\r\n\t\t\t\ttemplate: '<li>${label}</li>'\r\n\t\t\t}\r\n\t\t}, cfg);\r\n\r\n\t\tsuper(jq, cfg);\r\n\r\n\r\n\t\t//this.create(jq, cfg);\r\n\t}\r\n\r\n\r\n\tinit(jq, cfg) {\r\n\t\tjq.css({display: 'table'});\r\n\r\n\t\tlet navi = $('<div class=\"tabNavigator\"></div>');\r\n\r\n\t\tthis.bar = $('<ul class=\"tabUL\"></ul>');\r\n\r\n\t\t$('<div class=\"tabWrap\"></div>').append(this.bar).appendTo(navi);\r\n\r\n\t\tthis.data = cfg.bindOptions.list = cfg.data;\r\n\r\n\t\t//console.log(cfg.bindOptions);\r\n\t\tthis.bar.bindList(cfg.bindOptions);\r\n\t\tjq.prepend(navi);\r\n\r\n\t\tthis.items = this.bar.find(\"li\");\r\n\r\n\r\n\t\tthis._prevIndex = -1;\r\n\t\tthis._selectedIndex = -1;\r\n\t\tthis._initSelectedIndex = (this.items.length > cfg.selectedIndex) ? cfg.selectedIndex : (this.items.length ? 0 : -1);\r\n\r\n\r\n\t\tlet self = this;\r\n\t\tthis.bar.on('click.opg', 'li', function (evt) {\r\n\t\t\tself.selectHandler.call(self, evt);\r\n\t\t});\r\n\r\n\r\n\t\tif (typeof cfg.onSelect === 'function')\r\n\t\t\tthis.onSelect = cfg.onSelect;\r\n\r\n\r\n\t\tthis.createdHandler(this.data);\r\n\r\n\t\tif (cfg.autoFire && cfg.selectedIndex > -1) {\r\n\t\t\tself.selectedIndex = (cfg.selectedIndex);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\r\n\tselectHandler(evt) {\r\n\t\tevt.stopImmediatePropagation();\r\n\r\n\t\tlet li = evt.target, i = this.items.index(li);\r\n\t\tif (i === this._selectedIndex && this._prevIndex != -1) return;\r\n\r\n\t\t$(li).addClass(\"current\").siblings(\"li.current\").removeClass(\"current\");\r\n\t\tthis.selectedIndex = i;\r\n\r\n\t\tif (typeof this.onSelect === 'function') this.onSelect.call(this , evt);\r\n\t}\r\n\r\n\tset selectedIndex(i: number) {\r\n\t\tif (this._selectedIndex != i) {\r\n\t\t\tthis._prevIndex = this._selectedIndex;\r\n\t\t\tthis._selectedIndex = i;\r\n\t\t\tthis.bar.find(\"li:eq(\" + i + \")\").trigger('click.opg');\r\n\t\t}\r\n\t}\r\n\r\n\tget selectedIndex(): number {\r\n\t\treturn this._selectedIndex;\r\n\t}\r\n\tget prevIndex():number{\r\n\t\treturn this._prevIndex;\r\n\t}\r\n\r\n\tgetSelectedData(original?: boolean) {\r\n\t\tlet src = this.data[this.selectedIndex];\r\n\t\t//过滤对象中的绑定时增加的属性\r\n\t\tif (!original) {\r\n\t\t\tlet tar = {}, key;\r\n\t\t\tfor (key in src) if (key.indexOf(\":\") === -1) tar[key] = src[key];\r\n\t\t\treturn tar;\r\n\t\t}\r\n\t\telse return src;\r\n\t}\r\n\r\n}\r\n\r\n\r\nclass TabNavigator extends DisplayObject {\r\n\r\n\ttabBar: TabBar;\r\n\tiframe: JQuery;\r\n\r\n\tconstructor(jq, cfg) {\r\n\r\n\r\n\t\tsuper(jq, cfg);\r\n\r\n\t\t//this.create(jq, cfg);\r\n\t}\r\n\r\n\tcreate(jq, cfg) {\r\n\t\tlet x = cfg.selectedIndex || 0;\r\n\t\tlet self = this;\r\n\t\tcfg.selectedIndex = -1;\r\n\t\tthis.tabBar = new TabBar(jq, cfg);\r\n\t\tthis.iframe = $('<iframe frameborder=\"0\" src=\"about:blank\"></iframe>').appendTo($('<div class=\"tabStack\"></div>').appendTo(jq));\r\n\t\tthis.tabBar.onSelect = function () {\r\n\t\t\tself.iframe.attr('src', self.tabBar.getSelectedData()['url']);\r\n\t\t};\r\n\t\tthis.tabBar.selectedIndex = (x);\r\n\r\n\r\n\t\tthis.createdHandler();\r\n\t}\r\n}\r\n\r\n\r\nclass TabView extends DisplayObject {\r\n\r\n\tviews: Array;\r\n\ttabBar: TabBar;\r\n\tstack: JQuery;\r\n\r\n\tconstructor(jq, cfg) {\r\n\r\n\r\n\t\tsuper(jq, cfg);\r\n\r\n\t}\r\n\r\n\r\n\tcreate(jq, cfg) {\r\n\t\tthis.views = [];\r\n\r\n\t\tlet x = cfg.selectedIndex || 0;\r\n\t\tlet self = this;\r\n\t\tcfg.selectedIndex = -1;\r\n\t\tthis.tabBar = new TabBar(jq, cfg);\r\n\r\n\t\tthis.stack = $('<div class=\"tabStack\"></div>').appendTo($('<div style=\"display: table-row;height: 100%;\"></div>').appendTo(jq));\r\n\r\n\t\tfor (let i = 0, l = cfg.data.length; i < l; i++) {\r\n\t\t\tlet div = cfg.data[i]['view'];\r\n\t\t\tthis.addView($(div));\r\n\t\t}\r\n\r\n\t\tthis.tabBar.onSelect = function () {\r\n\t\t\tif (self.views[self.tabBar.prevIndex])\r\n\t\t\t\tself.views[self.tabBar.prevIndex].toggle();\r\n\r\n\t\t\tif (self.views[self.tabBar.selectedIndex])\r\n\t\t\t\tself.views[self.tabBar.selectedIndex].toggle();\r\n\t\t};\r\n\t\tthis.tabBar.selectedIndex = (x);\r\n\r\n\r\n\t\tthis.createdHandler();\r\n\t}\r\n\r\n\taddView(jqDiv) {\r\n\t\tthis.views.push(jqDiv);\r\n\t\tthis.stack.append(jqDiv.addClass('tabDivision'));\r\n\t}\r\n}\r\n\r\nexport {TabBar, TabNavigator, TabView};"]}