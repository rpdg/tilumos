define("ts/ui/DisplayOject.ts",function(t,e){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=$({}),r=function(){function t(e,i){this._created=!1,this.guid=t.guid(),this.jq=e,this.onCreate=i.onCreate,this.init(e,i),this.create(e,i)}return t.prototype.init=function(){},t.prototype.create=function(){return this},t.prototype.createdHandler=function(t){this._created=!0,this._createdPromise&&this._createdPromise.resolve(),this.onCreate&&this.onCreate(t)},Object.defineProperty(t.prototype,"createdPromise",{get:function(){return this._createdPromise||(this._createdPromise=$.Deferred()),this._created&&this._createdPromise.resolve(),this._createdPromise},enumerable:!0,configurable:!0}),t.guid=function(){var t=0;return function(){return++t}}(),t}();e.DisplayObject=r;var a=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n._lazy=!1,n._defBindOpt={},n}return i(e,t),e.prototype.init=function(t,e){this._api=e.api,this._bindOption=$.extend(this._defBindOpt,e.bindOptions),this._lazy=!!e.lazy,this._param=e.param,this._items=n,this._prevIndex=-1,this._selectedIndex=-1,this._initSelectedIndex=-1,this.arrSrc=e.arrSrc||"data",this.container=this.jq,this.onUpdate=e.onUpdate,this.onAjaxEnd=e.onAjaxEnd,this.onSelect=e.onSelect,this.onBind=e.onBind},e.prototype.create=function(t,e){return this._lazy?this.bindData([]):e.data?this.bindData(e.data):this._api&&this.ajax(this._param),this},e.prototype.selectHandler=function(t){"function"==typeof this.onSelect&&this.onSelect.call(this,t)},Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(t){this._prevIndex=this._selectedIndex,this._selectedIndex=t;var e={target:this._items[t]};this.selectHandler(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedData",{get:function(){return this._data[this._selectedIndex]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItem",{get:function(){return this._items[this._selectedIndex]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t,this._created?this.updateHandler(t):this.createdHandler(t)},enumerable:!0,configurable:!0}),e.prototype.update=function(t){if(this._api)this._param?$.extend(this._param,t):this._param=t,this.ajax(this._param);else{var e=t||this._data;this.bindData(e)}},e.prototype.updateHandler=function(t){this.onUpdate&&this.onUpdate(t)},e.prototype.ajax=function(t){var e=this;return this._api(t,function(t){e._json=t,e.ajaxEndHandler(t),e.bindData(t)}),this},e.prototype.ajaxEndHandler=function(t){this.onAjaxEnd&&this.onAjaxEnd(t)},e.prototype.bindData=function(t){var e;return e=$.isArray(t)?t:t[this.arrSrc],this._bindOption.list=e,this._bindOption.itemFilter&&(this._bindOption.storeData=!0),this.container.bindList(this._bindOption),this._bindOption.itemFilter?(this.data=this.container.data("bound-array"),this.container.removeData("bound-array")):this.data=e,this.bindHandler(t),this},e.prototype.bindHandler=function(t){this.onBind&&this.onBind(t)},e}(r);e.AjaxDisplayObject=a});