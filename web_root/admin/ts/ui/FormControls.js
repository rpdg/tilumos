define("ts/ui/FormControls.ts",function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=e("ts/ui/DisplayOject.ts"),o=function(e){function t(t,n){var o=this;return n=$.extend({autoPrependBlank:!0,bindOptions:{template:'<option value="${'+(n.value||"id")+'}">${'+(n.text||"name")+"}</option>"}},n),n.name=n.name||"opgElem_"+i.DisplayObject.guid(),"SELECT"!==t[0].tagName&&(t=$('<select name="'+n.name+'"></select>').appendTo(t)),o=e.call(this,t,n)||this}return n(t,e),t.prototype.init=function(t,n){var i=this;e.prototype.init.call(this,t,n),this._initSelectedIndex=n.selectedIndex||0,this.elementName=n.name,this.autoPrependBlank=n.autoPrependBlank||!1,t.on("change.opg",function(e){i.selectedIndex=e.target.selectedIndex})},t.prototype.bindHandler=function(e){if(this.autoPrependBlank){var t="string"==typeof this.autoPrependBlank?this.autoPrependBlank:"请选择";this.jq.prepend('<option value="">'+t+"</option>")}this._items=this.jq.find("option");var n=this._items.length>this._initSelectedIndex?this._initSelectedIndex:this._items.length?0:-1;"function"==typeof this.onBind&&this.onBind(e),n>-1&&(this.selectedIndex=n)},Object.defineProperty(t.prototype,"selectedIndex",{set:function(e){this._prevIndex=this._selectedIndex,$(this._items).removeAttr("selected").eq(e).attr("selected","selected"),this._selectedIndex=e;var t={target:this._items[e]};this.selectHandler(t)},enumerable:!0,configurable:!0}),t.prototype.getValue=function(){return this.jq.val()},t.prototype.getText=function(){var e=this.jq[0];return e.options.length?e.options[e.selectedIndex].text:null},t}(i.AjaxDisplayObject);t.ListBox=o;var s=function(e){function t(t,n){var o=this;return n.labelClass||(n.labelClass="lbAutoWidth"),n.name||(n.name="opgElem_"+i.DisplayObject.guid()),n=$.extend({bindOptions:{template:'<label class="'+n.labelClass+'"><input name="'+n.name+'" type="checkbox" value="${'+(n.value||"id")+'}">${'+(n.text||"name")+"}</label>"+(void 0===n.joiner?" ":n.joiner)}},n),o=e.call(this,t,n)||this}return n(t,e),t.prototype.init=function(t,n){var i=this;e.prototype.init.call(this,t,n),this.elementName=n.name,this._initSelectedIndex=n.selectedIndex||[],this._prevIndex=[],this._selectedIndex=[],t.on("change.opg",":checkbox",function(e){i.selectHandler(e)})},t.prototype.bindHandler=function(e){this._items=this.jq.find("input[name='"+this.elementName+"']:checkbox"),"function"==typeof this.onBind&&this.onBind(e);var t=this._initSelectedIndex;t.length&&(this.selectedIndex=t)},Object.defineProperty(t.prototype,"selectedIndex",{set:function(e){for(var t=[],n=[],i=0,o=e.length;o>i;i++){var s=e[i],r=this._items.eq(s);r.length&&(t.push(s),r.prop("checked")||n.push(r.prop("checked",!0)))}if(n.length){this._prevIndex=this.selectedIndex,this.selectedIndex=t;var a={target:$(n)};this.selectHandler(a)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedItem",{get:function(){return this._items.filter(":checked")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedData",{get:function(){var e=this.selectedItem,t=[],n=this;return e.each(function(e,i){var o=n.data[n._items.index(i)],s={};for(var r in o)o.hasOwnProperty(r)&&-1===r.indexOf(":")&&(s[r]=o[r]);t.push(s)}),t},set:function(e){this._items.each(function(t,n){n.checked=e.indexOf(n.value)>-1})},enumerable:!0,configurable:!0}),t.prototype.getValue=function(){var e=[],t=this.selectedItem;return t.length&&t.each(function(t,n){e.push(n.value)}),e},t.prototype.getText=function(){var e=[],t=this.selectedItem;return t.length&&t.each(function(t,n){e.push($(n.parentNode).text())}),e},t}(i.AjaxDisplayObject);t.CheckBox=s;var r=function(e){function t(t,n){var o=this;return n.name=n.name||"opgElem_"+i.DisplayObject.guid(),n=$.extend({bindOptions:{template:'<label class="lbAutoWidth"><input name="'+n.name+'" type="radio" value="${'+(n.value||"id")+'}">${'+(n.text||"name")+"}</label>"+(void 0===n.joiner?" ":n.joiner)}},n),o=e.call(this,t,n)||this}return n(t,e),t.prototype.init=function(t,n){var i=this;e.prototype.init.call(this,t,n),this.elementName=n.name,this._initSelectedIndex=~~n.selectedIndex,t.on("change.opg",function(e){i.selectedIndex=i._items.index(e.target)})},t.prototype.bindHandler=function(e){this._items=this.jq.find("input[name='"+this.elementName+"']:radio");var t=this._items.length>this._initSelectedIndex?this._initSelectedIndex:this._items.length?0:-1;"function"==typeof this.onBind&&this.onBind(e),t>-1&&(this._items.eq(t).prop("checked",!0),this.selectedIndex=t)},Object.defineProperty(t.prototype,"selectedItem",{get:function(){return this._items.filter(":checked")},enumerable:!0,configurable:!0}),t.prototype.getValue=function(){return this.selectedItem.val()},t.prototype.getText=function(){var e=this.selectedItem;return e.length?e.parent().text():null},t}(i.AjaxDisplayObject);t.RadioBox=r});