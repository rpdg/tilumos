define("ts/ui/Combo.ts",function(t,e){"use strict";function o(){r.on("mousedown.dropDownHide",function(){s.closeAll()})}var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=t("ts/ui/DisplayOject.ts"),s={zIndex:999,instances:{},remove:function(t){delete this.instances[t]},closeAll:function(){for(var t in this.instances){var e=this.instances[t];"opened"===e.status&&e.close()}}},r=$("body"),a=function(t){function e(e,o){var n=this;return o=$.extend({},o),n=t.call(this,e,o)||this}return n(e,t),e.prototype.init=function(t,o){this._evtName="mousedown.ComboEvent","INPUT"===t[0].tagName?t.addClass("combo-input").val(o.text):t.text(o.text),this.jqValueField=$(o.valueField),this.target=o.target,this.target.addClass("combo-dropDown").on("mousedown",function(t){t.stopPropagation()}),this.onBeforeOpen=o.onBeforeOpen,this.onOpen=o.onOpen,this.onClose=o.onClose,o.allowBlank&&e.makeClearableInput(this.jq,this.jqValueField),s.instances[this.guid]=this,this.enable=!0},e.makeClearableInput=function(t,e){var o=$.detectIE();if(o&&o>10&&!t.prop("readonly"));else{var n=t.css({"float":"left",margin:0}).wrap('<span class="sp-eraserWrap"></span>').parents("span:first"),i=$('<div class="ipt-eraser">&times;</div>').appendTo(n).click(function(){t.prop("disabled")||(t.val(""),e.val(""),i.hide())});n.hover(function(){!t.prop("disabled")&&t.val()&&(i.is(":visible")?i.hide():i.show())})}},Object.defineProperty(e.prototype,"enable",{set:function(t){if(!t)return this.jq.off(this._evtName).prop("disabled",!0),this.target.hide(),this;var e=this,o=this.target;this.jq.on(this._evtName,function(){var t=!0;return"closed"===e.status&&e.position(),"function"==typeof e.onBeforeOpen&&(t=e.onBeforeOpen.apply(e),t===!1)?e:(o.stop(!0,!0).slideToggle(90,function(){e.status="block"===o.css("display")?"opened":"closed"}),e)})},enumerable:!0,configurable:!0}),e.prototype.position=function(){var t=this.jq,e=this.target,o=t.offset(),n=o.top+t.outerHeight(),i=e.outerHeight();n+i>$(document).outerHeight()&&o.top>i&&(n=o.top-e.outerHeight()),e.css({top:n,left:o.left,zIndex:s.zIndex++})},e.prototype.open=function(){if("function"==typeof this.onBeforeOpen){var t=this.onBeforeOpen();if(t===!1)return this}this.position(),this.target.stop(!0,!0).slideDown(90),this.status="opened"},e.prototype.close=function(){this.target.stop(!0,!0).slideUp(90),this.status="closed"},Object.defineProperty(e.prototype,"status",{get:function(){return this._state},set:function(t){"opened"===t?(this._state="opened",o(),this.target.on("mouseleave.dropDownHide",o).on("mouseenter.dropDownHide",function(){r.off(".dropDownHide")}),"function"==typeof this.onOpen&&this.onOpen.apply(this,arguments)):(this._state="closed",r.off(".dropDownHide"),this.target.off(".dropDownHide"),"function"==typeof this.onClose&&this.onClose.apply(this,arguments))},enumerable:!0,configurable:!0}),e.prototype.setValue=function(t,e){this.jq.val(t),this.jqValueField.val(e)},Object.defineProperty(e.prototype,"text",{get:function(){return $.trim(this.jq.val())},enumerable:!0,configurable:!0}),e}(i.DisplayObject);e.Combo=a});