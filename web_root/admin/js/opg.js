;/*!ts/util/store.ts*/
define("ts/util/store.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=window.localStorage,n=function(t){if("string"!=typeof t)return void 0;try{return JSON.parse(t)}catch(e){return t||void 0}},r={use:function(t){return o=window[t],r},get:function(t,e){var r=n(o.getItem(t));return void 0===r?e:r},set:function(t,e){return void 0===e?r.remove(t):(o.setItem(t,JSON.stringify(e)),e)},remove:function(t){o.removeItem(t)},clear:function(){o.clear()},each:function(t){for(var e=0,n=o.length;n>e;e++){var i=o.key(e);t(i,r.get(i))}}};e.store=r;var i=function(){function t(t){void 0===t&&(t=!0),this.storage=window[t?"sessionStorage":"localStorage"]}return t.prototype.get=function(t,e){var o=n(this.storage.getItem(t));return void 0===o?e:o},t.prototype.set=function(t,e){return void 0===e?this.remove(t):(this.storage.setItem(t,JSON.stringify(e)),e)},t.prototype.remove=function(t){this.storage.removeItem(t)},t}();e.LocalStore=i;var c=function(){function t(){top.window.__Cache||(top.window.__Cache={}),this.cache=top.window.__Cache}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.empty=function(){top.window.__Cache&&(top.window.__Cache=null)},t.prototype.get=function(t,e){var o=this.cache[t];return void 0===o?e:o},t.prototype.set=function(t,e){return void 0===e?this.remove(t):void(this.cache[t]=e)},t.prototype.remove=function(t){delete this.cache[t]},t}();e.Cache=c});
;/*!ts/app.cfg.ts*/
define("ts/app.cfg.ts",function(e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=e("ts/util/store.ts");n.store.use("sessionStorage");var r={apiServer:n.store.get("apiServer")||(window.CONFIG?window.CONFIG.apiServer:null),ajaxTimeOut:3e4,loginPage:"../index.aspx",version:"6.6.2_20170908"};r.onUnauthorizedError=function(){var e="",o=r.loginPage;top.window.location.hash&&(e="?ReturnUrl="+encodeURIComponent(top.window.location.hash),o+=e),top.window.location.href=o};var t={exception:"服务器内部错误",delete_failure:"删除失败",add_failure:"新增失败",update_failure:"更新失败",query_failure:"查询失败",max_length:"输入超出最大长度",token_exception:"token验证失败"};r.onServerError=function(e){void 0===e&&(e="unknown error"),"token_exception"!==e&&"Token验证失败"!==e||location.pathname==r.loginPage||r.onUnauthorizedError(),this.codes&&this.codes[e]?e=this.codes[e]:t[e]&&(e=t[e]),top.opg.err(e)},o.default=r});
;/*!ts/ui/DisplayOject.ts*/
define("ts/ui/DisplayOject.ts",function(t,e){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=$({}),r=function(){function t(e,i){this._created=!1,this.guid=t.guid(),this.jq=e,this.onCreate=i.onCreate,this.init(e,i),this.create(e,i)}return t.prototype.init=function(){},t.prototype.create=function(){return this},t.prototype.createdHandler=function(t){this._created=!0,this._createdPromise&&this._createdPromise.resolve(),this.onCreate&&this.onCreate(t)},Object.defineProperty(t.prototype,"createdPromise",{get:function(){return this._createdPromise||(this._createdPromise=$.Deferred()),this._created&&this._createdPromise.resolve(),this._createdPromise},enumerable:!0,configurable:!0}),t.guid=function(){var t=0;return function(){return++t}}(),t}();e.DisplayObject=r;var a=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n._lazy=!1,n._defBindOpt={},n}return i(e,t),e.prototype.init=function(t,e){this._api=e.api,this._bindOption=$.extend(this._defBindOpt,e.bindOptions),this._lazy=!!e.lazy,this._param=e.param,this._items=n,this._prevIndex=-1,this._selectedIndex=-1,this._initSelectedIndex=-1,this.arrSrc=e.arrSrc||"data",this.container=this.jq,this.onUpdate=e.onUpdate,this.onAjaxEnd=e.onAjaxEnd,this.onSelect=e.onSelect,this.onBind=e.onBind},e.prototype.create=function(t,e){return this._lazy?this.bindData([]):e.data?this.bindData(e.data):this._api&&this.ajax(this._param),this},e.prototype.selectHandler=function(t){"function"==typeof this.onSelect&&this.onSelect.call(this,t)},Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(t){this._prevIndex=this._selectedIndex,this._selectedIndex=t;var e={target:this._items[t]};this.selectHandler(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedData",{get:function(){return this._data[this._selectedIndex]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItem",{get:function(){return this._items[this._selectedIndex]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t,this._created?this.updateHandler(t):this.createdHandler(t)},enumerable:!0,configurable:!0}),e.prototype.update=function(t){if(this._api)this._param?$.extend(this._param,t):this._param=t,this.ajax(this._param);else{var e=t||this._data;this.bindData(e)}},e.prototype.updateHandler=function(t){this.onUpdate&&this.onUpdate(t)},e.prototype.ajax=function(t){var e=this;return this._api(t,function(t){e._json=t,e.ajaxEndHandler(t),e.bindData(t)}),this},e.prototype.ajaxEndHandler=function(t){this.onAjaxEnd&&this.onAjaxEnd(t)},e.prototype.bindData=function(t){var e;return e=$.isArray(t)?t:t[this.arrSrc],this._bindOption.list=e,this._bindOption.itemFilter&&(this._bindOption.storeData=!0),this.container.bindList(this._bindOption),this._bindOption.itemFilter?(this.data=this.container.data("bound-array"),this.container.removeData("bound-array")):this.data=e,this.bindHandler(t),this},e.prototype.bindHandler=function(t){this.onBind&&this.onBind(t)},e}(r);e.AjaxDisplayObject=a});
;/*!ts/ui/FormControls.ts*/
define("ts/ui/FormControls.ts",function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=e("ts/ui/DisplayOject.ts"),o=function(e){function t(t,n){var o=this;return n=$.extend({autoPrependBlank:!0,bindOptions:{template:'<option value="${'+(n.value||"id")+'}">${'+(n.text||"name")+"}</option>"}},n),n.name=n.name||"opgElem_"+i.DisplayObject.guid(),"SELECT"!==t[0].tagName&&(t=$('<select name="'+n.name+'"></select>').appendTo(t)),o=e.call(this,t,n)||this}return n(t,e),t.prototype.init=function(t,n){var i=this;e.prototype.init.call(this,t,n),this._initSelectedIndex=n.selectedIndex||0,this.elementName=n.name,this.autoPrependBlank=n.autoPrependBlank||!1,t.on("change.opg",function(e){i.selectedIndex=e.target.selectedIndex})},t.prototype.bindHandler=function(e){if(this.autoPrependBlank){var t="string"==typeof this.autoPrependBlank?this.autoPrependBlank:"请选择";this.jq.prepend('<option value="">'+t+"</option>")}this._items=this.jq.find("option");var n=this._items.length>this._initSelectedIndex?this._initSelectedIndex:this._items.length?0:-1;"function"==typeof this.onBind&&this.onBind(e),n>-1&&(this.selectedIndex=n)},Object.defineProperty(t.prototype,"selectedIndex",{set:function(e){this._prevIndex=this._selectedIndex,$(this._items).removeAttr("selected").eq(e).attr("selected","selected"),this._selectedIndex=e;var t={target:this._items[e]};this.selectHandler(t)},enumerable:!0,configurable:!0}),t.prototype.getValue=function(){return this.jq.val()},t.prototype.getText=function(){var e=this.jq[0];return e.options.length?e.options[e.selectedIndex].text:null},t}(i.AjaxDisplayObject);t.ListBox=o;var s=function(e){function t(t,n){var o=this;return n.labelClass||(n.labelClass="lbAutoWidth"),n.name||(n.name="opgElem_"+i.DisplayObject.guid()),n=$.extend({bindOptions:{template:'<label class="'+n.labelClass+'"><input name="'+n.name+'" type="checkbox" value="${'+(n.value||"id")+'}">${'+(n.text||"name")+"}</label>"+(void 0===n.joiner?" ":n.joiner)}},n),o=e.call(this,t,n)||this}return n(t,e),t.prototype.init=function(t,n){var i=this;e.prototype.init.call(this,t,n),this.elementName=n.name,this._initSelectedIndex=n.selectedIndex||[],this._prevIndex=[],this._selectedIndex=[],t.on("change.opg",":checkbox",function(e){i.selectHandler(e)})},t.prototype.bindHandler=function(e){this._items=this.jq.find("input[name='"+this.elementName+"']:checkbox"),"function"==typeof this.onBind&&this.onBind(e);var t=this._initSelectedIndex;t.length&&(this.selectedIndex=t)},Object.defineProperty(t.prototype,"selectedIndex",{set:function(e){for(var t=[],n=[],i=0,o=e.length;o>i;i++){var s=e[i],r=this._items.eq(s);r.length&&(t.push(s),r.prop("checked")||n.push(r.prop("checked",!0)))}if(n.length){this._prevIndex=this.selectedIndex,this.selectedIndex=t;var a={target:$(n)};this.selectHandler(a)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedItem",{get:function(){return this._items.filter(":checked")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedData",{get:function(){var e=this.selectedItem,t=[],n=this;return e.each(function(e,i){var o=n.data[n._items.index(i)],s={};for(var r in o)o.hasOwnProperty(r)&&-1===r.indexOf(":")&&(s[r]=o[r]);t.push(s)}),t},set:function(e){this._items.each(function(t,n){n.checked=e.indexOf(n.value)>-1})},enumerable:!0,configurable:!0}),t.prototype.getValue=function(){var e=[],t=this.selectedItem;return t.length&&t.each(function(t,n){e.push(n.value)}),e},t.prototype.getText=function(){var e=[],t=this.selectedItem;return t.length&&t.each(function(t,n){e.push($(n.parentNode).text())}),e},t}(i.AjaxDisplayObject);t.CheckBox=s;var r=function(e){function t(t,n){var o=this;return n.name=n.name||"opgElem_"+i.DisplayObject.guid(),n=$.extend({bindOptions:{template:'<label class="lbAutoWidth"><input name="'+n.name+'" type="radio" value="${'+(n.value||"id")+'}">${'+(n.text||"name")+"}</label>"+(void 0===n.joiner?" ":n.joiner)}},n),o=e.call(this,t,n)||this}return n(t,e),t.prototype.init=function(t,n){var i=this;e.prototype.init.call(this,t,n),this.elementName=n.name,this._initSelectedIndex=~~n.selectedIndex,t.on("change.opg",function(e){i.selectedIndex=i._items.index(e.target)})},t.prototype.bindHandler=function(e){this._items=this.jq.find("input[name='"+this.elementName+"']:radio");var t=this._items.length>this._initSelectedIndex?this._initSelectedIndex:this._items.length?0:-1;"function"==typeof this.onBind&&this.onBind(e),t>-1&&(this._items.eq(t).prop("checked",!0),this.selectedIndex=t)},Object.defineProperty(t.prototype,"selectedItem",{get:function(){return this._items.filter(":checked")},enumerable:!0,configurable:!0}),t.prototype.getValue=function(){return this.selectedItem.val()},t.prototype.getText=function(){var e=this.selectedItem;return e.length?e.parent().text():null},t}(i.AjaxDisplayObject);t.RadioBox=r});
;/*!ts/util/utils.ts*/
define("ts/util/utils.ts",function(e,r){"use strict";function t(e,r){return!!e&&e.hasOwnProperty(r)}function n(e,r,a,o){var u,i,f,s,d,l=/^(.+?)(\[.*\])$/;if(i=r.match(l)){s=i[1],f=i[2].replace(/^\[|\]$/g,"").split("][");for(var p=0;d=f[p];p++)u=!d||d.match(/^\d+$/),!s&&c.Array(e)&&(s=e.length),t(e,s)||(e[s]=u?[]:{}),e=e[s],s=d;!s&&u&&(s=e.length.toString()),n(e,s,a,o)}else e[r]=o&&"true"===a?!0:o&&"false"===a?!1:o&&c.Number(a)?parseFloat(a):a}function a(e,r){var t;return c.Array(r)||c.Object(r)?(t=[],u(r,function(r,n){e&&(r=e+"["+r+"]"),t.push(a(r,n))}),t.join("&")):e?o(e)+"="+(c.Date(r)?r.getTime():o(r)):""}function o(e){return e||e===!1||0===e?encodeURIComponent(e).replace(/%20/g,"+").replace(/%5B/g,"[").replace(/%5D/g,"]"):""}function u(e,r){var n;for(n in e)if(t(e,n)&&r.call(e,n,e[n],e)===!1)break}Object.defineProperty(r,"__esModule",{value:!0});var i=function(e,r){var t,a={};e=e&&e.toString?e.toString():"";for(var o,u=e.replace(/^.*?\?/,"").split("&"),i=0;o=u[i];i++)t=o.split("="),2===t.length&&n(a,t[0],decodeURIComponent(t[1]),r);return a}(window.location.search,!1);r.request=i;var c={Array:$.noop,RegExp:$.noop,Date:$.noop,Number:$.noop,String:$.noop,Object:$.noop,HTMLDocument:$.noop,UsingIE:$.detectIE()};r.is=c;for(var f=["Array","RegExp","Date","Number","String","Object","HTMLDocument"],s=0,d=void 0;d=f[s++];)c[d]=function(e){return function(r){return Object.prototype.toString.call(r)=="[object "+e+"]"}}(d);var l={addSearch:function(e){for(var r=1,t=arguments.length;t>r;r++){var n=arguments[r];if(void 0!==n&&null!==n){(0===n.indexOf("?")||0===n.indexOf("&"))&&(n=n.substr(1));var a=r>1?"&":e.indexOf("?")>-1?"&":"?";e+=a+n}}return e},setParam:function(e,r,t){return e.addSearch(e,a(t,r))},getParam:function(e,r){r=r.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+r+"=([^&#]*)"),n=t.exec(e.substr(e.indexOf("?")));return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}};r.url=l;var p={_str_pad_repeater:function(e,r){for(var t="";t.length<r;)t+=e;return t=t.substr(0,r)},pad:function(e,r,t,n){void 0===t&&(t="0"),void 0===n&&(n="STR_PAD_RIGHT");var a,o="";return e+="",t=void 0!==t?t:" ","STR_PAD_LEFT"!==n&&"STR_PAD_RIGHT"!==n&&"STR_PAD_BOTH"!==n&&(n="STR_PAD_RIGHT"),(a=r-e.length)>0&&("STR_PAD_LEFT"===n?e=p._str_pad_repeater(t,a)+e:"STR_PAD_RIGHT"===n?e+=p._str_pad_repeater(t,a):"STR_PAD_BOTH"===n&&(o=p._str_pad_repeater(t,Math.ceil(a/2)),e=o+e+o,e=e.substr(0,r))),e},padLeft:function(e,r,t){return void 0===t&&(t="0"),p.pad(e,r,t,"STR_PAD_LEFT")},padRight:function(e,r,t){return void 0===t&&(t="0"),p.pad(e,r,t||0,"STR_PAD_RIGHT")}};r.string=p;var g={addSeconds:function(e,r){return new Date(e.getTime()+1e3*r)},addDays:function(e,r){return new Date(e.getTime()+24*r*3600*1e3)},daySpan:function(e,r){return Math.round((r.valueOf()-e.valueOf())/864e5)},weekSpan:function(e,r){var t=g.daySpan(e,r);return Math.ceil((t+e.getDay())/7)}};r.dateTime=g;var h={hashKeysToArray:function(e){if(Object.keys)return Object.keys(e);var r=[];for(r[r.length]in e);return r},hashToArray:function(e,r){var t=[];for(var n in e){var a=e[n];r&&(a=r(a,n)),t.push(a)}return t},arrayToHash:function(e,r){for(var t={},n=0,a=e.length;a>n;n++){var o=e[n];o[r]in t||(t[o[r]]=o)}return t},stringToDate:function(e,r){var t=r||"yyyy-MM-dd HH:mm:ss",n=e.match(/(\d+)/g),a=0,o={};return t.replace(/(yyyy|dd|MM|HH|hh|mm|ss)/g,function(e){o[e]=a++}),!o.HH&&o.hh&&(o.HH=o.hh),new Date(n[o.yyyy]||0,(n[o.MM]||1)-1,n[o.dd]||0,n[o.HH]||0,n[o.mm]||0,n[o.ss]||0)},jsonToDate:function(e){return new Date(Date.parse(e))},secondsToTimecode:function(e){var r=Math.floor(e/3600),t=Math.floor((e-3600*r)/60),n=e-3600*r-60*t;n=Math.round(100*n)/100;var a=10>r?"0"+r:r;return a+=":"+(10>t?"0"+t:t),a+=":"+(10>n?"0"+n:n)}};r.convert=h;var v={date:function(e,r){void 0===r&&(r="yyyy-MM-dd");var t={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours()>12?e.getHours()-12:e.getHours(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(r)&&(r=r.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)new RegExp("("+n+")").test(r)&&(r=r.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return r},toFixed:function(e){var r=Math.round(100*+e);return v.toNFixed(.01*r)},toNFixed:function(e){var r=(+e).toString(),t=r.indexOf(".");return 0>t?r+".00":(r+="00",r.substr(0,t+3))},number:function(e,r,t,n){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var a=isFinite(+e)?+e:0,o=isFinite(+r)?Math.abs(r):0,u="undefined"==typeof n?",":n,i="undefined"==typeof t?".":t,c="",f=function(e,r){var t=Math.pow(10,r);return""+(Math.round(e*t)/t).toFixed(r)},c=(o?f(a,o):""+Math.round(a)).split(".");return c[0].length>3&&(c[0]=c[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,u)),(c[1]||"").length<o&&(c[1]=c[1]||"",c[1]+=new Array(o-c[1].length+1).join("0")),c.join(i)},fileSize:function(e){return e=e>=1073741824?v.number(e/1073741824,2,".",",")+" GB":e>=1048576?v.number(e/1048576,2,".","")+" MB":e>=1024?v.number(e/1024,0)+" KB":v.number(e,0)+" bytes"},json:function(){var e=/\${(\w+[.]*\w*)\}(?!})/g;return function(r,t){return r.replace(e,function(e,r){return t[r]})}}(),timeLength:function(e){return void 0===e&&(e=0),p.padLeft(Math.floor(e/3600),2)+":"+p.padLeft(Math.floor(e%3600/60),2)+":"+p.padLeft(Math.floor(e%60),2)}};r.format=v;var y=function(e){for(var r in e)r.indexOf(":")>-1&&delete e[r];return e};r.cleanValueObject=y;var m={unique:function(e){for(var r=[],t={},n=0,a=e.length;a>n;n++)t[e[n]]||(t[e[n]]=!0,r.push(e[n]));return r},combine:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var t=[],n=0,a=e.length;a>n;n++)for(var o=e[n],u=o.length,i=0;u>i;i+=5e3)t.push.apply(t,o.slice(i,i+5e3));return t},sort:function(e,r,t){if(t&&"function"==typeof t)return e.sort(t);var n=Array.prototype.slice.call(e,0);return arguments.length?n.sort(function(e,t){var n=e[r],a=isNaN(n),o=t[r],u=isNaN(o);return a&&u?""===n?-1:""===o?1:n===o?0:n>o?1:-1:a?-1:u?1:n===o?0:n>o?1:-1}):n.sort()}};r.array=m});
;/*!ts/util/api.ts*/
define("ts/util/api.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t("ts/app.cfg.ts"),n=t("ts/util/utils.ts");r.default.apiServer||r.default.onUnauthorizedError();var i=r.default.onServerError||function(t){alert("err: "+t)},o={dom:$("#opgAjaxLoading"),handlers:0,timer:0,show:function(){o.dom.stop(!0,!0).fadeIn()},hide:function(){o.handlers||o.dom.stop(!0,!0).fadeOut()}},s=function(){function t(t,e,n,i){void 0===n&&(n="GET"),void 0===i&&(i=!0),this.name=e,this.method=n,this.restful=i,this.timeOut=r.default.ajaxTimeOut,this.url=0===t.indexOf("http://")||0===t.indexOf("https://")?t:r.default.apiServer+t.replace(/^\//,""),this.unlimited=!1,this.accessible=!0}return t.prototype.handleError=function(t,e){return"function"==typeof this.onError?this.onError.call(this,t,e):i.call(this,t,e)},t.prototype.invoke=function(t,e){var r=this;if(this.accessible||this.unlimited){this.accessible=!1,$.isFunction(t)&&(e=t,t=null);var i=this.url,s=this.method,a="application/json",u=!0;return"UPLOAD"===s?(a=!1,u=!1,s="POST"):t&&(this.restful||"GET"==this.method?this.restful&&(i=n.format.json(i,t),t=null):t=JSON.stringify(t)),$.ajax({contentType:a,processData:u,dataType:"json",url:i,data:t,method:s,cache:!1,timeout:r.timeOut,beforeSend:function(){o.handlers++,o.timer&&clearTimeout(o.timer),o.timer=0,o.show()},complete:function(){return o.handlers--,o.timer=setTimeout(o.hide,100),r.accessible=!0,r=null,t},error:function(t,n,i){if(t.responseJSON&&t.responseJSON.meta&&t.responseJSON.meta.message)r.handleError.call(r,t.responseJSON.meta.message,e);else{var o=t.status;"timeout"===i?i="连接超时":i?"Not Found"===i&&(i="无此接口"):i="无法连接服务器",r.handleError.call(r,"api."+r.name+" error "+o+" ("+i+")")}},success:function(t,n,i){t.error?r.handleError.call(r,t.error,e):e&&"function"==typeof e&&e(t,n,i)}})}throw new Error("Server function ["+this.name+"] unusable now.")},t}(),a=function(t){for(var e in t){var r=e.split("!"),n=r[0],i=r[1]?r[1].toString().toUpperCase():"GET",o=!(void 0===r[2])||t[e].indexOf("${")>-1;a[n]||(a[n]=function(t){var e=function(e,r){return t.invoke.call(t,e,r)};return e.set=function(r,n){return t[r]=n,e},e.get=function(e){return t[e]},e.toString=function(){return t.url},e}(new s(t[e],n,i,o)))}return a};e.api=a});
;/*!ts/ui/Table.ts*/
define("ts/ui/Table.ts",function(t,e){"use strict";function i(t){for(var e,i,n=[],a=0,s=(t.columns?t.columns.length:0,void 0);s=t.columns[a];a++)if("function"==typeof s.render?(i=s.src+"_render"+o.DisplayObject.guid(),e=":="+i,t.bindOptions.itemRender[i]=s.render):e="",s.cmd)n[a]="checkAll"===s.cmd?'<td class="text-center"><input type="checkbox" name="chk_'+a+'" value="${'+s.src+e+'}"></td>':'<td class="text-center"><input type="radio" name="chk_'+a+'" value="${'+s.src+e+'}"></td>',this.cmd||(this.cmd=s.cmd,this.cmdColumnIndex=a);else{var r="text-"+(s.align?s.align.toLowerCase():"center");n[a]='<td class="'+r+'">${'+s.src+e+"}</td>"}var h;return t.rows&&t.rows.render?(h=t.rows.src||"___",t.bindOptions.itemRender.__renderTr=function(e,i,n,a){var s=t.rows.render(e,i,n,a)||"",o=i%2?"odd":"even";return o+" "+s}):(h="___",t.bindOptions.itemRender.__renderTr=function(t,e){return e%2?"odd":"even"}),'<tr class="${'+h+':=__renderTr}">'+n.join("")+"</tr>"}function n(t,e){for(var i=0,n=e.columns?e.columns.length:0,a=[],s=[],o=void 0;o=e.columns[i];i++)o.cmd&&(o.width=o.width||32,o.text="checkAll"===o.cmd?'<input type="checkbox" name="'+o.src+'" value="chk_'+i+'">':'<input type="hidden" name="'+o.src+'" value="chk_'+i+'">'),a[i]="width:"+(o.width?o.width+"px;":"auto; "),s[i]='<th style="'+a[i]+'">'+(o.text||"column_"+i)+"</th>";var r="<thead><tr>"+s.join("")+"</tr></thead>",h=e.pagination?'<tfoot><tr><td colspan="'+(n||"1")+'"></td></tr></tfoot>':"";t.prepend(r+'<tbody id="'+t[0].id+'_tbody"></tbody>'+h)}function a(t,e){var i='<div class="grid-title-bar">\n		'+e.title+"\n	</div>",n=$(i),a="";if(e.buttons&&e.buttons.length){for(var s=0,o=e.buttons.length;o>s;s++){var r=e.buttons[s];a+='<button id="'+r.id+'" class="'+r.className+'">'+r.html+"</button>"}n.append(a)}t.before(n)}var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=t("ts/ui/DisplayOject.ts"),r=t("ts/util/utils.ts"),h=function(t){function e(e,i){var n=this;return i=$.extend({bindOptions:{itemRender:{}},resizable:!0},i),n=t.call(this,e,i)||this}return s(e,t),e.prototype.init=function(e,s){var o=this;t.prototype.init.call(this,e,s);var r="TABLE"===e[0].tagName;if(r?(e.addClass("grid"),this.table=e):this.table=$('<table id="'+e[0].id+'_table" class="grid"></table>'),this.resizable=s.resizable,this._bindOption.template=i.call(this,s),n(this.table,s),s.titleBar&&a(this.table,s.titleBar),r||e.append(this.table),this.thead=this.table.find("thead"),this.cols=s.columns.length,this.tbody=this.table.find("tbody"),this.container=this.tbody,this.tbody.on("click","tr",function(t){o.selectHandler(t)}),this.resizable&&this.table.resizableColumns({minWidth:1}),s.pagination){var h=this,p={append_number_input:!0,link_to:"javascript:void(0)",num_edge_entries:1,num_display_entries:5,items_per_page:10,prev_text:"上页",next_text:"下页",load_first_page:!1,callback:function(t){return h._param.pageIndex=t,h.update(o._param),!1},pageSize:10,showCount:!0,customizable:!0};s.pagination.pageSize&&(s.pagination.items_per_page=s.pagination.pageSize),s.pagination=$.extend(p,s.pagination),this.pagination=s.pagination,this._param=$.extend({pageIndex:0,pageSize:s.pagination.pageSize},s._params)}},e.prototype.createdHandler=function(t){"checkAll"===this.cmd?(this.cmdCheckAll=this.thead.find("th:eq("+this.cmdColumnIndex+")").find("input"),this.cmdCheckAll.syncCheckBoxGroup("td:eq("+this.cmdColumnIndex+")>:checkbox:enabled",this.tbody.find("tr"))):"checkOne"===this.cmd&&(this.cmdCheckOne=this.thead.find("th:eq("+this.cmdColumnIndex+")").find("input:hidden")),this._created=!0,this._createdPromise&&this._createdPromise.resolve(),this.onCreate&&this.onCreate(t)},e.prototype.bindHandler=function(t){this.pagination&&this.makePager(~~t.page.rowCount),"function"==typeof this.onBind&&this.onBind(t)},e.prototype.updateHandler=function(t){return this.cmdCheckAll&&(this.cmdCheckAll.prop("checked",!1),this.cmdCheckAll.syncCheckBoxGroup("td:eq("+this.cmdColumnIndex+")>:checkbox:enabled",this.tbody.find("tr"))),$.isFunction(this.onUpdate)&&this.onUpdate(t),this},e.prototype.makePager=function(t){var e=this,i=this,n=Math.ceil(t/this._param.pageSize);if(0===n&&(n=1),this._param.pageIndex>0&&n<this.pageCount)return this._param.pageIndex-=this.pageCount-n,setTimeout(function(){return e.update()},10);this.pageCount=n;var a=this._param.pageIndex;if(this.tPager)this.pagination.current_page=this._param.pageIndex,this.tPager.pagination(t,this.pagination),this.pagination.showCount&&(this.pageCounter.find(".bt").text(t),this.pageCounter.find(".bc").text(n));else{if(this.tfoot=this.table.find("tfoot td:eq(0)"),this.tPager=$('<div class="pagination_container"></div>').appendTo(this.tfoot),this.tPager.pagination(t,this.pagination),this.iptPageGo=this.tfoot.find(".iptPageGo"),this.pagination.append_number_input=this.iptPageGo,this.pageCounter=$("<span></span>"),this.tPager.after(this.pageCounter),this.pagination.showCount){this.pageTemplate="string"==typeof this.pagination.showCount?this.pagination.showCount:'共<span class="bt">${rowCount}</span>条记录 , 第<span class="bf">${pageNum}</span> / <span class="bc">${pageCount}</span>页',this.pageCounter.html(r.format.json(this.pageTemplate,{rowCount:t,pageIndex:a,pageCount:n}));var s=this.pageCounter.find(".bf");this.iptPageGo.val(a),s.replaceWith(this.iptPageGo)}if(this.pagination.customizable){"object"!=typeof this.pagination.customizable&&(this.pagination.customizable=[10,20,50]);for(var o=this.pagination.customizable,h=[],p=0,d=o.length;d>p;p++)h[p]='<option value="'+o[p]+'" '+(o[p]==this.pagination.pageSize?"selected":"")+">"+o[p]+"</option>";var c=$("<select>"+h.join("")+"</select>");this.pageCounter.after($('<label class="pageSelectorLabel">每页</label>').append(c).append("条")),c.on("change.opg",function(){return i.pagination.items_per_page=i._param.pageSize=~~this.options[this.selectedIndex].value,i._param.pageIndex=0,i.update(i._param),!1})}}},e.prototype.getCheckData=function(){if(this.cmd){for(var t=(this.cmdCheckAll||this.cmdCheckOne).val(),e=this.tbody.find("input[name='"+t+"']"),i=this.cmdCheckAll?[]:null,n=0,a=e.length;a>n;n++)if(e[n].checked){if(this.cmdCheckOne)return this.data[n];i.push(this.data[n])}return i}return null},e.prototype.getCheckedValue=function(){if(this.cmd){var t,e=(this.cmdCheckAll||this.cmdCheckOne).val(),i=this.tbody.find("input[name='"+e+"']:checked");return this.cmdCheckAll?(t=[],i.each(function(e,i){t.push(i.value)})):t=i.length?i.val():null,t}return null},e}(o.AjaxDisplayObject);e.default=h});
;/*!ts/ui/Popup.ts*/
define("ts/ui/Popup.ts",function(t,o){"use strict";function i(t){var o=this,i=this.titleBar=$('<div class="dg-title">'+t.title+"</div>");this.boxy.append(this.titleBar),i[0].onselectstart=p;var n=$('<div class="dg-title-buttons"></div>').appendTo(i);t.btnMax&&(this.btnMax=$("<b class='dg-btn-max'></b>"),n.append(this.btnMax),this.btnMax.on("click",function(){o.toggle()})),t.btnClose&&(this.btnClose=$("<b class='dg-btn-x'></b>"),n.append(this.btnClose),this.btnClose.on("click",function(){o.close()})),t.drag&&e.call(this,this,t),$('<div class="row tb-row" />').prependTo(this.boxy).append(i)}function e(t){var o=t.titleBar;o.on("mousedown",function(i){t.toTop(),"B"!==i.target.tagName&&(i.button<2&&"max"!==t.state&&o.on("mousemove.boxy",function(i){o.unbind("mousemove.boxy");var e=t.boxy[0];document.onselectstart=p;var n=t.getSize();l.dragging=[e,i.pageX-e.offsetLeft,i.pageY-e.offsetTop,document.body.scrollWidth-n.width,document.body.scrollHeight-n.height],$(document).bind("mousemove.boxy",l._handleDrag).bind("mouseup.boxy",function(){if("max"!==t.state&&l.dragging){$(document).unbind(".boxy"),l.dragging=document.onselectstart=null;var o=t.boxy.position();t.restoreSize.top=o.top,t.restoreSize.left=o.left}})}),o.on("mouseup.boxy",function(){o.unbind(".boxy")}))})}function n(t){var o=this.footBar=$('<div class="dg-footer"></div>'),i=[];for(var e in t.buttons){var n=t.buttons[e],s=i.length,a=void 0,r=void 0;"string"==typeof n?(a=0===s?"btn-primary":"",r=n):(a=n.className||"",r=n.text||"","function"==typeof n.onClick&&(t.callback||(t.callback=function(){}),t.callback[e]=n.onClick)),i.push('<button class="'+a+'" name="'+s+'" data-key="'+e+'">'+r+"</button>")}o.html(i.join(" "));var h=this;o.on("click","button",function(){var o=!1;if(t.callback){var i=this,e=$(this).data("key"),n=null;h.iframe&&(n=h.iframe.contentWindow?h.iframe.contentWindow:h.iframe.contentDocument.defaultView);var s=parseInt(i.name,10);o=e&&"function"==typeof t.callback[e]?t.callback[e].call(h,s,n,i):t.callback.call(h,s,n,i)}o||h.close()}),$('<div class="row tf-row" />').appendTo(this.boxy).append(o)}function s(t,o,i){"function"==typeof o&&(i.callback=o),i.buttons||(i.buttons={}),i.buttons.ok||(i.buttons.ok="确定");var e;return e="string"==typeof t&&t.indexOf("<iframe ")<0?'<div class="dg-alert">'+t+"</div>":t,{html:e,cfg:i}}var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)o.hasOwnProperty(i)&&(t[i]=o[i])};return function(o,i){function e(){this.constructor=o}t(o,i),o.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=t("ts/ui/DisplayOject.ts"),h=t("ts/util/utils.ts"),c={callback:null,title:null,btnClose:!0,btnMax:!1,drag:!0,modal:!0,show:!0,destroy:!0,onClose:null,onDestroy:null,buttons:null},l={manager:[],managerHash:{},dragging:null,_handleDrag:function(t){var o=l.dragging;if(o){var i=t.pageX-o[1],e=t.pageY-o[2];1>i?i=1:i>o[3]&&(i=o[3]),1>e?e=1:e>o[4]&&(e=o[4]),o[0].style.cssText+=";left:"+i+"px;top:"+e+"px;"}}},u=function(){var t=1e3;return function(){return++t}}(),p=function(){return!1},f=function(t){function o(o,i){var e=this;if(i=$.extend({},c,i),e=t.call(this,o,i)||this,l.manager.push(e),i.popId){if(i.popId in l.managerHash)throw new Error('Duplicated PopId "'+i.popId+'"');l.managerHash[i.popId]=e}return e}return a(o,t),o.prototype.init=function(o,i){t.prototype.init.call(this,o,i),this.cfg=i},o.prototype.create=function(t,o){this.state="normal",this.visible=!1,this.mask=$('<div class="dg-mask"></div>'),this.boxy=$('<div class="dg-wrapper" id="dialog_'+r.DisplayObject.guid()+'"></div>'),this.content=$('<div class="dg-content"></div>'),this.content.append(t),this.boxy.append(this.content).appendTo(document.body);var e=0,s=0;o.title&&(i.call(this,o),e=this.titleBar.outerHeight(),this.boxy.find(".tb-row").css({height:e})),o.buttons&&(n.call(this,o),this.boxy.find(".tf-row").css({height:this.footBar.outerHeight()}),s=this.footBar.outerHeight()),"IFRAME"===this.jq[0].tagName&&(this.iframe=this.jq[0]);var a={width:o.width||this.boxy.outerWidth()||500,height:o.height||this.boxy.outerHeight()||300},h=document.documentElement,c={width:h.clientWidth,height:h.clientHeight},l={width:o.width||this.boxy.outerWidth()||500,height:o.height||this.boxy.outerHeight()||300,top:Math.max(0,(c.height-a.height)/2),left:Math.max(0,(c.width-a.width)/2)};this.boxy.css(l),this.restoreSize=l,this.mask.append(this.boxy.css({visibility:"visible"})).appendTo(document.body),this.toTop(),navigator.userAgent.indexOf("Firefox")>-1&&this.iframe&&t.css({height:a.height-e-s-2}),o.show&&this.open()},o.prototype.getSize=function(){return{width:this.boxy.outerWidth(),height:this.boxy.outerHeight()}},o.prototype.getPosition=function(){var t=this.boxy[0];return{left:t.offsetLeft,top:t.offsetTop}},o.prototype.toTop=function(){return this.mask.css({zIndex:u()}),this},o.prototype.open=function(){if(this.boxy.stop(!0,!0),this.visible)return this.toTop();this.mask.css({display:"block",opacity:1});var t=this.boxy.position().top;return this.boxy.css({top:t-20,opacity:0}).animate({opacity:1,top:t},200),this.visible=!0,this},o.prototype.close=function(t){var o=this,i=this.getPosition();return i.opacity=0,i.top=Math.max(i.top-40,0),this.mask.animate({opacity:0},200),this.boxy.stop(!0,!0).animate(i,300,function(){"function"==typeof o.cfg.onClose&&o.cfg.onClose.call(o),"function"==typeof t&&t.call(o),o.cfg.destroy?o.destroy.call(o):(o.visible=!1,o.boxy.css({top:i.top+40}),o.mask.css({display:"none"}))}),this},o.prototype.max=function(){return this.boxy.stop(!0,!0).css({left:0,top:0,width:"100%",height:"100%"}),this.btnMax&&this.btnMax.toggleClass("dg-btn-max dg-btn-restore"),this.state="max",this},o.prototype.restore=function(){return this.boxy.stop(!0,!0).css(this.restoreSize),this.btnMax&&this.btnMax.toggleClass("dg-btn-max dg-btn-restore"),this.state="normal",this},o.prototype.destroy=function(){if(this.titleBar&&(this.titleBar.off("mousedown"),this.btnMax&&this.btnMax.off("click"),this.btnClose&&this.btnClose.off("click")),this.footBar&&this.footBar.off("click"),this.mask.remove(),h.is.UsingIE){var t=$('<input type="text" style="opacity: 0;" />').appendTo("body").focus();setTimeout(function(){t.remove(),t=null},20)}l.manager.splice(l.manager.indexOf(this),1),this.cfg.popId&&delete l.managerHash[this.cfg.popId],"function"==typeof this.cfg.onDestroy&&this.cfg.onDestroy.call(this)},o.prototype.toggle=function(){return"normal"===this.state?(this.max(),navigator.userAgent.indexOf("Firefox")>-1&&this.iframe&&(this.iframe.style.cssText+="height: "+(this.boxy.outerHeight()-this.titleBar.outerHeight()-2-(this.footBar?this.footBar.outerHeight():0))+"px; ")):(this.restore(),navigator.userAgent.indexOf("Firefox")>-1&&this.iframe&&(this.iframe.style.cssText+="height: "+(this.restoreSize.height-this.titleBar.outerHeight()-2-(this.footBar?this.footBar.outerHeight():0))+"px; ")),this},o.alert=function(t,i,e){void 0===e&&(e={});var n=s(t,i,e),a=n.html,r=n.cfg;return new o($(a),r)},o.confirm=function(t,i,e){void 0===e&&(e={});var n=s(t,i,e),a=n.html,r=n.cfg;return r.buttons.cancel||(r.buttons.cancel="取消"),r.callback=function(t,o){return 0===t?i.call(this,t,o):void 0},new o($(a),r)},o.popTop=function(t,o){return top.opg(t).popup(o)},o.closeLast=function(){if(l.manager.length>0){var t=l.manager[l.manager.length-1];return t.close()}return null},o.closeById=function(t){if(l.managerHash[t]){var o=l.managerHash[t];return o.close()}return null},o}(r.DisplayObject);o.default=f});
;/*!ts/ui/Panel.ts*/
define("ts/ui/Panel.ts",function(t,e){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=t("ts/ui/DisplayOject.ts"),a=function(t){function e(e,n){var i=this;return n=$.extend({title:"内容检索",btnClose:!0,btnClass:"btn-primary btn-small",btnSearchId:"btnSearch",btnSearchText:'<i class="ico-find"></i> 查询'},n),i=t.call(this,e,n)||this}return n(e,t),e.prototype.init=function(e,n){t.prototype.init.call(this,e,n),this.cfg=n},e.prototype.create=function(t,e){if(this.panel="DIV"!==t[0].tagName||t[0].className?$('<div class="panel" />'):t.addClass("panel"),this.panel.show(),this.titleBar=$('<div class="panel-title" />'),this.titleBar.html(e.title),this.panel.append(this.titleBar),this.body=$('<div class="panel-body" />'),this.panel.append(this.body),this.foot=$('<div class="panel-foot" />'),this.panel.append(this.foot),e.btnClose){this.btnClose=$('<b class="panel-collapse" />'),this.titleBar.append(this.btnClose);var n=this;this.btnClose.on("click",function(){var t=$(this);t.hasClass("expanded")?(n.body.show(),n.foot.show()):(n.body.hide(),n.foot.hide()),t.toggleClass("expanded")})}if(e.btnSearchId&&(this.btnSearch=$('<button id="'+e.btnSearchId+'" class="'+e.btnClass+'">'+e.btnSearchText+"</button>"),this.addToFoot(this.btnSearch)),this.btnSearch){e.btnSearchClick&&this.btnSearch.click(e.btnSearchClick);var i=this;i.body.on("keypress","input",function(t){13==t.keyCode&&i.btnSearch.trigger("click")})}t.append(this.panel),this.createdHandler()},e.prototype.addToBody=function(t){this.body.append($(t))},e.prototype.addToFoot=function(t){this.foot.append($(t))},e.wrapPanel=function(t,n){var i=$(t),a=$("<div />");i.replaceWith(a);var o=$.extend({onCreate:function(){this.addToBody(i)}},n);return new e(a,o)},e}(i.DisplayObject);e.default=a});
;/*!ts/ui/Combo.ts*/
define("ts/ui/Combo.ts",function(t,e){"use strict";function o(){r.on("mousedown.dropDownHide",function(){s.closeAll()})}var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=t("ts/ui/DisplayOject.ts"),s={zIndex:999,instances:{},remove:function(t){delete this.instances[t]},closeAll:function(){for(var t in this.instances){var e=this.instances[t];"opened"===e.status&&e.close()}}},r=$("body"),a=function(t){function e(e,o){var n=this;return o=$.extend({},o),n=t.call(this,e,o)||this}return n(e,t),e.prototype.init=function(t,o){this._evtName="mousedown.ComboEvent","INPUT"===t[0].tagName?t.addClass("combo-input").val(o.text):t.text(o.text),this.jqValueField=$(o.valueField),this.target=o.target,this.target.addClass("combo-dropDown").on("mousedown",function(t){t.stopPropagation()}),this.onBeforeOpen=o.onBeforeOpen,this.onOpen=o.onOpen,this.onClose=o.onClose,o.allowBlank&&e.makeClearableInput(this.jq,this.jqValueField),s.instances[this.guid]=this,this.enable=!0},e.makeClearableInput=function(t,e){var o=$.detectIE();if(o&&o>10&&!t.prop("readonly"));else{var n=t.css({"float":"left",margin:0}).wrap('<span class="sp-eraserWrap"></span>').parents("span:first"),i=$('<div class="ipt-eraser">&times;</div>').appendTo(n).click(function(){t.prop("disabled")||(t.val(""),e.val(""),i.hide())});n.hover(function(){!t.prop("disabled")&&t.val()&&(i.is(":visible")?i.hide():i.show())})}},Object.defineProperty(e.prototype,"enable",{set:function(t){if(!t)return this.jq.off(this._evtName).prop("disabled",!0),this.target.hide(),this;var e=this,o=this.target;this.jq.on(this._evtName,function(){var t=!0;return"closed"===e.status&&e.position(),"function"==typeof e.onBeforeOpen&&(t=e.onBeforeOpen.apply(e),t===!1)?e:(o.stop(!0,!0).slideToggle(90,function(){e.status="block"===o.css("display")?"opened":"closed"}),e)})},enumerable:!0,configurable:!0}),e.prototype.position=function(){var t=this.jq,e=this.target,o=t.offset(),n=o.top+t.outerHeight(),i=e.outerHeight();n+i>$(document).outerHeight()&&o.top>i&&(n=o.top-e.outerHeight()),e.css({top:n,left:o.left,zIndex:s.zIndex++})},e.prototype.open=function(){if("function"==typeof this.onBeforeOpen){var t=this.onBeforeOpen();if(t===!1)return this}this.position(),this.target.stop(!0,!0).slideDown(90),this.status="opened"},e.prototype.close=function(){this.target.stop(!0,!0).slideUp(90),this.status="closed"},Object.defineProperty(e.prototype,"status",{get:function(){return this._state},set:function(t){"opened"===t?(this._state="opened",o(),this.target.on("mouseleave.dropDownHide",o).on("mouseenter.dropDownHide",function(){r.off(".dropDownHide")}),"function"==typeof this.onOpen&&this.onOpen.apply(this,arguments)):(this._state="closed",r.off(".dropDownHide"),this.target.off(".dropDownHide"),"function"==typeof this.onClose&&this.onClose.apply(this,arguments))},enumerable:!0,configurable:!0}),e.prototype.setValue=function(t,e){this.jq.val(t),this.jqValueField.val(e)},Object.defineProperty(e.prototype,"text",{get:function(){return $.trim(this.jq.val())},enumerable:!0,configurable:!0}),e}(i.DisplayObject);e.Combo=a});
;/*!ts/ui/Tree.ts*/
define("ts/ui/Tree.ts",function(e,t){"use strict";function a(e,t){for(var i,l=0,s=e.length;s>l;l++){var r=e[l];if(r.id==t){i=r;break}if(r.children&&(i=a(r.children,t)))break}return i}var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var l=e("ts/ui/DisplayOject.ts"),s=e("ts/ui/Combo.ts"),r=e("ts/util/store.ts"),n=function(e){function t(t,a){var i=this;return a=$.extend({text:"name",value:"id",cache:!0},a),i=e.call(this,t,a)||this}return i(t,e),t.prototype.init=function(t,a){var i=this;e.prototype.init.call(this,t,a),this.cache=a.cache,this.treeName=a.name,this._store=new r.LocalStore(!1),this._cachedExpandedLeaf={},this.treeName||(this.treeName=""+this.guid,this.cache&&(this.cache=!1)),this.treeName="tree_"+this.treeName,this.cache&&(this._cachedExpandedLeaf=this._store.get(this.treeName)||{}),a.template||(a.template="checkAll"===a.cmd?'<label><input id="'+this.treeName+'Chk_${id}" type="checkbox" value="${'+a.value+'}"> ${'+a.text+"}</label>":"${"+a.text+"}");var l=this;if(this.cmd=a.cmd,a.root){this.root=$("<ul></ul>");var n=$('<ul class="filetree treeview rootUl"><li class="last rootLi">\n							<span class="folder rootSp">'+a.root+"</span>\n						</li></ul>");n.find("li").append(this.root),n.appendTo(this.jq)}else this.root=$('<ul class="filetree treeview"></ul>'),this.jq.append(this.root);if(this.selectedItemId=-1,this.currentLi=null,this.render=a.render,this.template='<li id="'+this.treeName+'Li_${id}" class="${id:=_getLiClass}" data-id="${id}">${id:=_getDiv}<span id="'+this.treeName+'Sp_${id}" data-id="${id}" class="sp ${id:=_getSpClass}">'+a.template+"</span>${id:=_getUl}</li>",this.root.on("click",".hitarea",function(e){e.stopImmediatePropagation();var t=$(this);t.toggleClass("collapsable-hitarea expandable-hitarea").siblings("ul").toggle();var a=t.parent(),i=a.data("id");a.toggleClass("collapsable expandable"),l.cache&&(i in l._cachedExpandedLeaf?delete l._cachedExpandedLeaf[i]:l._cachedExpandedLeaf[i]=1,l._store.set(l.treeName,l._cachedExpandedLeaf)),this.className.indexOf("last")>-1&&(t.toggleClass("lastCollapsable-hitarea lastExpandable-hitarea"),a.toggleClass("lastExpandable lastCollapsable"))}),this.jq.on("click",".sp",function(e){var t=$(this);l.selectedItemId!=t.data("id")&&(l.prevItemId=l.selectedItemId,l.prevLi=l.currentLi,l.selectedItemId=t.data("id"),l.currentLi=t.closest("li"),l.prevLi&&l.prevLi.find(".sp").removeClass("selected"),t.addClass("selected"),"function"==typeof l.onSelect&&l.onSelect(e))}),a.combo){var c=$(a.combo.textField);c.after(this.jq),this.combo=new s.Combo(c,{allowBlank:a.combo.allowBlank,target:this.jq.addClass("treeField-combo"),valueField:a.combo.valueField}),this.textSrc=a.text,this.valueSrc=a.value,this.jq.on("click",".sp",function(){i.syncData(i.getSelectedData())}),a.combo.closeOnClick&&this.jq.on("click",function(){return i.combo.close()})}},t.prototype.getSelectedData=function(){return a(this.data,this.selectedItemId)},t.prototype.bindData=function(e){var t,a=e;t=$.isArray(e)?e:e[this.arrSrc],this.add(t),this.prevItemId=this.selectedItemId,this.selectedItemId=-1,this.prevLi=this.currentLi,this.currentLi=null,this.data=t,this.bindHandler(a)},t.prototype.add=function(e,t){var a,i=this;a=t?$("#"+i.treeName+"Ul_"+t.id):this.root;var l={_getDiv:function(t,a,l){if(l.children||l.hasChildren){var s=void 0;return t in i._cachedExpandedLeaf?(s="hitarea collapsable-hitarea",a+1===e.length&&(s+=" lastCollapsable-hitarea")):(s="hitarea expandable-hitarea",a+1===e.length&&(s+=" lastExpandable-hitarea")),'<div class="'+s+'"></div>'}return""},_getUl:function(e,t,a){if(a.children||a.hasChildren){var l=e in i._cachedExpandedLeaf?"":' style="display: none;"';return'<ul id="'+i.treeName+("Ul_"+e+'" '+l+"></ul>")}return""},_getLiClass:function(t,a,l){var s="";return l.children||l.hasChildren?t in i._cachedExpandedLeaf?(s="collapsable",a+1===e.length&&(s+=" lastCollapsable")):(s="expandable",a+1===e.length&&(s+=" lastExpandable")):a+1===e.length&&(s="last"),s},_getSpClass:function(e,t,a){return a.children||a.hasChildren?"folder":"file"}};if(i.render)for(var s in i.render)s in l||(l[s]=i.render[s]);a.bindList({list:e,template:i.template,itemRender:l,mode:t?"append":"html"});for(var r=0,n=e.length;n>r;r++){var c=e[r];c.children&&this.add(c.children,c)}"checkAll"===this.cmd&&a.find(".folder").each(function(e,t){var a=$(t),i=a.siblings("ul");a.find(":checkbox").checkBoxAll(":checkbox",i)})},t.prototype.findObjectById=function(e){return a(this.data,e)},t.prototype.syncData=function(e){this.combo.setValue(e[this.textSrc],e[this.valueSrc])},t}(l.AjaxDisplayObject);t.default=n});
;/*!ts/ui/TabView.ts*/
define("ts/ui/TabView.ts",function(e,t){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=e("ts/ui/DisplayOject.ts"),a=function(e){function t(t,i){var n=this;return i=$.extend({autoFire:!0,selectedIndex:0,bindOptions:{template:"<li>${label}</li>"}},i),n=e.call(this,t,i)||this}return i(t,e),t.prototype.init=function(e,t){e.css({display:"table"});var i=$('<div class="tabNavigator"></div>');this.bar=$('<ul class="tabUL"></ul>'),$('<div class="tabWrap"></div>').append(this.bar).appendTo(i),this.data=t.bindOptions.list=t.data,this.bar.bindList(t.bindOptions),e.prepend(i),this.items=this.bar.find("li"),this._prevIndex=-1,this._selectedIndex=-1,this._initSelectedIndex=this.items.length>t.selectedIndex?t.selectedIndex:this.items.length?0:-1;var n=this;return this.bar.on("click.opg","li",function(e){n.selectHandler.call(n,e)}),"function"==typeof t.onSelect&&(this.onSelect=t.onSelect),this.createdHandler(this.data),t.autoFire&&t.selectedIndex>-1&&(n.selectedIndex=t.selectedIndex),this},t.prototype.selectHandler=function(e){e.stopImmediatePropagation();var t=e.target,i=this.items.index(t);(i!==this._selectedIndex||-1==this._prevIndex)&&($(t).addClass("current").siblings("li.current").removeClass("current"),this.selectedIndex=i,"function"==typeof this.onSelect&&this.onSelect.call(this,e))},Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(e){this._selectedIndex!=e&&(this._prevIndex=this._selectedIndex,this._selectedIndex=e,this.bar.find("li:eq("+e+")").trigger("click.opg"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"prevIndex",{get:function(){return this._prevIndex},enumerable:!0,configurable:!0}),t.prototype.getSelectedData=function(e){var t=this.data[this.selectedIndex];if(e)return t;var i={},n=void 0;for(n in t)-1===n.indexOf(":")&&(i[n]=t[n]);return i},t}(n.DisplayObject);t.TabBar=a;var s=function(e){function t(t,i){return e.call(this,t,i)||this}return i(t,e),t.prototype.create=function(e,t){var i=t.selectedIndex||0,n=this;t.selectedIndex=-1,this.tabBar=new a(e,t),this.iframe=$('<iframe frameborder="0" src="about:blank"></iframe>').appendTo($('<div class="tabStack"></div>').appendTo(e)),this.tabBar.onSelect=function(){n.iframe.attr("src",n.tabBar.getSelectedData().url)},this.tabBar.selectedIndex=i,this.createdHandler()},t}(n.DisplayObject);t.TabNavigator=s;var r=function(e){function t(t,i){return e.call(this,t,i)||this}return i(t,e),t.prototype.create=function(e,t){this.views=[];var i=t.selectedIndex||0,n=this;t.selectedIndex=-1,this.tabBar=new a(e,t),this.stack=$('<div class="tabStack"></div>').appendTo($('<div style="display: table-row;height: 100%;"></div>').appendTo(e));for(var s=0,r=t.data.length;r>s;s++){var d=t.data[s].view;this.addView($(d))}this.tabBar.onSelect=function(){n.views[n.tabBar.prevIndex]&&n.views[n.tabBar.prevIndex].toggle(),n.views[n.tabBar.selectedIndex]&&n.views[n.tabBar.selectedIndex].toggle()},this.tabBar.selectedIndex=i,this.createdHandler()},t.prototype.addView=function(e){this.views.push(e),this.stack.append(e.addClass("tabDivision"))},t}(n.DisplayObject);t.TabView=r});
;/*!ts/opg.ts*/
define("ts/opg.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=t("ts/ui/FormControls.ts"),o=t("ts/util/api.ts"),i=t("ts/ui/Table.ts"),r=t("ts/ui/Popup.ts"),a=t("ts/ui/Panel.ts"),s=t("ts/ui/Tree.ts"),u=t("ts/ui/TabView.ts"),p=t("ts/util/utils.ts"),f=function(){function t(t){if(this.jq=$(t),0===this.jq.length)throw new Error("There is no dom object to be processed.")}return t.prototype.table=function(t){return new i.default(this.jq,t)},t.prototype.tree=function(t){return new s.default(this.jq,t)},t.prototype.listBox=function(t){return new n.ListBox(this.jq,t)},t.prototype.checkBox=function(t){return new n.CheckBox(this.jq,t)},t.prototype.radioBox=function(t){return new n.RadioBox(this.jq,t)},t.prototype.popup=function(t){return new r.default(this.jq,t)},t.prototype.panel=function(t){return new a.default(this.jq,t)},t.prototype.tabView=function(t){return new u.TabView(this.jq,t)},t}(),l=function(t){return new f(t)};l.api=o.api,l.request=p.request,l.dateTime=p.dateTime,l.string=p.string,l.is=p.is,l.url=p.url,l.convert=p.convert,l.format=p.format,l.array=p.array,l.popTop=r.default.popTop,l.alert=r.default.alert,l.confirm=r.default.confirm,l.ok=function(t,e,n){void 0===n&&(n={}),r.default.alert('<i class="ico-ok"></i><span>'+t+"</span>",e,n)},l.err=function(t,e,n){void 0===n&&(n={}),r.default.alert('<i class="ico-error"></i><span>'+t+"</span>",e,n)},l.warn=function(t,e,n){void 0===n&&(n={}),r.default.alert('<i class="ico-warn"></i><span>'+t+"</span>",e,n)},l.danger=function(t,e,n){void 0===n&&(n={}),r.default.confirm('<i class="ico-warn"></i><span>'+t+"</span>",e,n)};var c=$({});l.listen=function(){c.on.apply(c,arguments)},l.dispatch=function(){c.trigger.apply(c,arguments)},l.unListen=function(){c.off.apply(c,arguments)},l.wrapPanel=a.default.wrapPanel,window.opg=l,e.default=l});
;/*!ts/ui/Sp.ts*/
define("ts/ui/Sp.ts",function(t,e){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=t("ts/ui/DisplayOject.ts"),r={text:"default string"},i=function(t){function e(e,n){var o=this;return n=$.extend({},r,n),o=t.call(this,e,n)||this}return n(e,t),e.prototype.bindData=function(t){this.jq.text(t.text),this.data=t},e}(o.AjaxDisplayObject);e.default=i});
;/*!ts/util/Dictionary.ts*/
define("ts/util/Dictionary.ts",function(){!function(){function t(t){this._keys=[],this._values=[];for(var e=0;e<t.length;e++)this[t[e].key]=t[e].value,this._keys.push(t[e].key),this._values.push(t[e].value)}return t.prototype.add=function(t,e){this[t]=e,this._keys.push(t),this._values.push(e)},t.prototype.remove=function(t){var e=this._keys.indexOf(t,0);this._keys.splice(e,1),this._values.splice(e,1),delete this[t]},t.prototype.keys=function(){return this._keys},t.prototype.values=function(){return this._values},t.prototype.containsKey=function(t){return!("undefined"==typeof this[t])},t}()});