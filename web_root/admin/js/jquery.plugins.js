!function(e){var t={};t.isset=function(e){return!!e},t.empty=function(e){return e?0==String(e).replace(/\s+/g,"").length:!0},t.require=function(e){return e?!t.empty(e):!1},t.email=function(e){return/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i.test(e)},t.url=function(e){return/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?/i.test(e)},t.date=function(e,t){e=e.replace(/-/g,"/");var n=Date.parse(e);if(isFinite(n))return!0;if(t){var r=new Date;return e=e.replace(/\d{4}/,r.getFullYear()),n=Date.parse(e),isFinite(n)}return!1},t.time=function(e){var t=new RegExp("^/[0-2]{1}/[0-6]{1}:/[0-5]{1}/[0-9]{1}:/[0-5]{1}/[0-9]{1}");return t.test(e)},t.time12=function(e){return/^(1[0-2]|0?[1-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(e)},t.time24=function(e){return/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(e)},t.zip=function(e,t){var n=t?/^\d{5}-\d{4}$/:/^\d{5}$/;return n.test(e)},t.phone=function(e){return/^\(?([0-9]{3})\)?[-.\s]?([0-9]{3})[-.\s]?([0-9]{4})$/.test(e)},t.integer=function(e){return/^\-?\d+$/.test(e)},t.numeric=function(e){return/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},t.ip=function(e){return/^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})$/.test(e)},t.alpha=function(e){return/^[a-z]$/i.test(e)},t.alphaNumeric=function(e){return/^[a-z0-9]$/i.test(e)},t.lowercase=function(e){return e.toLowerCase()==e},t.uppercase=function(e){return e.toUpperCase()==e},t.minlength=function(e,t){return e.length>=t},t.maxlength=function(e,t){return e.length<=t},t.between=function(e,t,n){return e.length>=t&&e.length<=n},t.ns=function(e){return/[`~!@#$%\^&\*\+=\{\};"'<>\?,\.]/gim.test(e)},t.password=function(e){var t="";return e.length<8||e.length>15?t="密码长度需要8～15位":/(?=.*[A-Z])(?=.*[a-z])(?=.*\d)/.test(e)||(t="密码需要由大小写字母与数字混合"),t},e.fn.syncCheckBoxGroup=function(t,n){var r=this,i=e(n||document);return i.on("change",t,function(){var n=e(t,i);r.prop("checked",n.filter(":checked").length===n.length)}),r.on("change",function(){e(t,i).prop("checked",this.checked)}),this},e.fn.checkBoxAll=function(t,n){var r=this,i=e(n||document);return i.on("change",t,function(){if(r.prop("checked")){var n=e(t,i);r.prop("checked",n.filter(":checked").length===n.length)}}),r.on("change",function(){e(t,i).prop("checked",this.checked)}),this},e.fn.iptError=function(e){var t=this,n=e;return this.addClass("error").one("focus",function(){t.removeClass("error")}),"string"==typeof e&&(n=function(t){opg.warn(e,function(){t.focus()})}),"function"==typeof n&&n.call(this,this),this},e.fn.fieldsToJson=function(n){var r,i,a={};if(i="FORM"!==this[0].tagName?e(":input",this):this,r=i.serializeArray(),e.each(r,function(){var t=this.name.indexOf("[]"),n=!(-1===t),r=n?this.name.substr(0,t):this.name,o=e.trim(this.value+"")||"";"number"===i.find('[name="'+this.name+'"]').eq(0).attr("type")&&(o=+o),a[r]?(a[r].push||(a[r]=[a[r]]),a[r].push(o)):n?(a[r]=[],a[r][0]=o):a[r]=o}),i=null,n)for(var o in n)if(n.hasOwnProperty(o)){var u=n[o];if(u.maxLength&&!t.maxlength(a[o],u.maxLength))return void e("[name="+o+"]",this).iptError(u.name+"长度不可超过"+u.maxLength+"字");if(u.minLength&&!t.minlength(a[o],u.minLength))return void e("[name="+o+"]",this).iptError(u.name+"长度不可少于"+u.maxLength+"字");if(u.require&&t.empty(a[o]))return void e("[name="+o+"]",this).iptError(u.name+"不可为空");if("ns"===u.type&&t.ns(a[o]))return void e("[name="+o+"]",this).iptError(u.name+"不可含特殊字符");if("password"===u.type){var s=t.password(a[o]);if(s)return void e("[name="+o+"]",this).iptError(s)}else if("int"===u.type){if(a[o]){if(!t.integer(a[o]))return void e("[name="+o+"]",this).iptError(u.name+"应该是整数");a[o]=+a[o]}}else if("number"===u.type){if(a[o]){if(!t.numeric(a[o]))return void e("[name="+o+"]",this).iptError(u.name+"应该是数字");a[o]=+a[o]}}else if("number[]"===u.type){if(a[o]&&a[o].length&&a[o].push)for(var c=a[o],f=c.length;f--;)c[f]=+c[f]}else if("date"===u.type){if(a[o]&&!t.date(a[o]))return void e("[name="+o+"]",this).iptError(u.name+"不是合法的日期格式")}else if("time"===u.type&&a[o]&&!t.time24(a[o]))return void e("[name="+o+"]",this).iptError(u.name+"不是合法的时间格式")}return a},e.fn.recheckElement=function(t){var n,r,i,a=e.isArray(t)?t:[t];"select"==this.prop("tagName").toLowerCase()?(n=this[0].options,r="select-multiple"!=this.attr("type"),i=!0):(n=this,r="radio"==this.attr("type"),i=!1);var o,u,s;e:for(var c=0,f=n.length;f>c;c++){o=n[c],s=!1,u=o.value;t:for(var h=0,l=a.length;l>h;h++)if(u==a[h]){if(r){i?o.selected=!0:o.checked=!0;break e}s=!0;break t}i?o.selected=s:o.checked=s}return this},e.fn.jsonToFields=function(t){return this.find("input,select,textarea").each(function(n,r){if(!r.name){if(!r.id)return;this.name=this.id}var i=r.name.split("[]")[0],a=t[i];if("checkbox"==r.type||"radio"==r.type){for(var o=e.isArray(a)?a:[a],u=0;u<o.length;u++)if(o[u]==r.value){r.checked=!0;break}}else-1!=r.type.indexOf("select-")?e(r).recheckElement(a+""):"textarea"==r.tagName.toLowerCase()?e(r).val(a):r.value=a||""}),this},e.fn.decimalMask=function(t){function n(t){var n=e(t.currentTarget);n.val()!==t.data.ov&&(c.test(n.val())||n.val(t.data.ov),t.data.ov=n.val())}t&&t.match||(t="9999999999");var r,i=/^-/.test(t)?"(-)?":"",a=function(){return r=t.match(/[0-9]{1,}/),null!==r?r[0].length:0}(),o=function(){return r=t.match(/[0-9]{1,}$/),null!==r?r[0].length:0}(),u=function(){return r=t.match(/,|\./),null!==r?r[0]:null}(),s=/.*MSIE 8.*|.*MSIE 7.*|.*MSIE 6.*|.*MSIE 5.*/.test(navigator.userAgent)?"keyup propertychange paste":"input paste",c=new RegExp(null===u?"^"+i+"[0-9]{0,"+a+"}$":"^"+i+"[0-9]{0,"+a+"}"+("."===u?"\\.":",")+"[0-9]{0,"+o+"}$|^"+i+"[0-9]{0,"+a+"}"+("."===u?"\\.":",")+"$|^"+i+"[0-9]{0,"+a+"}$");return this.each(function(){e(this).attr("maxlength",a+o+(null===u?0:1)+(""===i?0:1)).val(e(this).val()?e(this).val().replace(".",u):e(this).val()).on(s,{ov:e(this).val()},n)})};var n={m_Count:0,make:function(e){var t=e.template,n={name:t},r=e.nullShown||"",i=t.match(/\${\w+(:=)+\w+}/g),a='row[":index"]=i;';if(i)for(var o,u,s,c=0;c<i.length;c++)o=i[c].substr(2,i[c].length-3),u=o.indexOf(":="),s=o.substr(0,u),a+="row['"+o+"']=scope['"+o.substr(u+2)+"'](row['"+s+"'] , i , row ,'"+s+"') ;";var f=/\${(\w*[:]*[=]*\w+)\}(?!})/g,h=t.replace(f,function(e,t){return"'+((row['"+t+"']===null||row['"+t+"']===undefined||Infinity===row['"+t+"'])?'"+r+"':row['"+t+"'])+'"});return a+="var out='"+h+"';return out;",n.render=new Function("row","i","scope",a),e.mode&&(n.mode=e.mode),e.itemRender&&(n.itemRender=e.itemRender),e.itemFilter&&(n.itemFilter=e.itemFilter),e.onBound&&(n.onBound=e.onBound),n.joiner=e.joiner||"",n.storeData=!!e.storeData,n},newId:function(){return"_Object__id"+this.m_Count++},remove:function(e){delete this[e]}};e.fn.bindList=function(e){var t,r,i,a,o,u,s,c=this[0],f=c.id||c.uniqueID||function(){return c.id=n.newId(),c.id}(),h=n[f]||{};e.push&&e.slice?(r=e,i=h.itemRender,a=h.itemFilter,o=h.mode,u=h.storeData):(t=e.template,void 0!==t&&h.name!=t&&(h=n.make(e),n[f]=h),r=e.list,r&&r.length||(r=[]),i=e.itemRender||h.itemRender,a=e.itemFilter||h.itemFilter,o=e.mode||h.mode,u=!!e.storeData);var l,d=i||e.renderScope||window,m=[],p=0,v=0,g="function"==typeof a;for(u&&(s=[]);l=r[p];)g&&(l=a(l,p)),l&&(l[":rowNum"]=++v,m[p]=h.render(l,p,d),u&&s.push(l)),++p;return this[o||"html"](m.join(h.joiner)),"function"==typeof h.onBound&&h.onBound.call(this,r,e),u&&this.data("bound-array",s),this},e.detectIE=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var n=e.indexOf("Trident/");if(n>0){var r=e.indexOf("rv:");return parseInt(e.substring(r+3,e.indexOf(".",r)),10)}var i=e.indexOf("Edge/");return i>0?parseInt(e.substring(i+5,e.indexOf(".",i)),10):0}}(jQuery);