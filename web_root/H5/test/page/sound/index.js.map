{
    "version": 3,
    "file": "index.js",
    "sourceRoot": "",
    "sources": [
        "/page/sound/index.ts"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "import Shape = createjs.Shape;\r\n\r\nclass Main {\r\n\tprivate stage: createjs.Stage;\r\n\tprivate ratio: number;\r\n\tprivate preLoader: createjs.LoadQueue;\r\n\tprivate progressBar :ProgressBar;\r\n\r\n\r\n\tconstructor(canvas: HTMLCanvasElement, draftWidth?: number = 750) {\r\n\t\tthis.initStage(canvas, draftWidth);\r\n\t\tthis.loadSound();\r\n\t}\r\n\r\n\tprivate loadSound() {\r\n\t\tthis.preLoader = new createjs.LoadQueue();\r\n\t\tthis.preLoader.installPlugin(createjs.Sound);\r\n\t\t//createjs.Sound.alternateExtensions = ['mp3'];\r\n\r\n\r\n\t\t///\r\n\t\tthis.progressBar = new ProgressBar();\r\n\t\tthis.stage.addChild(this.progressBar);\r\n\t\tthis.preLoader.addEventListener('progress',  (event: createjs.ProgressEvent) => {\r\n\t\t\tthis.progressBar.progress = event.progress ;\r\n\t\t});\r\n\t\tthis.preLoader.addEventListener('complete', (e: createjs.ProgressEvent) => this.playSound(e));\r\n\r\n\r\n\t\t// OR\r\n\t\tthis.preLoader.loadManifest([\r\n\t\t\t{id: 'myImage1', src: 'assets/image/1.jpg'},\r\n\t\t\t{id: 'myImage2', src: 'assets/image/2.png'},\r\n\t\t\t{id: 'mySound', src: 'assets/sound/魔法2.mp3'},\r\n\t\t\t{id: 'mySound', src: 'assets/sound/魔法5.mp3'},\r\n\t\t]);\r\n\r\n\r\n\t}\r\n\r\n\tprivate playSound(event: createjs.ProgressEvent) {\r\n\t\tthis.progressBar.progress = 1 ;\r\n\r\n\t\tlet btn = document.getElementById('btnPlay');\r\n\t\tconsole.log(btn);\r\n\t\tconsole.log('loaded:', event);\r\n\t\tbtn.removeAttribute('disabled');\r\n\t\tbtn.addEventListener('click', function () {\r\n\t\t\tcreatejs.Sound.play('mySound');\r\n\t\t});\r\n\r\n\t\tlet a = <HTMLImageElement> this.preLoader.getResult('myImage1');\r\n\t\tlet b: createjs.Bitmap = new createjs.Bitmap(a);\r\n\t\tb.scaleY = b.scaleX = 750 / a.width;\r\n\t\tconsole.log('img:', a, b.getBounds().width);\r\n\t\t/*let s = new createjs.Shape();\r\n\t\tlet g = s.graphics;\r\n\t\tg.beginBitmapFill(b);*/\r\n\r\n\t\tthis.stage.addChildAt(b , 0);\r\n\t}\r\n\r\n\tprivate initStage(canvas: HTMLCanvasElement, draftWidth: number) {\r\n\t\tlet w = document.body.clientWidth;\r\n\t\tlet h = document.body.clientHeight;\r\n\r\n\t\tcanvas.style.background = '#000';\r\n\t\tcanvas.width = w;\r\n\t\tcanvas.height = h;\r\n\r\n\t\tlet stageScale = w / draftWidth; //宽度自适应；\r\n\t\tthis.ratio = draftWidth / w;\r\n\t\t//let stageScale = h/1206; //高度自适应两者选一\r\n\t\tthis.stage = new createjs.Stage(canvas);\r\n\t\tthis.stage.scaleX = stageScale;\r\n\t\tthis.stage.scaleY = stageScale;\r\n\r\n\t\tthis.stage.setBounds(0, 0, w * this.ratio, h * this.ratio);\r\n\r\n\t\tcreatejs.Ticker.framerate = 30;\r\n\t\tcreatejs.Ticker.timingMode = createjs.Ticker.RAF;\r\n\r\n\t\tcreatejs.Ticker.addEventListener('tick', (e: createjs.TickerEvent) => this.tick(e));\r\n\r\n\r\n\t\tif (createjs.Touch.isSupported()) {\r\n\t\t\tcreatejs.Touch.enable(this.stage);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate tick(e: createjs.TickerEvent) {\r\n\t\tthis.stage.update();\r\n\t}\r\n}\r\n\r\n\r\n//\r\nfunction run() {\r\n\twindow.removeEventListener('load', run);\r\n\tnew Main(<HTMLCanvasElement> document.getElementById('gameCanvas'));\r\n}\r\n\r\nwindow.addEventListener('load', run);"
    ]
}