function zid(e){return z_d("1"),document.getElementById(e)}function zss(e){return z_d("2"),document.getElementById(e)?document.getElementById(e).style:void(zon&&zog("zim wrap - zss(): id not found"))}function zgo(e,t,o,n,i,r){if(z_d("3"),!(zot(t)&&""!=t||"_self"==t)){var a="";return o&&(a+="width="+o+","),n&&(a+="height="+n+","),i&&(a+="fullscreen=yes,"),r&&(a+="modal=yes,alwaysRaised=yes"),window.open(e,t,a)}window.location.href=e}function zum(e){return z_d("4"),zot(e)?void 0:Number(String(e).replace(/[^\d\.\-]/g,""))}function zot(e){return null==e}function zop(e){z_d("5"),zot(e)||(e.stopImmediatePropagation&&e.stopImmediatePropagation(),window.event&&(window.event.cancelBubble=!0))}function zil(){z_d("6");var e=function(e){e||(e=event),e.keyCode&&e.keyCode>=32&&e.keyCode<=40&&e.preventDefault()},t=function(e){e||(e=event),e.preventDefault()},o=t;return window.addEventListener("keydown",e),window.addEventListener("mousewheel",t),window.addEventListener("DOMMouseScroll",o),[e,t,o]}function zet(e){function t(){var t=this;this.on=function(o,n){if(!(zot(e)||zot(o)||zot(n)))for(var i=t.tags,r=0;r<i.length;r++)i[r].addEventListener(o,n)},this.off=function(o,n){if(!(zot(e)||zot(o)||zot(n)))for(var i=t.tags,r=0;r<i.length;r++)i[r].removeEventListener(o,n)},Object.defineProperty(t,"tags",{get:function(){return zot(e)?[]:"string"==typeof e||e instanceof String?document.querySelectorAll(e):"string"==typeof e.innerHTML?[e]:[]},set:function(){}}),this.css=function(e,o){for(var n=t.tags,i=0;i<n.length;i++)if(1==arguments.length&&arguments[0].constructor==={}.constructor)for(var r in e)n[i].style[r]=e[r];else{if(1==arguments.length)return t.tags[0].style[e];n[i].style[e]=o}},this.prop=function(e,o){if(!zot(e)){for(var n=t.tags,i=[],r=0;r<n.length;r++)if(zot(o))if(e.constructor==={}.constructor)for(var a in e)n[r][a]=e[a];else i.push(n[r][e]);else n[r][e]=o;return zot(o)?i:void 0}}}return z_d("6.1"),new t}function isDUO(e){return 1==e.length&&e[0].constructor==={}.constructor}function zob(e,t,o,n){if(isDUO(t)){z_d("7");var i,r,a=t[0],s=zot(o)?e.toString().split(/\n/,1)[0].match(/\((.*)\)/)[1].replace(/\s+/g,"").split(","):o.replace(/\s+/g,"").split(","),l=[];for(i=0;i<s.length;i++)r=s[i].split("=")[0],s[i]=r,l.push(a[r]);for(i in a)s.indexOf(i)<0&&zon&&zog(e,"bad argument "+i);var d;return(d=e.prototype.isPrototypeOf(n)?new(e.bind.apply(e,[null].concat(l))):e.apply(null,l))?d:!0}}function zik(e){if(z_d("7.5"),!zot(e)){if(e.constructor==={}.constructor||Array.isArray(e)||"function"==typeof e){if(Array.isArray(e)){var t=e[Math.floor(Math.random()*e.length)];return zik(t)}if(e.constructor==={}.constructor){if(!zot(e.noZik))return e.noZik;if(zot(e.max))return e;zot(e.integer)&&(e.integer=!1);var t=zim.rand(e.min,e.max,e.integer,e.negative);return t}if("function"==typeof e)return zik(e())}return e}}function z_d(e){zim&&zim.DISTILL&&zim.distillery.push(e)}function zimify(e,t){z_d("83.3");var o={drag:function(e,t,o,n,i,r,a,s,l,d,c,u,h){return isDUO(arguments)?(arguments[0].obj=this,zim.drag(arguments[0])):zim.drag(this,e,t,o,n,i,r,a,s,l,d,c,u,h)},noDrag:function(){return zim.noDrag(this)},dragRect:function(e){return zim.dragRect(this,e)},setSwipe:function(e){return zim.setSwipe(this,e)},gesture:function(e,t,o,n,i,r,a,s,l){return isDUO(arguments)?(arguments[0].obj=this,zim.gesture(arguments[0])):zim.gesture(this,e,t,o,n,i,r,a,s,l)},noGesture:function(e,t,o){return isDUO(arguments)?(arguments[0].obj=this,zim.noGesture(arguments[0])):void zim.noGesture(this,e,t,o)},gestureRect:function(e){return zim.gestureRect(this,e)},hitTestPoint:function(e,t){return zim.hitTestPoint(this,e,t)},hitTestReg:function(e){return zim.hitTestReg(this,e)},hitTestRect:function(e,t){return zim.hitTestRect(this,e,t)},hitTestCircle:function(e,t){return zim.hitTestCircle(this,e,t)},hitTestBounds:function(e,t){return zim.hitTestBounds(this,e,t)},boundsToGlobal:function(e,t){return zim.boundsToGlobal(this,e,t)},hitTestGrid:function(e,t,o,n,i,r,a,s,l,d,c,u){return zim.hitTestGrid(this,e,t,o,n,i,r,a,s,l,d,c,u)},move:function(e,t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b,y,w,x,C,T,k,j,M,S,A,E){return isDUO(arguments)?(arguments[0].target=this,zim.move(arguments[0])):zim.move(this,e,t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b,y,w,x,C,T,k,j,M,S,A,E)},animate:function(e,t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b,y,w,x,C,T,k,j,M,S,A,E){return isDUO(arguments)?(arguments[0].target=this,zim.animate(arguments[0])):zim.animate(this,e,t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b,y,w,x,C,T,k,j,M,S,A,E)},pauseZimAnimate:function(){},stopZimAnimate:function(){},wiggle:function(e,t,o,n,i,r,a,s,l,d){return isDUO(arguments)?(arguments[0].target=this,zim.wiggle(arguments[0])):zim.wiggle(this,e,t,o,n,i,r,a,s,l,d)},loop:function(e,t,o,n,i){return zim.loop(this,e,t,o,n,i)},copyMatrix:function(e){return zim.copyMatrix(this,e)},pos:function(e,t){return zim.pos(this,e,t)},mov:function(e,t){return zim.mov(this,e,t)},alp:function(e){return zim.alp(this,e)},rot:function(e){return zim.rot(this,e)},siz:function(e,t,o){return zim.siz(this,e,t,o)},ske:function(e,t){return zim.ske(this,e,t)},reg:function(e,t){return zim.reg(this,e,t)},sca:function(e,t){return zim.sca(this,e,t)},scaleTo:function(e,t,o,n,i){return isDUO(arguments)?(arguments[0].obj=this,zim.scaleTo(arguments[0])):zim.scaleTo(this,e,t,o,n,i)},fit:function(e,t,o,n,i){return isDUO(arguments)?(arguments[0].obj=this,zim.fit(arguments[0])):zim.fit(this,e,t,o,n,i)},outline:function(e,t){return isDUO(arguments)?(arguments[0].obj=this,zim.outline(arguments[0])):zim.outline(this,e,t)},addTo:function(e,t){return zim.addTo(this,e,t)},removeFrom:function(e){return zim.removeFrom(this,e)},added:function(e,t,o){return zim.added(this,e,t,o)},centerReg:function(e,t,o){return isDUO(arguments)?(arguments[0].obj=this,zim.centerReg(arguments[0])):zim.centerReg(this,e,t,o)},center:function(e,t,o){return isDUO(arguments)?(arguments[0].obj=this,zim.center(arguments[0])):zim.center(this,e,t,o)},place:function(e){return zim.place(this,e)},placeReg:function(e){return zim.placeReg(this,e)},expand:function(e,t){return zim.expand(this,e,t)},setMask:function(e){return zim.setMask(this,e)},cloneProps:function(e){return e.alpha=this.alpha,e.rotation=this.rotation,e.mouseEnabled=this.mouseEnabled,e.tickEnabled=this.tickEnabled,e.name=this.name,e.regX=this.regX,e.regY=this.regY,e.visible=this.visible,e.shadow=this.shadow,zim.copyMatrix(e,this),e.compositeOperation=this.compositeOperation,e.snapToPixel=this.snapToPixel,e.filters=null==this.filters?null:this.filters.slice(0),e.mask=this.mask,e.hitArea=this.hitArea,e.cursor=this.cursor,e._bounds=this._bounds,e},cloneChildren:function(e){e.children.length&&e.removeAllChildren();for(var t=e.children,o=0,n=this.children.length;n>o;o++){var i=this.children[o].clone();i.parent=e,t.push(i)}return e}};if(!zot(t)){var t=[];for(var n in o)t.push(n);return t}for(var i in o)o.hasOwnProperty(i)&&(e[i]=o[i]);return Object.defineProperty(e,"width",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:e.width*this.scaleX},set:function(e){var t=this.getBounds();if(zot(t)||0==t.width)return void zog("width needs bounds set with setBounds()");var o=e/t.width;this.scaleX=this.scaleY=o}}),Object.defineProperty(e,"height",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:e.height*this.scaleY},set:function(e){var t=this.getBounds();if(zot(t)||0==t.height)return void zog("height needs bounds set with setBounds()");var o=e/t.height;this.scaleX=this.scaleY=o}}),Object.defineProperty(e,"widthOnly",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:e.width*this.scaleX},set:function(e){var t=this.getBounds();if(zot(t)||0==t.width)return void zog("widthOnly needs bounds set with setBounds()");var o=e/t.width;this.scaleX=o}}),Object.defineProperty(e,"heightOnly",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:e.height*this.scaleY},set:function(e){var t=this.getBounds();if(zot(t)||0==t.height)return void zog("heightOnly needs bounds set with setBounds()");var o=e/t.height;this.scaleY=o}}),Object.defineProperty(e,"blendMode",{enumerable:!0,get:function(){return this.compositeOperation},set:function(e){this.compositeOperation=e}}),e}function zimplify(e){z_d("83.35"),zot(e)&&(e=[]),Array.isArray(e)||(e=[e]);var t=zimify(null,!0),o=["loop","stopZimAnimate","pauseZimAnimate","animate"];for(var n in zim)(-1==t.indexOf(n)||o.indexOf(n)>=0)&&-1==e.indexOf(n)&&(window[n]=zim[n])}"undefined"==typeof zon&&(zon=!1);var zog=console.log.bind(console),zim=function(e){function t(e,t){t?(e.mouseChildren=!0,e.mouseEnabled=!0,e._enabled=!0):(e.mouseChildren=!1,e.mouseEnabled=!1,e._enabled=!1)}if(e.shuffle=function(e){if(z_d("8"),!zot(e)){var t,o,n=e.length;if(0==n)return e;for(;--n;)t=Math.floor(Math.random()*(n+1)),o=e[n],e[n]=e[t],e[t]=o;return e}},e.rand=function(e,t,o,n){if(z_d("9"),zot(e)&&zot(t))return Math.random();(zot(e)||isNaN(e))&&(e=0),(zot(t)||isNaN(t))&&(t=0),(e%1!=0||t%1!=0)&&(o=!1),zot(o)&&(o=!0),n&&Math.random()>.5&&(e*=-1,t*=-1),o&&(e>t?e++:t>e&&t++);var i;return 0==e&&0==t?0:(i=0==t?Math.random()*e:Math.min(e,t)+Math.random()*(Math.max(e,t)-Math.min(e,t)),o?Math.floor(i):i)},e.loop=function(t,o,n,i,r,a){function s(e){return zot(r)&&(r=n?e:0),zot(a)&&(a=n?0:e),n&&a>r||!n&&r>a?0:0>(0>r&&a)||r>e&&a>e?0:(r=Math.max(0,Math.min(r,e)),a=Math.max(0,Math.min(a,e)),Math.floor((n?r-a:a-r)/i)+1)}var l,d="obj, call, reverse, step, start, end";if(l=zob(e.loop,arguments,d))return l;if(z_d("9.5"),zot(t)||zot(o))return void 0;zot(n)&&(n=!1),(zot(i)||0>=i)&&(i=1);var c="number"==typeof t?"number":t.constructor===Array?"array":t.constructor==={}.constructor?"object":"invalid";if("invalid"==c)return void 0;if("number"==c||"array"==c){var u="number"==c?t:t.length,h=s(u-1);if(0==h)return;if(n)for(var f=r;f>=a;f-=i){if("number"==c)var p=o(f,h,r,a,t);else var p=o(t[f],f,h,r,a,t);if("undefined"!=typeof p)return p}else for(var f=r;a>=f;f+=i){if("number"==c)var p=o(f,h,r,a,t);else var p=o(t[f],f,h,r,a,t);if("undefined"!=typeof p)return p}}else if("object"==c){var u=0,m=[];for(var f in t)u++,m.push(f);var h=s(u-1);if(0==h)return;if(n)for(var f=r;f>=a;f-=i){var p=o(m[f],t[m[f]],f,h,r,a,t);if("undefined"!=typeof p)return p}else for(var f=r;a>=f;f+=i){var p=o(m[f],t[m[f]],f,h,r,a,t);if("undefined"!=typeof p)return p}}},e.timeout=function(e,t){function o(){var r=Date.now();return n.time+=r-i,i=r,n.time>=e?(t(n),void n.clear()):void(n.rid=requestAnimationFrame(o))}if(z_d("9.7"),!zot(t)&&"function"==typeof t){zot(e)&&(e=1e3),e=zik(e);var n={startTime:Date.now(),time:0,paused:!1},i=n.startTime;return n.pause=function(e){zot(e)&&(e=!0),e?cancelAnimationFrame(n.rid):(i=Date.now(),o()),n.paused=e},n.clear=function(){n&&cancelAnimationFrame(n.rid);for(var e in n)delete n[e];n.pause=function(){},n.clear=function(){}},o(),n}},e.interval=function(e,t,o,n){function i(){a.startTime=Date.now(),a.interval=zik(a.time),a.id=setTimeout(function(){a.paused||a.active&&(a.rid=requestAnimationFrame(i),a.count++,t(a),r())},a.interval)}function r(){-1!=o&&a.count>=(n?a.total-1:a.total)&&a.clear()}if(z_d("9.8"),!zot(t)&&"function"==typeof t&&(zot(e)&&(e=1e3),zot(n)&&(n=!1),zot(o)||!(isNaN(o)||0>=o))){zot(o)&&(o=-1);var a={count:0,total:o,paused:!1,time:e,active:!0};n&&setTimeout(function(){t(a),r()},10);var s;return a.pause=function(e,o){zot(e)&&(e=!0),e?(clearTimeout(s),clearTimeout(a.id),cancelAnimationFrame(a.rid),a.pauseTimeLeft=a.interval-(Date.now()-a.startTime)):(s=setTimeout(function(){a.count++,t(a),i(),r()},o?0:a.pauseTimeLeft),a.pauseTimeLeft=null),a.paused=e},a.clear=function(){a.active=!1,clearTimeout(s),cancelAnimationFrame(a.rid),clearTimeout(a.id);var e=a.count;for(var t in a)delete a[t];a.active=!1,a.count=e,a.pause=function(){},a.clear=function(){}},i(),a}},e.copy=function(t,o){if(z_d("10"),zot(o)&&(o=!1),null==t||!(t instanceof Array||t.constructor=={}.constructor))return o&&t.clone?t.clone():t;if(t instanceof Array){for(var n=[],i=0;i<t.length;i++)n[i]=e.copy(t[i],o);return n}if(t.constructor=={}.constructor){var r={};for(var a in t){var s=e.copy(t[a],o);t.hasOwnProperty(a)&&(r[a]=s)}return r}},e.arraysEqual=function(t,o,n){if(z_d("11"),zot(t)||zot(o))return!1;if(zot(n)&&(n=!0),t.length!=o.length)return!1;for(var i=0;i<t.length;i++)if(t[i]instanceof Array&&o[i]instanceof Array){if(!e.arraysEqual(t[i],o[i],n))return!1}else{if(n&&t[i]!=o[i])return!1;if(!n)return e.arraysEqual(t.sort(),o.sort(),!0)}return!0},e.isEmpty=function(e){if(z_d("11.5"),!zot(e)){var t=0;for(var o in e){t++;break}return 0==t}},e.merge=function(){z_d("12");var e,t,o={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&(o[t]=arguments[e][t]);return o},e.zut=function(e){return zot(e)||"object"==typeof e?!0:void 0},e.decimals=function(t,o,n,i,r,a,s){if(z_d("13"),zot(t))return 0;zot(o)&&(o=1),zot(n)&&(n=0),zot(i)&&(i=0),zot(i)&&(i=0),zot(r)&&(r=!0),zot(a)&&(a=!1);var l=Math.round(t*Math.pow(10,o))/Math.pow(10,o),d=e.sign(l);if(n>0){var c=String(l).indexOf("."),u=String(l).length;0>c&&(c=u++,l+=".");for(var h=0;n-(u-c-1)>h;h++)l+="0"}if(i>0){-1==d&&(l=l.substr(1,l.length-1));for(var c=String(l).indexOf("."),u=String(l).length,f=0>c?u:c,h=0;i-f>h;h++)l="0"+l;-1==d&&(l="-"+l)}return n+i>0&&!r&&0==Number(l)&&(l=0),a&&(l=String(l).replace(".",":")),e.zut(s)?l:null},e.sign=function(e){return z_d("13.1"),e?0>e?-1:1:0},e.constrain=function(e,t,o,n){return z_d("13.2"),zot(e)?void 0:(zot(t)&&(t=0),zot(o)&&(o=Number.MAX_VALUE),t>o&&(max2=t,o=t,t=max2),zot(n)&&(n=!1),n&&0>e?Math.max(-o,Math.min(e,-t)):Math.max(t,Math.min(e,o)))},e.dist=function(e,t,o,n){return z_d("13.3"),zot(e)||zot(t)?void 0:(zot(o)&&(o=0),zot(n)&&(n=0),Math.sqrt(Math.pow(o-e,2)+Math.pow(n-t,2)))},e.angle=function(e,t,o,n){return z_d("13.4"),zot(e)||zot(t)?void 0:(zot(o)&&(o=e,e=0),zot(n)&&(n=t,t=0),(180*Math.atan2(n-t,o-e)/Math.PI+360)%360)},e.makeID=function(e,t,o){z_d("13.5"),zot(e)&&(e="mixed"),zot(t)&&(t=5),zot(o)&&(o="uppercase");var n,i=[2,3,4,5,6,7,8,9],r="abcdefghjkmnpqrstuvwxyz".split("");n=e.constructor===Array?e:"numbers"==e?i:"letters"==e?r:i.concat(r);for(var a,s,l="",d=0;t>d;d++)a=n[Math.floor(Math.random()*t)],s=Math.random(),"uppercase"==o||"mixed"==o&&s>.5?a.toUpperCase&&(a=a.toUpperCase()):a.toLowerCase&&(a=a.toLowerCase()),l+=String(a);return l},e.smoothStep=function(t,o,n){z_d("13.7");var i=e.constrain((n-t)/(o-t),0,1);return i*i*i*(i*(6*i-15)+10)},e.Noise=function(e){"use strict";function t(e){var t=new Uint32Array(1);return t[0]=1664525*e[0]+1013904223,t}function o(e,t,o){this.dx=-t-e*s.SQUISH_2D,this.dy=-o-e*s.SQUISH_2D,this.xsb=t,this.ysb=o}function n(e,t,o,n){this.dx=-t-e*s.SQUISH_3D,this.dy=-o-e*s.SQUISH_3D,this.dz=-n-e*s.SQUISH_3D,this.xsb=t,this.ysb=o,this.zsb=n}function i(e,t,o,n,i){this.dx=-t-e*s.SQUISH_4D,this.dy=-o-e*s.SQUISH_4D,this.dz=-n-e*s.SQUISH_4D,this.dw=-i-e*s.SQUISH_4D,this.xsb=t,this.ysb=o,this.zsb=n,this.wsb=i}z_d("13.9"),zot(e)&&(e=1e6*Math.random());var r=e;this.seed=e;var a=this,s={};s.NORM_2D=1/47,s.NORM_3D=1/103,s.NORM_4D=1/30,s.SQUISH_2D=(Math.sqrt(3)-1)/2,s.SQUISH_3D=(Math.sqrt(4)-1)/3,s.SQUISH_4D=(Math.sqrt(5)-1)/4,s.STRETCH_2D=(1/Math.sqrt(3)-1)/2,s.STRETCH_3D=(1/Math.sqrt(4)-1)/3,s.STRETCH_4D=(1/Math.sqrt(5)-1)/4,s.base2D=[[1,1,0,1,0,1,0,0,0],[1,1,0,1,0,1,2,1,1]],s.base3D=[[0,0,0,0,1,1,0,0,1,0,1,0,1,0,0,1],[2,1,1,0,2,1,0,1,2,0,1,1,3,1,1,1],[1,1,0,0,1,0,1,0,1,0,0,1,2,1,1,0,2,1,0,1,2,0,1,1]],s.base4D=[[0,0,0,0,0,1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,4,1,1,1,1],[1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1]],s.gradients2D=[5,2,2,5,-5,2,-2,5,5,-2,2,-5,-5,-2,-2,-5],s.gradients3D=[-11,4,4,-4,11,4,-4,4,11,11,4,4,4,11,4,4,4,11,-11,-4,4,-4,-11,4,-4,-4,11,11,-4,4,4,-11,4,4,-4,11,-11,4,-4,-4,11,-4,-4,4,-11,11,4,-4,4,11,-4,4,4,-11,-11,-4,-4,-4,-11,-4,-4,-4,-11,11,-4,-4,4,-11,-4,4,-4,-11],s.gradients4D=[3,1,1,1,1,3,1,1,1,1,3,1,1,1,1,3,-3,1,1,1,-1,3,1,1,-1,1,3,1,-1,1,1,3,3,-1,1,1,1,-3,1,1,1,-1,3,1,1,-1,1,3,-3,-1,1,1,-1,-3,1,1,-1,-1,3,1,-1,-1,1,3,3,1,-1,1,1,3,-1,1,1,1,-3,1,1,1,-1,3,-3,1,-1,1,-1,3,-1,1,-1,1,-3,1,-1,1,-1,3,3,-1,-1,1,1,-3,-1,1,1,-1,-3,1,1,-1,-1,3,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,3,1,1,-1,1,3,1,-1,1,1,3,-1,1,1,1,-3,-3,1,1,-1,-1,3,1,-1,-1,1,3,-1,-1,1,1,-3,3,-1,1,-1,1,-3,1,-1,1,-1,3,-1,1,-1,1,-3,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,3,1,-1,-1,1,3,-1,-1,1,1,-3,-1,1,1,-1,-3,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3],s.lookupPairs2D=[0,1,1,0,4,1,17,0,20,2,21,2,22,5,23,5,26,4,39,3,42,4,43,3],s.lookupPairs3D=[0,2,1,1,2,2,5,1,6,0,7,0,32,2,34,2,129,1,133,1,160,5,161,5,518,0,519,0,546,4,550,4,645,3,647,3,672,5,673,5,674,4,677,3,678,4,679,3,680,13,681,13,682,12,685,14,686,12,687,14,712,20,714,18,809,21,813,23,840,20,841,21,1198,19,1199,22,1226,18,1230,19,1325,23,1327,22,1352,15,1353,17,1354,15,1357,17,1358,16,1359,16,1360,11,1361,10,1362,11,1365,10,1366,9,1367,9,1392,11,1394,11,1489,10,1493,10,1520,8,1521,8,1878,9,1879,9,1906,7,1910,7,2005,6,2007,6,2032,8,2033,8,2034,7,2037,6,2038,7,2039,6],s.lookupPairs4D=[0,3,1,2,2,3,5,2,6,1,7,1,8,3,9,2,10,3,13,2,16,3,18,3,22,1,23,1,24,3,26,3,33,2,37,2,38,1,39,1,41,2,45,2,54,1,55,1,56,0,57,0,58,0,59,0,60,0,61,0,62,0,63,0,256,3,258,3,264,3,266,3,272,3,274,3,280,3,282,3,2049,2,2053,2,2057,2,2061,2,2081,2,2085,2,2089,2,2093,2,2304,9,2305,9,2312,9,2313,9,16390,1,16391,1,16406,1,16407,1,16422,1,16423,1,16438,1,16439,1,16642,8,16646,8,16658,8,16662,8,18437,6,18439,6,18469,6,18471,6,18688,9,18689,9,18690,8,18693,6,18694,8,18695,6,18696,9,18697,9,18706,8,18710,8,18725,6,18727,6,131128,0,131129,0,131130,0,131131,0,131132,0,131133,0,131134,0,131135,0,131352,7,131354,7,131384,7,131386,7,133161,5,133165,5,133177,5,133181,5,133376,9,133377,9,133384,9,133385,9,133400,7,133402,7,133417,5,133421,5,133432,7,133433,5,133434,7,133437,5,147510,4,147511,4,147518,4,147519,4,147714,8,147718,8,147730,8,147734,8,147736,7,147738,7,147766,4,147767,4,147768,7,147770,7,147774,4,147775,4,149509,6,149511,6,149541,6,149543,6,149545,5,149549,5,149558,4,149559,4,149561,5,149565,5,149566,4,149567,4,149760,9,149761,9,149762,8,149765,6,149766,8,149767,6,149768,9,149769,9,149778,8,149782,8,149784,7,149786,7,149797,6,149799,6,149801,5,149805,5,149814,4,149815,4,149816,7,149817,5,149818,7,149821,5,149822,4,149823,4,149824,37,149825,37,149826,36,149829,34,149830,36,149831,34,149832,37,149833,37,149842,36,149846,36,149848,35,149850,35,149861,34,149863,34,149865,33,149869,33,149878,32,149879,32,149880,35,149881,33,149882,35,149885,33,149886,32,149887,32,150080,49,150082,48,150088,49,150098,48,150104,47,150106,47,151873,46,151877,45,151881,46,151909,45,151913,44,151917,44,152128,49,152129,46,152136,49,152137,46,166214,43,166215,42,166230,43,166247,42,166262,41,166263,41,166466,48,166470,43,166482,48,166486,43,168261,45,168263,42,168293,45,168295,42,168512,31,168513,28,168514,31,168517,28,168518,25,168519,25,280952,40,280953,39,280954,40,280957,39,280958,38,280959,38,281176,47,281178,47,281208,40,281210,40,282985,44,282989,44,283001,39,283005,39,283208,30,283209,27,283224,30,283241,27,283256,22,283257,22,297334,41,297335,41,297342,38,297343,38,297554,29,297558,24,297562,29,297590,24,297594,21,297598,21,299365,26,299367,23,299373,26,299383,23,299389,20,299391,20,299584,31,299585,28,299586,31,299589,28,299590,25,299591,25,299592,30,299593,27,299602,29,299606,24,299608,30,299610,29,299621,26,299623,23,299625,27,299629,26,299638,24,299639,23,299640,22,299641,22,299642,21,299645,20,299646,21,299647,20,299648,61,299649,60,299650,61,299653,60,299654,59,299655,59,299656,58,299657,57,299666,55,299670,54,299672,58,299674,55,299685,52,299687,51,299689,57,299693,52,299702,54,299703,51,299704,56,299705,56,299706,53,299709,50,299710,53,299711,50,299904,61,299906,61,299912,58,299922,55,299928,58,299930,55,301697,60,301701,60,301705,57,301733,52,301737,57,301741,52,301952,79,301953,79,301960,76,301961,76,316038,59,316039,59,316054,54,316071,51,316086,54,316087,51,316290,78,316294,78,316306,73,316310,73,318085,77,318087,77,318117,70,318119,70,318336,79,318337,79,318338,78,318341,77,318342,78,318343,77,430776,56,430777,56,430778,53,430781,50,430782,53,430783,50,431e3,75,431002,72,431032,75,431034,72,432809,74,432813,69,432825,74,432829,69,433032,76,433033,76,433048,75,433065,74,433080,75,433081,74,447158,71,447159,68,447166,71,447167,68,447378,73,447382,73,447386,72,447414,71,447418,72,447422,71,449189,70,449191,70,449197,69,449207,68,449213,69,449215,68,449408,67,449409,67,449410,66,449413,64,449414,66,449415,64,449416,67,449417,67,449426,66,449430,66,449432,65,449434,65,449445,64,449447,64,449449,63,449453,63,449462,62,449463,62,449464,65,449465,63,449466,65,449469,63,449470,62,449471,62,449472,19,449473,19,449474,18,449477,16,449478,18,449479,16,449480,19,449481,19,449490,18,449494,18,449496,17,449498,17,449509,16,449511,16,449513,15,449517,15,449526,14,449527,14,449528,17,449529,15,449530,17,449533,15,449534,14,449535,14,449728,19,449729,19,449730,18,449734,18,449736,19,449737,19,449746,18,449750,18,449752,17,449754,17,449784,17,449786,17,451520,19,451521,19,451525,16,451527,16,451528,19,451529,19,451557,16,451559,16,451561,15,451565,15,451577,15,451581,15,451776,19,451777,19,451784,19,451785,19,465858,18,465861,16,465862,18,465863,16,465874,18,465878,18,465893,16,465895,16,465910,14,465911,14,465918,14,465919,14,466114,18,466118,18,466130,18,466134,18,467909,16,467911,16,467941,16,467943,16,468160,13,468161,13,468162,13,468163,13,468164,13,468165,13,468166,13,468167,13,580568,17,580570,17,580585,15,580589,15,580598,14,580599,14,580600,17,580601,15,580602,17,580605,15,580606,14,580607,14,580824,17,580826,17,580856,17,580858,17,582633,15,582637,15,582649,15,582653,15,582856,12,582857,12,582872,12,582873,12,582888,12,582889,12,582904,12,582905,12,596982,14,596983,14,596990,14,596991,14,597202,11,597206,11,597210,11,597214,11,597234,11,597238,11,597242,11,597246,11,599013,10,599015,10,599021,10,599023,10,599029,10,599031,10,599037,10,599039,10,599232,13,599233,13,599234,13,599235,13,599236,13,599237,13,599238,13,599239,13,599240,12,599241,12,599250,11,599254,11,599256,12,599257,12,599258,11,599262,11,599269,10,599271,10,599272,12,599273,12,599277,10,599279,10,599282,11,599285,10,599286,11,599287,10,599288,12,599289,12,599290,11,599293,10,599294,11,599295,10],s.p2D=[0,0,1,-1,0,0,-1,1,0,2,1,1,1,2,2,0,1,2,0,2,1,0,0,0],s.p3D=[0,0,1,-1,0,0,1,0,-1,0,0,-1,1,0,0,0,1,-1,0,0,-1,0,1,0,0,-1,1,0,2,1,1,0,1,1,1,-1,0,2,1,0,1,1,1,-1,1,0,2,0,1,1,1,-1,1,1,1,3,2,1,0,3,1,2,0,1,3,2,0,1,3,1,0,2,1,3,0,2,1,3,0,1,2,1,1,1,0,0,2,2,0,0,1,1,0,1,0,2,0,2,0,1,1,0,0,1,2,0,0,2,2,0,0,0,0,1,1,-1,1,2,0,0,0,0,1,-1,1,1,2,0,0,0,0,1,1,1,-1,2,3,1,1,1,2,0,0,2,2,3,1,1,1,2,2,0,0,2,3,1,1,1,2,0,2,0,2,1,1,-1,1,2,0,0,2,2,1,1,-1,1,2,2,0,0,2,1,-1,1,1,2,0,0,2,2,1,-1,1,1,2,0,2,0,2,1,1,1,-1,2,2,0,0,2,1,1,1,-1,2,0,2,0],s.p4D=[0,0,1,-1,0,0,0,1,0,-1,0,0,1,0,0,-1,0,0,-1,1,0,0,0,0,1,-1,0,0,0,1,0,-1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,-1,0,0,-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,2,1,1,0,0,1,1,1,-1,0,1,1,1,0,-1,0,2,1,0,1,0,1,1,-1,1,0,1,1,0,1,-1,0,2,0,1,1,0,1,-1,1,1,0,1,0,1,1,-1,0,2,1,0,0,1,1,1,-1,0,1,1,1,0,-1,1,0,2,0,1,0,1,1,-1,1,0,1,1,0,1,-1,1,0,2,0,0,1,1,1,-1,0,1,1,1,0,-1,1,1,1,4,2,1,1,0,4,1,2,1,0,4,1,1,2,0,1,4,2,1,0,1,4,1,2,0,1,4,1,1,0,2,1,4,2,0,1,1,4,1,0,2,1,4,1,0,1,2,1,4,0,2,1,1,4,0,1,2,1,4,0,1,1,2,1,2,1,1,0,0,3,2,1,0,0,3,1,2,0,0,1,2,1,0,1,0,3,2,0,1,0,3,1,0,2,0,1,2,0,1,1,0,3,0,2,1,0,3,0,1,2,0,1,2,1,0,0,1,3,2,0,0,1,3,1,0,0,2,1,2,0,1,0,1,3,0,2,0,1,3,0,1,0,2,1,2,0,0,1,1,3,0,0,2,1,3,0,0,1,2,2,3,1,1,1,0,2,1,1,1,-1,2,2,0,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,2,0,0,0,2,3,1,0,1,1,2,1,-1,1,1,2,2,0,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,2,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,2,0,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,2,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,0,2,0,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,2,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,2,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,0,0,2,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,0,2,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,0,2,2,1,1,1,-1,0,1,1,1,0,-1,0,0,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,0,0,0,0,0,2,1,-1,1,1,0,1,0,1,1,-1,0,0,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,0,0,0,0,0,2,1,-1,1,0,1,1,0,1,-1,1,0,0,0,0,0,2,1,-1,0,1,1,1,0,-1,1,1,0,0,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,2,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,2,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,2,2,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,0,2,0,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,2,0,0,2,1,-1,1,0,1,1,0,1,-1,1,2,0,2,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,0,0,2,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,0,2,0,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,2,0,2,1,1,-1,0,1,1,1,0,-1,1,2,0,0,0,2,2,1,-1,1,0,1,1,0,1,-1,1,2,0,0,0,2,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,0,2,3,1,1,0,0,0,2,2,0,0,0,2,1,1,1,-1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,1,-1,3,1,0,0,1,0,2,0,0,2,0,2,1,1,1,-1,3,1,1,0,0,0,2,2,0,0,0,2,1,1,-1,1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,-1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,1,-1,1,3,1,1,0,0,0,2,2,0,0,0,2,1,-1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,1,-1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,-1,1,1,3,1,0,1,0,0,2,0,2,0,0,2,-1,1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,-1,1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,-1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,4,1,1,1,1,3,3,2,0,1,0,3,1,0,2,0,4,1,1,1,1,3,3,0,2,1,0,3,0,1,2,0,4,1,1,1,1,3,3,2,0,0,1,3,1,0,0,2,4,1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,4,1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,4,1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,1,-1,3,3,2,0,1,0,3,1,0,2,0,2,1,1,1,-1,3,3,0,2,1,0,3,0,1,2,0,2,1,1,1,-1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,-1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,1,-1,1,3,3,0,2,0,1,3,0,1,0,2,2,1,1,-1,1,3,3,2,0,1,0,3,1,0,2,0,2,1,-1,1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,-1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,1,-1,1,1,3,3,0,2,1,0,3,0,1,2,0,2,-1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,2,-1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,-1,1,1,1];for(var l=[],d=0;d<s.p2D.length;d+=4){for(var c=s.base2D[s.p2D[d]],u=null,h=null,f=0;f<c.length;f+=3)h=new o(c[f],c[f+1],c[f+2]),null===u?l[d/4]=h:u.next=h,u=h;h.next=new o(s.p2D[d+1],s.p2D[d+2],s.p2D[d+3])}this.lookup2D=[];for(var d=0;d<s.lookupPairs2D.length;d+=2)this.lookup2D[s.lookupPairs2D[d]]=l[s.lookupPairs2D[d+1]];for(var p=[],d=0;d<s.p3D.length;d+=9){for(var c=s.base3D[s.p3D[d]],u=null,h=null,f=0;f<c.length;f+=4)h=new n(c[f],c[f+1],c[f+2],c[f+3]),null===u?p[d/9]=h:u.next=h,u=h;h.next=new n(s.p3D[d+1],s.p3D[d+2],s.p3D[d+3],s.p3D[d+4]),h.next.next=new n(s.p3D[d+5],s.p3D[d+6],s.p3D[d+7],s.p3D[d+8])}this.lookup3D=[];for(var d=0;d<s.lookupPairs3D.length;d+=2)this.lookup3D[s.lookupPairs3D[d]]=p[s.lookupPairs3D[d+1]];for(var m=[],d=0;d<s.p4D.length;d+=16){for(var c=s.base4D[s.p4D[d]],u=null,h=null,f=0;f<c.length;f+=5)h=new i(c[f],c[f+1],c[f+2],c[f+3],c[f+4]),null===u?m[d/16]=h:u.next=h,u=h;h.next=new i(s.p4D[d+1],s.p4D[d+2],s.p4D[d+3],s.p4D[d+4],s.p4D[d+5]),h.next.next=new i(s.p4D[d+6],s.p4D[d+7],s.p4D[d+8],s.p4D[d+9],s.p4D[d+10]),h.next.next.next=new i(s.p4D[d+11],s.p4D[d+12],s.p4D[d+13],s.p4D[d+14],s.p4D[d+15])}this.lookup4D=[];for(var d=0;d<s.lookupPairs4D.length;d+=2)this.lookup4D[s.lookupPairs4D[d]]=m[s.lookupPairs4D[d+1]];this.perm=new Uint8Array(256),this.perm2D=new Uint8Array(256),this.perm3D=new Uint8Array(256),this.perm4D=new Uint8Array(256);for(var g=new Uint8Array(256),d=0;256>d;d++)g[d]=d;var e=new Uint32Array(1);e[0]=r,e=t(t(t(e)));for(var d=255;d>=0;d--){e=t(e);var z=new Uint32Array(1);z[0]=(e[0]+31)%(d+1),z[0]<0&&(z[0]+=d+1),this.perm[d]=g[z[0]],this.perm2D[d]=14&this.perm[d],this.perm3D[d]=this.perm[d]%24*3,this.perm4D[d]=252&this.perm[d],g[z[0]]=g[d]}this.simplex1D=function(e){return a.simplex2D(e,1)},this.simplex2D=function(e,t){var o=(e+t)*s.STRETCH_2D,n=[e+o,t+o],i=n[0],r=n[1],l=[Math.floor(i),Math.floor(r)],d=l[0],c=l[1],u=(d+c)*s.SQUISH_2D,h=[e-(d+u),t-(c+u)],f=h[0],p=h[1],m=[i-d,r-c],g=m[0],z=m[1],v=g+z,b=new Uint32Array(4);b[0]=g-z+1,b[1]=v,b[2]=v+z,b[3]=v+g;for(var y=b[0]|b[1]<<1|b[2]<<2|b[3]<<4,w=a.lookup2D[y],x=0;"undefined"!=typeof w;){var C=[f+w.dx,p+w.dy],T=C[0],k=C[1],j=2-T*T-k*k;if(j>0){var M=[d+w.xsb,c+w.ysb],S=M[0],A=M[1],E=a.perm2D[a.perm[255&S]+A&255],P=s.gradients2D[E]*T+s.gradients2D[E+1]*k;j*=j,x+=j*j*P}w=w.next}return x*s.NORM_2D},this.simplex3D=function(e,t,o){var n=(e+t+o)*s.STRETCH_3D,i=[e+n,t+n,o+n],r=i[0],l=i[1],d=i[2],c=[Math.floor(r),Math.floor(l),Math.floor(d)],u=c[0],h=c[1],f=c[2],p=(u+h+f)*s.SQUISH_3D,m=[e-(u+p),t-(h+p),o-(f+p)],g=m[0],z=m[1],v=m[2],b=[r-u,l-h,d-f],y=b[0],w=b[1],x=b[2],C=y+w+x,T=new Uint32Array(7);T[0]=w-x+1,T[1]=y-w+1,T[2]=y-x+1,T[3]=C,T[4]=C+x,T[5]=C+w,T[6]=C+y;for(var k=T[0]|T[1]<<1|T[2]<<2|T[3]<<3|T[4]<<5|T[5]<<7|T[6]<<9,j=a.lookup3D[k],M=0;"undefined"!=typeof j;){var S=[g+j.dx,z+j.dy,v+j.dz],A=S[0],E=S[1],P=S[2],D=2-A*A-E*E-P*P;if(D>0){var O=[u+j.xsb,h+j.ysb,f+j.zsb],B=O[0],I=O[1],L=O[2],_=a.perm3D[a.perm[a.perm[255&B]+I&255]+L&255],X=s.gradients3D[_]*A+s.gradients3D[_+1]*E+s.gradients3D[_+2]*P;D*=D,M+=D*D*X}j=j.next}return M*s.NORM_3D},this.simplex4D=function(e,t,o,n){var i=(e+t+o+n)*s.STRETCH_4D,r=[e+i,t+i,o+i,n+i],l=r[0],d=r[1],c=r[2],u=r[3],h=[Math.floor(l),Math.floor(d),Math.floor(c),Math.floor(u)],f=h[0],p=h[1],m=h[2],g=h[3],z=(f+p+m+g)*s.SQUISH_4D,v=e-(f+z),b=t-(p+z),y=o-(m+z),w=n-(g+z),x=[l-f,d-p,c-m,u-g],C=x[0],T=x[1],k=x[2],j=x[3],M=C+T+k+j,S=new Uint32Array(11);S[0]=k-j+1,S[1]=T-k+1,S[2]=T-j+1,S[3]=C-T+1,S[4]=C-k+1,S[5]=C-j+1,S[6]=M<<6,S[7]=M+j,S[8]=M+k,S[9]=M+T,S[10]=M+C;for(var A=S[0]|S[1]<<1|S[2]<<2|S[3]<<3|S[4]<<4|S[5]<<5|S[6]<<6|S[7]<<8|S[8]<<11|S[9]<<14|S[10]<<17,E=a.lookup4D[A],P=0;"undefined"!=typeof E;){var D=[v+E.dx,b+E.dy,y+E.dz,w+E.dw],O=D[0],B=D[1],I=D[2],L=D[3],_=2-O*O-B*B-I*I-L*L;if(_>0){var X=[f+E.xsb,p+E.ysb,m+E.zsb,g+E.wsb],Y=X[0],R=X[1],W=X[2],H=X[3],F=a.perm4D[a.perm[a.perm[a.perm[255&Y]+R&255]+W&255]+H&255],N=s.gradients4D[F]*O+s.gradients4D[F+1]*B+s.gradients4D[F+2]*I+s.gradients4D[F+3]*L;_*=_,P+=_*_*N}E=E.next}return P*s.NORM_4D}},e.Damp=function(t,o){z_d("14");var n,i="startValue, damp";return(n=zob(e.Damp,arguments,i,this))?n:(this.lastValue=zot(t)?0:t,void(this.damp=zot(o)?.1:o))},e.Damp.prototype.convert=function(e){return this.lastValue=this.lastValue+(e-this.lastValue)*this.damp},e.Damp.prototype.immediate=function(e){return this.lastValue=e,this},e.Proportion=function(t,o,n,i,r,a){var s,l="baseMin, baseMax, targetMin, targetMax, factor, targetRound";if(s=zob(e.Proportion,arguments,l,this))return s;z_d("15"),zot(n)&&(n=0),zot(i)&&(i=1),zot(r)&&(r=1),zot(a)&&(a=!1);var d,c,u;d=t,this.convert=function(e){return isNaN(e)?void 0:(e=Math.max(e,t),e=Math.min(e,o),c=(e-t)/(o-t),u=r>0?n+(i-n)*c:i-(i-n)*c,a&&(u=Math.round(u)),u)}},e.ProportionDamp=function(t,o,n,i,r,a,s){function l(){isNaN(u)||(u=Math.max(u,t),u=Math.min(u,o),h=(u-t)/(o-t),f=i-n,p=a>0?n+f*h:i-f*h,z=p,m=z-v,v+=m*g.damp)}var d,c="baseMin, baseMax, targetMin, targetMax, damp, factor, targetRound";if(d=zob(e.ProportionDamp,arguments,c,this))return d;z_d("16"),zot(n)&&(n=0),zot(i)&&(i=1),zot(r)&&(r=.1),zot(a)&&(a=1),zot(s)&&(s=!1),this.damp=r;var u,h,f,p,m,g=this,z=0,v=0;u=t,v=n;var b=setInterval(l,20);this.immediate=function(e){return g.convert(e),l(),v=p,s&&(v=Math.round(v)),g},this.convert=function(e){return u=e,s?Math.round(v):v},this.dispose=function(){return clearInterval(b),!0}},e.Dictionary=function(e){z_d("17"),this.length=0,this.unique=e;var t=this.objects=[],o=this.values=[];this.add=function(e,n){zot(e)||(zot(n)&&(n=!0),this.unique&&this.remove(e),t.push(e),o.push(n),this.length++)},this.at=function(e){if(!zot(e)){var n=t.indexOf(e);return n>-1?o[n]:null}},this.remove=function(e){if(!zot(e)){var n=t.indexOf(e);n>-1&&(t.splice(n,1),o.splice(n,1),this.length--)}},this.dispose=function(){return t=null,o=null,this.length=null,!0}},e.swapProperties=function(e,t,o){if(z_d("17.1"),zot(t)||zot(o)||zot(t[e])||zot(o[e]))return!1;var n=o[e];return o[e]=t[e],t[e]=n,!0},e.swapHTML=function(t,o){return z_d("17.2"),e.swapProperties("innerHTML",zid(t),zid(o))},e.scrollX=function(t,o){return z_d("18"),e.abstractScroll("X","Left",t,o)},e.scrollY=function(t,o){return z_d("19"),e.abstractScroll("Y","Top",t,o)},e.abstractScroll=function(t,o,n,i){z_d("20");var r="X"==t?"Y":"X";if(zot(n)){var a=0,s=navigator.applicationName,l=navigator.userAgent.indexOf("Safari");if(-1!=l||"Safari"==s)var a=1;
return a||"CSS1Compat"!=document.compatMode?document.body["scroll"+o]:document.documentElement["scroll"+o]}if(zot(i))window.scrollTo(e["scroll"+r](),n);else{var d=50;d>i&&(i=d);var c=i/d,u=e["scroll"+t](),h=n-u,f=h/c,p=0,m=setInterval(function(){p++,u+=f,window.scrollTo(e["scroll"+r](),u),p>=c&&(window.scrollTo(e["scroll"+r](),n),clearInterval(m))},d)}return n},e.windowWidth=function(){return z_d("21"),isNaN(window.innerWidth)?window.clientWidth:window.innerWidth},e.windowHeight=function(){return z_d("22"),isNaN(window.innerHeight)?window.clientHeight:window.innerHeight},e.urlEncode=function(e){z_d("23");var e=(e+"").toString();return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},e.urlDecode=function(e){return z_d("24"),decodeURIComponent((e+"").replace(/\+/g,"%20"))},e.setCookie=function(e,t,o){if(z_d("25"),!zot(e)&&!zot(t)){if(o){var n=new Date;n.setTime(n.getTime()+24*o*60*60*1e3);var i="; expires="+n.toGMTString()}else var i="";return document.cookie=e+"="+escape(t)+i+"; path=/",!0}},e.getCookie=function(e){z_d("26");var t,o=document.cookie.split(/;\s*/),i=new Array;for(n=0;n<o.length;n++)t=o[n].split("="),i[t[0]]=t[1];return"undefined"==typeof i[e]?void 0:unescape(i[e])},e.deleteCookie=function(t){return z_d("27"),zot(e.getCookie(t))?!1:(e.setCookie(t,"",-1),!0)},e.convertColor=function(e,t){if(zot(t)&&(t=!1),t)e=e.replace("#",""),3==e.length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2));else if("#"==e.charAt(0))return e;var o=["black","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],n=["000000","f0f8ff","faebd7","00ffff","7fffd4","f0ffff","f5f5dc","ffe4c4","ffebcd","0000ff","8a2be2","a52a2a","deb887","5f9ea0","7fff00","d2691e","ff7f50","6495ed","fff8dc","dc143c","00ffff","00008b","008b8b","b8860b","a9a9a9","a9a9a9","006400","bdb76b","8b008b","556b2f","ff8c00","9932cc","8b0000","e9967a","8fbc8f","483d8b","2f4f4f","2f4f4f","00ced1","9400d3","ff1493","00bfff","696969","696969","1e90ff","b22222","fffaf0","228b22","ff00ff","dcdcdc","f8f8ff","ffd700","daa520","808080","808080","008000","adff2f","f0fff0","ff69b4","cd5c5c","4b0082","fffff0","f0e68c","e6e6fa","fff0f5","7cfc00","fffacd","add8e6","f08080","e0ffff","fafad2","d3d3d3","d3d3d3","90ee90","ffb6c1","ffa07a","20b2aa","87cefa","778899","778899","b0c4de","ffffe0","00ff00","32cd32","faf0e6","ff00ff","800000","66cdaa","0000cd","ba55d3","9370db","3cb371","7b68ee","00fa9a","48d1cc","c71585","191970","f5fffa","ffe4e1","ffe4b5","ffdead","000080","fdf5e6","808000","6b8e23","ffa500","ff4500","da70d6","eee8aa","98fb98","afeeee","db7093","ffefd5","ffdab9","cd853f","ffc0cb","dda0dd","b0e0e6","800080","663399","ff0000","bc8f8f","4169e1","8b4513","fa8072","f4a460","2e8b57","fff5ee","a0522d","c0c0c0","87ceeb","6a5acd","708090","708090","fffafa","00ff7f","4682b4","d2b48c","008080","d8bfd8","ff6347","40e0d0","ee82ee","f5deb3","ffffff","f5f5f5","ffff00","9acd32"];return t?o[-1!=n.indexOf(e.toLowerCase())?n.indexOf(e):0]:"#"+n[-1!=o.indexOf(e.toLowerCase())?o.indexOf(e):0]},e.mobile=function(e){return z_d("28"),zot(e)&&(e=!0),/ip(hone|od|ad)/i.test(navigator.userAgent)?"ios":/android|nexus/i.test(navigator.userAgent)?"android":/blackberry/i.test(navigator.userAgent)?"blackberry":/nokia|phone|mobile/i.test(navigator.userAgent)?"windows":/opera mini|webos/i.test(navigator.userAgent)?"other":e&&void 0!==window.orientation?!0:!1},e.async=function(t,o){if(z_d("29"),!zot(t)){var n=document.createElement("script");if(o){var i=o.toString().split(/\n/,1)[0].match(/^function\s?([^\s(]*)/)[1];e.async[i]=function(){var e=n;return function(t){e&&e.parentNode.removeChild(e),e=null,o(t)}}()}else e.async.z_s&&e.async.z_s.parentNode&&e.async.z_s.parentNode.removeChild(e.async.z_s),e.async.z_s=n;t.match(/\?/)||(t+="?"),n.setAttribute("src",t+"&r="+Math.random()),document.getElementsByTagName("head")[0].appendChild(n)}},e.extend=function(t,o,n,i,r){function a(){this.constructor=t}var s,l="subclass, superclass, override, prefix, prototype";if(s=zob(e.extend,arguments,l))return s;if((zot(t)||zot(o))&&zon)return void zog("zim.extend() - please supply a class and its superclass");zot(i)&&(i="super"),zot(n)&&(n=[]),Array.isArray(n)||(n=[n]),zot(r)&&(r=!0);var d={};for(var c in t.prototype)Object.defineProperty(d,c,Object.getOwnPropertyDescriptor(t.prototype,c));a.prototype=o.prototype,t.prototype=new a;for(c in d)Object.defineProperty(t.prototype,c,Object.getOwnPropertyDescriptor(d,c));var u=t.prototype,h=Object.getPrototypeOf&&Object.getPrototypeOf(u)||u.__proto__;if(h){u[(i+="_")+"constructor"]=h.constructor;for(var f,p=0;p<n.length;p++)f=n[p],"function"==typeof h[f]&&(u[i+f]=h[f]);if(r)for(f in h)u.hasOwnProperty(f)&&"function"==typeof h[f]&&(u[i+f]=h[f])}return t},"undefined"==typeof createjs)return zon&&zog("ZIM >= 4.3.0 requires createjs namespace to be loaded (import createjs before zim)"),e;e.Container=function(t,o,n,i){if(z_d("50.5"),this.cjsContainer_constructor(),this.type="Container",zot(n))var r=0,a=t,s=0,l=o;else var r=t,a=n,s=o,l=i;zot(l)&&(l=a),zot(t)||this.setBounds(r,s,a,l),this.clone=function(){return this.cloneChildren(this.cloneProps(new e.Container(r,s,a,l)))}},zimify(e.Container.prototype),e.extend(e.Container,createjs.Container,"clone","cjsContainer",!1),e.Shape=function(t,o,n,i,r){z_d("50.6"),this.cjsShape_constructor(r),this.type="Shape";var a=this;if(zot(n))var s=0,l=t,d=0,c=o;else var s=t,l=n,d=o,c=i;zot(c)&&(c=l),zot(t)||this.setBounds(s,d,l,c),this.clone=function(t){zot(t)&&(t=!0);var o=a.cloneProps(new e.Shape(l,c,s,d,r));return o.graphics=t?a.graphics.clone():a.graphics,o}},e.extend(e.Shape,createjs.Shape,"clone","cjsShape",!1),zimify(e.Shape.prototype),e.Bitmap=function(t,o,n,i){z_d("50.7"),this.cjsBitmap_constructor(t);var r=this;this.type="Bitmap",this.id=i,zot(o)||zot(n)||r.setBounds(0,0,o,n),zot(o)&&(o=100),zot(n)&&(n=100),this.imageData=new ImageData(o,n),this.drawImageData=function(e,i,a,s,l,d){if(zot(e)&&(e=0),zot(i)&&(i=0),zot(a)&&(a=0),zot(s)&&(s=0),zot(l)&&(l=o),zot(d)&&(d=n),!r.proxyCanvas){var c=r.proxyCanvas=document.createElement("canvas");c.setAttribute("width",o),c.setAttribute("height",n),r.proxyContext=c.getContext("2d"),t=r.image=c}r.proxyContext&&r.proxyContext.putImageData(r.imageData,e,i,a,s,l,d)},zot(t)&&r.drawImageData(),this.clone=function(){return this.cloneProps(new e.Bitmap(t,o,n,i))}},e.extend(e.Bitmap,createjs.Bitmap,"clone","cjsBitmap",!1),zimify(e.Bitmap.prototype),e.Sprite=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m){var g,z="image, cols, rows, count, offsetX, offsetY, spacingX, spacingY, width, height, animations, json, id, globalControl, spriteSheet";if(g=zob(e.Sprite,arguments,z,this))return g;this.type="Sprite",z_d("50.8");var v,b=this;if(zot(h)&&!zot(t)){zot(o)&&(o=1),zot(n)&&(n=1),zot(i)&&(i=o*n),zot(r)&&(r=0),zot(a)&&(a=0),zot(s)&&(s=0),zot(l)&&(l=0),zot(d)&&(d=t.width),zot(c)&&(c=t.height);var y=(d-r+s)/o-s,w=(c-a+l)/n-l,x=[],C=0;e:for(var T=0;n>T;T++)for(var k=0;o>k;k++){if(++C>i)break e;x.push([r+k*(y+s),a+T*(w+l),y,w])}var j={images:[t.image],frames:x,animations:u};v=new createjs.SpriteSheet(j)}else m?(v=m,u=v.animations):(u=h.animations,v=new createjs.SpriteSheet(h));this.animations=u,this.cjsSprite_constructor(v),zot(f)&&(f=e.makeID()),this.id=f,zot(p)&&(p=!0),b.globalControl=p;var M,S=0;this.parseFrames=function(t,o,n,i){function r(e){Array.isArray(e)?a(e):e.constructor=={}.constructor?s(e):isNaN(e)||d.push({f:Math.floor(e),s:1})}function a(e){l(e[0],e[1],e[3]),e[2]&&!zot(b.animations[e[2]])&&r(b.animations[e[2]])}function s(e){if(!zot(e.frames)){zot(e.speed)&&(e.speed=1);for(var t=0;t<e.frames.length;t++)e.speed<c&&(c=e.speed),e.speed>u&&(u=e.speed),d.push({f:e.frames[t],s:e.speed});e.next&&!zot(b.animations[e.next])&&r(b.animations[e.next])}}function l(e,t,o){zot(o)&&(o=1);for(var n=e;t>=n;n++)c>o&&(c=o),o>u&&(u=o),d.push({f:n,s:o})}var d=[],c=Number.MAX_VALUE,u=0;if(zot(t))zot(o)&&(o=0),zot(n)&&(n=b.totalFrames-1),l(o,n);else{if(zot(b.animations)||zot(b.animations[t]))return[];var h=b.animations[t];r(h)}if(i)return d;c=e.constrain(e.decimals(c),.1),u=e.constrain(e.decimals(u),.1);for(var f,p=[],m=c!=u,g=0;g<d.length;g++)if(f=d[g],m)for(var z=0;z<e.constrain(Math.round(1>c?f.s/c:f.s),.1);z++)p.push(f.f);else p.push(f.f);return p},this.run=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,y,w,x,C,T,k,j){function A(){M=b.parseFrames(o,x,C),b.gotoAndStop(M[S]),x=C=null,D={normalizedFrame:M.length-1}}var E,P="time, label, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, startFrame, endFrame, tweek, id, globalControl";if(E=zob(this.run,arguments,P))return E;var D;if(zot(T)&&(T=1),zot(k)||(b.id=k),zot(j)||(b.globalControl=j),Array.isArray(o)){var O,B;D=[];for(var I,L=0,_=0;_<o.length;_++){O=o[_],O.lookup=b.parseFrames(O.label,O.startFrame,O.endFrame),0==_&&(I=O.lookup[0]),delete O.startFrame,delete O.endFrame,O.obj=e.merge(O.obj,{normalizedFrame:O.lookup.length-1}),O.set=e.merge(O.set,{normalizedFrames:{noZik:O.lookup},normalizedFrame:0}),zot(O.wait)&&(O.wait=L*T),B=O.label,delete O.label,D.push(O),L=0;var X=zot(O.time)?t:O.time;C-x>0&&(L=X/(C-x)/2)}if(0==D.length)return this;1==D.length?(t=D[0].time,o=B,A()):b.gotoAndStop(I)}else A();if(zot(t)&&(t=1e3),b.running&&b.stopZimAnimate(b.id),b.running=!0,!Array.isArray(D)){var L=0;C-x>0&&(L=t/(C-x)/2),zot(c)&&(c=L*T),zot(g)&&(g=L*T)}var Y=function(){n&&"function"==typeof n&&n(i),b.running=!1};return e.animate({target:b,obj:D,time:t,ease:"linear",call:Y,params:i,wait:r,wait:a,wait:s,loop:l,loopCount:d,loopWait:c,loopCall:u,loopParams:h,loopWaitCall:f,loopWaitParams:p,rewind:m,rewindWait:g,rewindCall:z,rewindParams:v,rewindWaitCall:y,rewindWaitParams:w,override:!1,id:b.id}),b.runPaused=!1,b},this.runPaused=!0,this.pauseRun=function(t){return zot(t)&&(t=!0),b.runPaused=t,b.globalControl?e.pauseZimAnimate(t,b.id):b.pauseZimAnimate(t,b.id),b},this.stopRun=function(){return b.runPaused=!0,b.running=!1,b.globalControl?e.stopZimAnimate(b.id):b.stopZimAnimate(b.id),b},Object.defineProperty(this,"frame",{get:function(){return this.currentFrame},set:function(e){e=Math.round(e),this.paused?this.gotoAndStop(e):this.gotoAndPlay(e)}}),Object.defineProperty(this,"normalizedFrame",{get:function(){return S},set:function(e){S=Math.round(e),this.gotoAndStop(M[S])}}),Object.defineProperty(this,"normalizedFrames",{get:function(){return M},set:function(e){M=e}}),Object.defineProperty(this,"totalFrames",{get:function(){return v.getNumFrames()},set:function(){zog("zim.Sprite - totalFrames is read only")}}),this.clone=function(){return this.cloneProps(new e.Sprite(t,o,n,i,r,a,s,l,d,c,u,h,null,p,m))}},e.extend(e.Sprite,createjs.Sprite,"clone","cjsSprite",!1),zimify(e.Sprite.prototype),e.MovieClip=function(t,o,n,i){var r,a="mode, startPosition, loop, labels";return(r=zob(e.MovieClip,arguments,a,this))?r:(this.type="MovieClip",z_d("50.9"),this.cjsMovieClip_constructor(t,o,n,i),void(this.clone=function(){return this.cloneProps(new e.MovieClip(t,o,n,i))}))},e.extend(e.MovieClip,createjs.MovieClip,"clone","cjsMovieClip",!1),zimify(e.MovieClip.prototype),e.Circle=function(t,o,n,i,r){function a(){b.c(),m=b.f(u).command,(zot(f)||f>0)&&(zot(h)&&zot(f)||(zot(h)&&(h="black"),g=b.s(h).command,z=b.ss(f).command,r&&(v=b.sd([10,10],5).command))),b.dc(0,0,c),d.setBounds(-c,-c,2*c,2*c)}var s,l="radius, color, borderColor, borderWidth, dashed";if(s=zob(e.Circle,arguments,l,this))return s;z_d("51"),this.zimContainer_constructor(),this.type="Circle",zot(t)&&(t=50),zot(r)&&(r=!1),!zot(n)&&zot(i)?i=1:!zot(i)&&zot(n)&&(n="black"),zot(o)&&(o=i>0?"rgba(0,0,0,0)":"black");var d=this,c=t,u=o,h=n,f=i;this.mouseChildren=!1;var p=this.shape=new createjs.Shape;this.addChild(p);var m,g,z,v,b=p.graphics;a(),Object.defineProperty(d,"color",{get:function(){return u},set:function(e){zot(e)&&(e="black"),u=e,m.style=u}}),Object.defineProperty(d,"borderColor",{get:function(){return h},set:function(e){h=e,g?g.style=h:a()}}),Object.defineProperty(d,"borderWidth",{get:function(){return f},set:function(e){e>0||(e=0),f=e,z&&0!=f?(z.width=f,r&&(v.segments=[20,10],v.offset=5)):a()}}),Object.defineProperty(d,"radius",{get:function(){return c},set:function(e){c=e,a()}}),this.clone=function(){return d.cloneProps(new e.Circle(d.radius,d.color,d.borderColor,d.borderWidth,r))}},e.extend(e.Circle,e.Container,"clone","zimContainer",!1),e.Rectangle=function(t,o,n,i,r,a,s,l){function d(){y.c(),z=y.f(f).command,(zot(m)||m>0)&&(zot(p)&&zot(m)||(zot(p)&&(p="black"),v=y.s(p).command,b=y.ss(m).command,l&&(borderDashedObj=y.sd([10,10],5).command))),s?y.rc(0,0,t,o,a,a,0,0):y.rr(0,0,t,o,a),h.setBounds(0,0,t,o)}var c,u="width, height, color, borderColor, borderWidth, corner, flatBottom, dashed";if(c=zob(e.Rectangle,arguments,u,this))return c;z_d("52"),this.zimContainer_constructor(),this.type="Rectangle",zot(t)&&(t=100),zot(o)&&(o=100),zot(a)&&(a=0),zot(s)&&(s=!1),zot(l)&&(l=!1),!zot(i)&&zot(r)?r=1:!zot(r)&&zot(i)&&(i="black"),zot(n)&&(n=r>0?"rgba(0,0,0,0)":"black");var h=this,f=n,p=i,m=r;this.mouseChildren=!1;var g=this.shape=new createjs.Shape;this.addChild(g);var z,v,b,y=g.graphics;d(),Object.defineProperty(h,"color",{get:function(){return f},set:function(e){zot(e)&&(e="black"),f=e,z.style=f}}),Object.defineProperty(h,"borderColor",{get:function(){return p},set:function(e){p=e,v?v.style=p:d()}}),Object.defineProperty(h,"borderWidth",{get:function(){return m},set:function(e){e>0||(e=0),m=e,b&&0!=m?(b.width=m,l&&(borderDashedObj.segments=[20,10],borderDashedObj.offset=5)):d()}}),this.clone=function(){return h.cloneProps(new e.Rectangle(t,o,h.color,h.borderColor,h.borderWidth,a,s,l))}},e.extend(e.Rectangle,e.Container,"clone","zimContainer",!1),e.Triangle=function(t,o,n,i,r,a,s,l,d){function c(){C.c(),y=C.f(p).command,(zot(g)||g>0)&&(zot(m)&&zot(g)||(zot(m)&&(m="black"),w=C.s(m).command,x=C.ss(g).command,d&&(borderDashedObj=C.sd([10,10],5).command))),C.mt(0,0),f.one={x:0,y:0},C.lt(t,0),f.two={x:t,y:0};var e=180*Math.acos((Math.pow(bb,2)+Math.pow(cc,2)-Math.pow(aa,2))/(2*bb*cc))/Math.PI,n=180*Math.asin(bb*Math.sin(e*Math.PI/180)/aa)/Math.PI,i=180-e-n,r=[e,n,i];f.angles=[r[v[1]],r[v[2]],r[v[0]]];var a=f.angles[1],c=Math.cos(a*Math.PI/180)*o,u=Math.sin(a*Math.PI/180)*o,h=Math.max(t,t-c),z=u;f.setBounds(0,0,h,z),b.y=z,C.lt(t-c,0-u),f.three={x:t-c,y:0-u},C.cp(),s&&(f.regX=h/2,f.regY=z/2),l&&(f.shape.y+=l)}var u,h="a, b, c, color, borderColor, borderWidth, center, adjust, dashed";if(u=zob(e.Triangle,arguments,h,this))return u;z_d("53"),this.zimContainer_constructor(),this.type="Triangle",zot(t)&&(t=100),zot(o)&&(o=t),zot(n)&&(n=o),-1==n&&(n=Math.sqrt(Math.pow(t,2)+Math.pow(o,2))),zot(s)&&(s=!0),zot(l)&&(l=0),!zot(r)&&zot(a)?a=1:!zot(a)&&zot(r)&&(r="black"),zot(i)&&(i=a>0?"rgba(0,0,0,0)":"black");var f=this,p=i,m=r,g=a;this.mouseChildren=!1;var z=[t,o,n];z.sort(function(e,t){return t-e}),aa=z[0],bb=z[1],cc=z[2];var v=[z.indexOf(t),z.indexOf(o),z.indexOf(n)];if(aa>bb+cc)return void zog("zim display - Triangle(): invalid triangle lengths");var b=this.shape=new createjs.Shape;this.addChild(b);var y,w,x,C=b.graphics;c(),Object.defineProperty(f,"color",{get:function(){return p},set:function(e){zot(e)&&(e="black"),p=e,y.style=p}}),Object.defineProperty(f,"borderColor",{get:function(){return m},set:function(e){m=e,w?w.style=m:c()}}),Object.defineProperty(f,"borderWidth",{get:function(){return g},set:function(e){e>0||(e=0),g=e,x&&0!=g?(x.width=g,d&&(borderDashedObj.segments=[20,10],borderDashedObj.offset=5)):c()}}),this.clone=function(){return f.cloneProps(new e.Triangle(t,o,n,f.color,f.borderColor,f.borderWidth,s,l,d))}},e.extend(e.Triangle,e.Container,"clone","zimContainer"),e.Blob=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p){function m(){function t(e){var t={mirror:frame.purple,free:frame.yellow,none:frame.blue};return t[e]?t[e]:frame.pink}function o(){h.c(),y=h.f(j).command,(zot(S)||S>0)&&(zot(M)&&zot(S)||(zot(M)&&(M="black"),w=h.s(M).command,x=h.ss(S).command,p&&(C=h.sd([10,10],5).command)));var e=b[0][0],t=e.localToLocal(b[0][3].x,b[0][3].y,n);h.mt(t.x,t.y),f.c().s(frame.darker).ss(1);for(var o,i,r=0;r<b.length;r++){var o=r,i=(r+1)%b.length,e=b[o][0],a=b[o][3],s=b[o][1],l=b[o][2],d=b[i][0],c=b[i][3],u=b[i][1],m=(b[i][2],e.localToLocal(l.x,l.y,n)),g=d.localToLocal(u.x,u.y,n),z=d.localToLocal(c.x,c.y,n);h.bt(m.x,m.y,g.x,g.y,z.x,z.y);var t=e.localToLocal(a.x,a.y,n),v=e.localToLocal(s.x,s.y,n);f.mt(t.x,t.y).lt(v.x,v.y),f.mt(t.x,t.y).lt(m.x,m.y)}}if(v="number"==typeof i?i:i.length,!(0>=v)){a=4*r/v;var n=k.shape=(new e.Shape).addTo(k),u=k.sticks=(new e.Shape).addTo(k),h=n.graphics;h.c();var f=u.graphics;f.c();var m=8,g=10,z=k.sets=(new e.Container).addTo(k).drag();b=[],T=[];for(var E,P,D,O,B,I,L,_,X=0;v>X;X++){if(D=(new e.Container).addTo(z),"number"==typeof i){var Y=zik(a);P=new e.Container(Y,r).reg(Y/2,r).addTo(k),P.rotation=X/v*360,I=new e.Circle(m,frame.light,frame.dark,2).centerReg(P).pos(Y/2,0),O=new e.Rectangle(g,g,t(s),frame.dark,2).centerReg(P).pos(0,0),B=new e.Rectangle(g,g,t(s),frame.dark,2).centerReg(P).pos(Y,0);var R=P.localToLocal(I.x,I.y,z);I.x=R.x,I.y=R.y,I.addTo(D);var W=P.localToLocal(O.x,O.y,z);O.x="none"==s?0:W.x-I.x,O.y="none"==s?0:W.y-I.y,O.addTo(D);var H=P.localToLocal(B.x,B.y,z);B.x="none"==s?0:H.x-I.x,B.y="none"==s?0:H.y-I.y,B.addTo(D),D.pos(I.x,I.y),I.x=0,I.y=0,"none"==s&&I.addTo(D)}else _=i[X],L=_[8]?_[8]:s,D=(new e.Container).addTo(z).pos(_[0],_[1]),I=new e.Circle(m,frame.light,frame.dark,2).centerReg(D).pos(_[6],_[7]),O=new e.Rectangle(g,g,t(L),frame.dark,2).centerReg(D,0).pos(_[2],_[3]),B=new e.Rectangle(g,g,t(L),frame.dark,2).centerReg(D,0).pos(_[4],_[5]);T.push(I),I.set=D,I.rect1=O,I.rect2=B,I.index=X,I.on("dblclick",function(e){if(!k.lockControlType){var n=e.target,i=b[n.index][4]?b[n.index][4]:s;Math.abs(n.rect1.x)<=2&&Math.abs(n.rect1.y)<=2&&Math.abs(n.rect2.x)<=2&&Math.abs(n.rect2.y)<=2&&(i="none"),"none"==i&&n.parent.addChildAt(n,0),i=k.types[(k.types.indexOf(i)+(frame.shiftKey?-1:1)+k.types.length)%k.types.length],"none"==i&&(n.rect1.x=n.rect1.y=n.rect2.x=n.rect2.y=0,n.parent.addChild(n)),b[n.index][4]=i,n.rect1.color=t(i),n.rect2.color=t(i),o(),n.stage.update()}}),O.ball=I,O.other=B,B.ball=I,B.other=O,e.mobile()&&(I.expand(),O.expand(),B.expand()),E=[D,O,B,I,_?_[8]:s],b.push(E)}o(),z.on("mousedown",function(e){if(!k.lockControls)if(e.target.rect1){var t=e.target;t.startX=t.x,t.startY=t.y,t.rect1.startX=t.rect1.x,t.rect1.startY=t.rect1.y,t.rect2.startX=t.rect2.x,t.rect2.startY=t.rect2.y}else{var o=e.target,t=o.ball,n=t.index,i=s;if(zot(b[n][4])||(i=b[n][4]),"straight"==i){var r=o.other,a=r.x-t.x,l=r.y-t.y;r.stickLength=Math.sqrt(Math.pow(a,2)+Math.pow(l,2))}}}),z.on("pressmove",function(e){if(!k.lockControls){if(e.target.rect1){var t=e.target,n=t.x-t.startX,i=t.y-t.startY;t.rect1.x=t.rect1.startX+n,t.rect1.y=t.rect1.startY+i,t.rect2.x=t.rect2.startX+n,t.rect2.y=t.rect2.startY+i}else{var r=e.target,a=r.other,t=r.ball,l=t.index,d=s;if(zot(b[l][4])||(d=b[l][4]),"straight"==d||"mirror"==d){var c=r.x-t.x,u=r.y-t.y;if("mirror"==d)a.x=t.x-c,a.y=t.y-u;else{var h=Math.atan2(u,c),f=-a.stickLength*Math.cos(h+Math.PI),p=-a.stickLength*Math.sin(h+Math.PI);a.x=t.x-f,a.y=t.y-p}}}o()}}),z.on("pressup",function(e){if(!k.lockControls){if(e.target.rect1){var t=e.target,o=t.set,n=t.rect1,i=t.rect2;n.x-=t.x,n.y-=t.y,i.x-=t.x,i.y-=t.y,o.x+=t.x,o.y+=t.y,t.x=0,t.y=0}k.dispatchEvent("change")}}),k.changeControl=function(e,t,o,n,i,r,a,s){var l,d="index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY";if(l=zob(k.changeControl,arguments,d))return l;if(zot(e))for(var c=0;c<b.length;c++)k.changeControl(c,t,o,n,i,r,a,s);else{var u=b[e];u[4]=t,"none"==t?(zot(a)||(u[3].x=a),zot(s)||(u[3].y=s),u[1].pos(u[3].x,u[3].y),u[2].pos(u[3].x,u[3].y),u[3].parent.addChild(u[3])):(zot(o)||(u[1].x=o),zot(n)||(u[1].y=n),zot(i)||(u[2].x=i),zot(r)||(u[2].y=r),zot(a)||(u[3].x=a),zot(s)||(u[3].y=s),u[3].parent.addChildAt(u[3],0)),k.stage&&k.stage.update()}},k.update=function(){return o(),k},n.on("dblclick",function(){k.dblclick&&(k.controls=!k.controls,k.dblclickDrag&&(k.controls?k.noDrag():k.drag({currentTarget:!0})))}),k.controls=d,k.dblclick&&k.dblclickDrag&&!k.controls&&k.drag({currentTarget:!0}),k.on("click",function(){k.ctrlclick&&zimDefaultFrame.ctrlKey&&(k.clone().addTo(k.stage.stage).mov(100),k.stage.stage.update())}),k.hideControls=function(){return z.visible=!1,u.visible=!1,A=!1,k.stage&&k.stage.update(),k},d||k.hideControls(),k.showControls=function(){return z.visible=!0,u.visible=!0,A=!0,z.pos(n.x,n.y),u.pos(n.x,n.y),k.addChildAt(n,0),k.stage&&k.stage.update(),k},k.record=function(t){zot(t)&&(t=!1);for(var o,n,i=[],r=0;r<b.length;r++)n=b[r],o=[e.decimals(n[0].x),e.decimals(n[0].y),e.decimals(n[1].x),e.decimals(n[1].y),e.decimals(n[2].x),e.decimals(n[2].y),e.decimals(n[3].x),e.decimals(n[3].y)],n[4]&&"straight"!==n[4]&&o.push(n[4]),i.push(o);if(t){if(!a){var a=new e.Pane({container:k.stage,width:500,height:500,drag:!0}),s=new e.TextArea(frame,400,400);s.centerReg(a)}s.text=JSON.stringify(i),a.show()}return i},k.clone=function(){return k.cloneProps(new e.Blob(k.color,k.borderColor,k.borderWidth,k.record(),r,a,s,l,z.visible,c,k.dblclick,k.dblclickDrag,k.ctrlclick,p))}}}var g,z="color, borderColor, borderWidth, points, radius, controlLength, controlType, lockControlType, showControls, lockControls, dblclick, dblclickDrag, ctrlclick, dashed";if(g=zob(e.Blob,arguments,z,this))return g;z_d("53.5"),zot(r)&&(r=100),this.zimContainer_constructor(-r,-r,2*r,2*r),this.type="Blob",zot(p)&&(p=!1),!zot(o)&&zot(n)?n=1:!zot(n)&&zot(o)&&(o="black"),zot(t)&&(t=n>0?"rgba(0,0,0,0)":frame.green),zot(i)&&(i=4);var v="number"==typeof i?i:i.length;zot(a)&&(a=4*r/v),zot(s)&&(s="straight"),zot(l)&&(l=!1),zot(d)&&(d=!0),zot(c)&&(c=!1),zot(u)&&(u=!1),zot(h)&&(h=!0),zot(f)&&(f=!1),this.dblclick=u,this.dblclickDrag=h,this.lockControlType=l,this.ctrlclick=f;var b,y,w,x,C,T,k=this,j=(this.types=["mirror","straight","free","none"],t),M=o,S=n;m();var A=d;Object.defineProperty(k,"controls",{get:function(){return A},set:function(e){A=e,e?k.showControls():k.hideControls()}});var E=c;Object.defineProperty(k,"lockControls",{get:function(){return E},set:function(e){E=e,e?(k.sets.mouseChildren=!1,k.sets.mouseEnabled=!1):(k.sets.mouseChildren=!0,k.sets.mouseEnabled=!0)}}),k.lockControls=E,Object.defineProperty(k,"color",{get:function(){return j},set:function(e){zot(e)&&(e="black"),j=e,y.style=j}}),Object.defineProperty(k,"borderColor",{get:function(){return M},set:function(e){M=e,w?w.style=M:drawShape()}}),Object.defineProperty(k,"borderWidth",{get:function(){return S},set:function(e){e>0||(e=0),S=e,x&&0!=S?(x.width=S,p&&(C.segments=[20,10],C.offset=5)):drawShape()}}),Object.defineProperty(k,"points",{get:function(){return b},set:function(e){k.dispose(),i=e,k.shape&&(k.shape.graphics.clear(),k.sticks.graphics.clear(),k.sets.noDrag(),k.removeAllChildren(),delete k.shape,delete k.sticks,delete k.sets),m(),k.lockControls=E}}),this.dispose=function(){if(k.shape){for(var e=0;e<k.points.length;e++)k.points[e][1].removeAllEventListeners();for(e=0;e<T.length;e++)T[e].removeAllEventListeners();k.shape.removeAllEventListeners(),k.sets.removeAllEventListeners(),k.removeAllEventListeners()}}},e.extend(e.Blob,e.Container,"clone","zimContainer",!1),e.Label=function(o,n,i,r,a,s,l,d,c,u,h,f,p,m,g){function z(){var t,o=w.getBounds();if("top"==c?(w.y=n-n/6,x&&(x.y=n-n/6),t=0):"center"==c||"middle"==c?(t=-o.height/2,w.y=.3*n,x&&(x.y=.3*n)):t=-o.height,p){var i=p.getBounds();y.setBounds(i.x,i.y,i.width,i.height)}else y.setBounds(o.x,t,o.width,o.height),C.graphics.c().f("black").r(y.getBounds().x,y.getBounds().y,y.getBounds().width,y.getBounds().height);e.center(w,y),w.y+=n/32,x&&(e.center(x,y,0),x.y+=n/32)}var v,b="text, size, font, color, rollColor, shadowColor, shadowBlur, align, valign, lineWidth, lineHeight, fontOptions, backing, outlineColor, outlineWidth";if(v=zob(e.Label,arguments,b,this))return v;z_d("54"),this.zimContainer_constructor(),this.type="Label",zot(o)&&(o="LABEL"),""===o&&(o=" "),zot(n)&&(n=36),zot(i)&&(i="arial"),zot(r)&&(r="black"),zot(a)&&(a=r),zot(s)&&(s=-1),zot(l)&&(l=14),zot(d)&&(d="left"),zot(c)&&(c="top"),zot(f)&&(f=""),!zot(m)&&zot(g)&&(g=Math.round(.2*n)),!zot(g)&&zot(m)&&(m="#000000"),zot(g)&&(g=0);var y=this;this.mouseChildren=!1;var w=this.label=new createjs.Text(String(o),f+" "+n+"px "+i,r);if(w.textAlign=d,w.lineWidth=u,w.lineHeight=h,w.textBaseline="alphabetic",g>0){var x=this.outlineLabel=w.clone();x.color=m,x.outline=g,this.addChild(x)}if(-1!=s&&l>0&&(w.shadow=new createjs.Shadow(s,3,3,l)),this.addChild(w),zot(p)){var C=new createjs.Shape;y.hitArea=C}z(),zot(p)||(this.backing=p,e.center(p,this,0)),Object.defineProperty(y,"text",{get:function(){var e=" "==w.text?"":w.text;return e},set:function(e){(zot(e)||""===e)&&(e=" "),w.text=String(e),x&&(x.text=String(e)),z()}}),Object.defineProperty(y,"color",{get:function(){return r},set:function(t){a==r&&(a=t),r=t,w.color=r,!e.OPTIMIZE&&y.stage&&y.stage.update()}}),Object.defineProperty(y,"outlineColor",{get:function(){return m},set:function(t){m=t,x&&(x.color=m),!e.OPTIMIZE&&y.stage&&y.stage.update()}}),Object.defineProperty(y,"rollColor",{get:function(){return a},set:function(e){a=e}}),this._enabled=!0,Object.defineProperty(y,"enabled",{get:function(){return y._enabled},set:function(o){t(y,o),w.color=r,y.mouseChildren=!1,!e.OPTIMIZE&&y.stage&&y.stage.update()}}),this.showRollColor=function(e){zot(e)&&(e=!0),w.color=e?a:r,y.stage&&y.stage.update()},this.on("mouseover",function(){y.showRollColor()}),this.on("mouseout",function(){y.showRollColor(!1)}),this.clone=function(){return y.cloneProps(new e.Label(y.text,n,i,r,a,s,l,d,c,u,h,f,zot(p)?null:p.clone(),m,g))},this.dispose=function(){return y.removeAllEventListeners(),!0}},e.extend(e.Label,e.Container,"clone","zimContainer"),e.Button=function(o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b,y,w,x,C,T){function k(){Y=!0,zot(g)?O.color=a:zot(z)||(zot(b)&&D.toggled?(D.removeChild(w),D.addChildAt(x,0)):(D.removeChild(g),D.addChildAt(z,0))),zot(y)||(D.toggled?(D.removeChild(w),D.addChild(x)):(D.removeChild(b),D.addChild(y))),D.label.showRollColor(),D.stage&&D.stage.update()}function j(){Y=!1,D.off("mouseout",j),D.rollPersist?X||M():M()}function M(){zot(g)?O.color=r:zot(z)||(zot(b)&&D.toggled?(D.removeChild(x),D.addChildAt(w,0)):(D.removeChild(z),D.addChildAt(g,0))),zot(y)||(D.toggled?(D.removeChild(x),D.addChild(w)):(D.removeChild(y),D.addChild(b))),D.label.showRollColor(!1),D.stage&&D.stage.update()}function S(){"string"==typeof w?(D.text=D.toggled?w:W,!e.OPTIMIZE&&D.stage&&D.stage.update()):zot(b)?D.setBackings(D.toggled?w:g,D.toggled?x:z):D.setIcons(D.toggled?w:b,D.toggled?x:y)}function A(t,i,r,a,s){D.contains(D[t])?(D.removeChild(D[t]),D.addChildAt(r,s)):D.contains(D[i])&&(D.removeChild(D[i]),D.addChildAt(a,s)),D[t]=r,D[i]=a,D[t]&&(D[t].x=o/2,D[t].y=n/2),D[i]&&(D[i].x=o/2,D[i].y=n/2),!e.OPTIMIZE&&D.stage&&D.stage.update()}var E,P="width, height, label, color, rollColor, borderColor, borderWidth, corner, shadowColor, shadowBlur, hitPadding, gradient, gloss, flatBottom, backing, rollBacking, rollPersist, icon, rollIcon, toggle, rollToggle, toggleEvent, dashed";if(E=zob(e.Button,arguments,P,this))return E;z_d("55"),this.zimContainer_constructor(),this.type="Button",zot(o)&&(o=200),zot(n)&&(n=60),zot(r)&&(r="#C60"),zot(a)&&(a="#F93"),zot(s)&&(s=null),zot(l)&&(l=null),zot(d)&&(d=20),zot(c)&&(c="rgba(0,0,0,.3)"),zot(u)&&(u=14),zot(h)&&(h=0),zot(f)&&(f=0),zot(p)&&(p=0),zot(m)&&(m=!1),zot(i)&&(i=zot(b)?"PRESS":""),!zot(w)&&zot(C)&&(C=e.mobile()?"mousedown":"click"),("string"==typeof i||"number"==typeof i)&&(i=new e.Label(i,36,"arial","white",null,null,null,"center","middle")),zot(v)&&(v=!1),this.rollPersist=v,zot(T)&&(T=!1);var D=this;this.mouseChildren=!1,this.cursor="pointer",D.focus=!1;var O;zot(g)?O=new e.Rectangle(o,n,r,s,l,d,m,T):(O=g,O.x=o/2,O.y=n/2,zot(z)||(z.x=o/2,z.y=n/2,this.rollBacking=z)),this.addChild(O),this.backing=O,zot(b)||(this.addChild(b),b.x=o/2,b.y=n/2,this.icon=b),zot(y)||(this.rollIcon=y,y.x=o/2,y.y=n/2);var B=m?0:d;if(f>0&&zot(g)){var I=new createjs.Shape;I.graphics.lf(["rgba(255,255,255,"+f+")","rgba(0,0,0,"+f+")"],[0,1],0,0,0,n-l),I.graphics.rc(l/2,l/2,o-l,n-l,d,d,B,B),O.addChild(I)}if(p>0&&zot(g)){var L=new createjs.Shape;L.graphics.f("rgba(255,255,255,"+p+")"),L.graphics.rc(l/2,l/2,o-l,(n-l)/2,d,d,0,0),L.graphics.f("rgba(0,0,0,"+p+")"),L.graphics.rc(l/2,n/2,o-l,(n-l)/2,0,0,B,B),O.addChild(L)}if(h>0){var _=new createjs.Shape;_.graphics.f("#000").r(-h,-h,o+2*h,n+2*h),this.hitArea=_}-1!=c&&u>0&&(O.shadow=new createjs.Shadow(c,3,3,u),zot(z)||(z.shadow=new createjs.Shadow(c,3,3,u))),this.setBounds(0,0,o,n),this.addChild(i),i.center(this),i.y+=1,this.label=i;var X=!1;this.on("mousedown",function(){X=!0}),this.on("pressup",function(){X=!1,D.rollPersist&&!Y&&M()});var Y=!1;this.on("mouseover",k),this.on("mouseout",j),this.toggled=!1,this.toggleObj=w,this.rollToggle=x;var R,W=i.text;zot(w)||(R=this.on(C,function(){D.toggled=!D.toggled,S(D.toggled)})),Object.defineProperty(D,"text",{get:function(){var e=" "==i.text?"":i.text;return e},set:function(e){i.text=e,i.center(this),i.y+=1}}),Object.defineProperty(D,"color",{get:function(){return r},set:function(t){r=t,O.color?O.color=r:zon&&zog("zim.Button - backing has no color property"),!e.OPTIMIZE&&D.stage&&D.stage.update()}}),Object.defineProperty(D,"rollColor",{get:function(){return a},set:function(e){a=e}}),this._enabled=!0,Object.defineProperty(D,"enabled",{get:function(){return D._enabled},set:function(o){t(D,o),D.mouseChildren=!1,i.color=i.color,!e.OPTIMIZE&&D.stage&&D.stage.update()}}),this.setBackings=function(e,t){A("backing","rollBacking",e,t,0)},this.setIcons=function(e,t){A("icon","rollIcon",e,t,D.numChildren-1)},this.toggle=function(e){D.toggled=zot(e)?!D.toggled:e,S()},this.clone=function(){var t=new e.Button(o,n,i.clone(),r,a,s,l,d,c,u,h,f,p,m,zot(g)?null:g.clone(),zot(z)?null:z.clone(),v,zot(b)?null:b.clone(),zot(y)?null:y.clone(),zot(w)?null:"string"==typeof w?w:w.clone(),zot(x)?null:x.clone(),C,T);return D.cloneProps(t)},this.dispose=function(){return D.removeAllEventListeners(),D.removeChild(O),D.removeChild(z),D.removeChild(b),D.removeChild(D.label),D.label&&D.label.dispose(),O=null,z=null,b=null,D.label=null,!0
}},e.extend(e.Button,e.Container,"clone","zimContainer",!1),e.CheckBox=function(o,n,i,r,a,s){function l(){u=!u,h.setChecked(u),h.dispatchEvent("change")}var d,c="size, label, startChecked, color, margin, indicatorType";if(d=zob(e.CheckBox,arguments,c,this))return d;z_d("56"),this.zimContainer_constructor(),this.type="CheckBox",zot(o)&&(o=60),zot(n)&&(n=null),("string"==typeof n||"number"==typeof n)&&(n=new e.Label(n,5*o/6,"arial",r));var u=zot(i)?!1:i;zot(r)&&(r="#111"),zot(a)&&(a=10),"box"!=s&&"square"!=s&&"x"!=s&&(s="check"),this.setBounds(-a,-a,o+2*a,o+2*a);var h=this;this.cursor="pointer";var f=new createjs.Shape,p=f.graphics;p.f("rgba(255,255,255,.5)").r(0,0,o,o),p.s(r).ss(o/10).r(o/7,o/7,o-o/7*2,o-o/7*2),this.addChild(f);var m=o;n&&(this.addChild(n),n.x=1.3*o+a,n.y=o/8,this.label=n,this.setBounds(-a,-a,o+3*a+n.getBounds().width,Math.max(o+2*a,n.getBounds().height)),m=n.x+n.width);var g=new createjs.Shape;p=g.graphics,p.f("rgba(0,0,0,.01)").r(this.getBounds().x,this.getBounds().y,m+2*a,this.getBounds().height),this.hitArea=g;var z=new createjs.Shape,v=z.graphics,b="#000";"check"==s?v.f(b).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"):"box"==s||"square"==s?v.f(b).dr(-35,-35,70,70):v.f(b).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg");var y=95;z.setBounds(-y/2,-y/2,y,y);var w=o/(y+66);z.scaleX=z.scaleY=w,z.alpha=.9,z.x=o/2,z.y=o/2,u&&this.addChild(z),this.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",l),Object.defineProperty(h,"checked",{get:function(){return u},set:function(e){h.setChecked(e)}}),Object.defineProperty(h,"text",{get:function(){return n?n.text:void 0},set:function(t){n&&(n.text=t,!e.OPTIMIZE&&h.stage&&h.stage.update())}}),Object.defineProperty(z,"color",{get:function(){return b},set:function(t){u&&h.removeChild(z),z=new createjs.Shape,v=z.graphics,b=t,v.f(b).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"),z.scaleX=z.scaleY=w,z.alpha=.9,z.x=o/2,z.y=o/2,u&&h.addChild(z),!e.OPTIMIZE&&h.stage&&h.stage.update()}}),Object.defineProperty(h,"check",{get:function(){return z},set:function(){zog("ZIM CheckBox - check is read only")}}),this._enabled=!0,Object.defineProperty(h,"enabled",{get:function(){return h._enabled},set:function(e){t(h,e)}}),this.setChecked=function(t){zot(t)&&(t=!0),u=t,u?h.addChild(z):h.removeChild(z),!e.OPTIMIZE&&h.stage&&h.stage.update()},this.clone=function(){return h.cloneProps(new e.CheckBox(o,n.clone(),i,r,a,s))},this.dispose=function(){return h.removeAllEventListeners(),!0}},e.extend(e.CheckBox,e.Container,"clone","zimContainer",!1),e.RadioButtons=function(o,n,i,r,a,s,l){function d(e){var t=v.getChildIndex(e.target);l&&p.selectedIndex==t||(p.setSelected(t),p.dispatchEvent("change"))}function c(){for(var t,s=!1,l=n.length-1;l>=0;l--)t=n[l],t.selected&&t.selected===!0&&(s?t.selected="false":(s=!0,p.id=t.id));v.removeAllChildren(),p.buttons=[];for(var d,c=0,l=0;l<n.length;l++){if(t=n[l],"string"==typeof t||"number"==typeof t){var h={selected:!1,label:new e.Label(t,5*o/6,"arial",r)};t=h}(t.label&&"string"==typeof t.label||"number"==typeof t.label)&&(t.label=new e.Label(t.label,5*o/6,"arial",r)),p.labels.push(t.label),t.index=l,n[l]=t,d=u(t.selected,t.label),d.type="RadioButton",d.obj=t,t.selected&&(m=d.obj),v.addChild(d),i?(d.y=c,c+=d.getBounds().height+a):(d.x=c,c+=d.getBounds().width+a)}}function u(t,n){var i=new e.Container;p.buttons.push(i),i.mouseChildren=!1,i.setBounds(-s,-s,o+2*s,o+2*s);var a=new createjs.Shape,l=a.graphics;l.f("rgba(255,255,255,.5)").dc(o/2,o/2,o/1.85),l.s(r).ss(o/9).dc(o/2,o/2,o/2-o/2/5),i.addChild(a);var d=i.check=new e.Circle(o/5.2,"rgba(0,0,0,.7)");p.dots.push(d),d.mouseEnabled=!1,d.alpha=.95,d.regX=d.regY=-o/2;var c=o;n&&(i.addChild(n),n.x=i.getBounds().width,n.y=o/8,i.setBounds(-s,-s,o+2*s+n.getBounds().width,Math.max(o+2*s,n.getBounds().height)),c=n.x+n.width,i.text=n.text),t&&(i.addChild(d),p.label=n,p.label&&(p.text=n.text));var u=new createjs.Shape;return l=u.graphics,l.f("rgba(0,0,0,.01)").r(i.getBounds().x,i.getBounds().y,c+2*s,i.getBounds().height),i.hitArea=u,i}var h,f="size, buttons, vertical, color, spacing, margin, always";if(h=zob(e.RadioButtons,arguments,f,this))return h;z_d("57"),this.zimContainer_constructor(),this.type="RadioButtons",zot(o)&&(o=60),o=Math.max(5,o),zot(n)&&(n=["A","B","C"]),zot(i)&&(i=!0),zot(r)&&(r="#111"),zot(a)&&(a=i?.2*o:o),zot(s)&&(s=o/5);var p=this;this.cursor="pointer",this.labels=[],this.dots=[];var m;if("string"==typeof n){var g=n;n=[];for(var z=0;z<g.length;z++)n.push({label:g[z]})}var v=new e.Container;this.addChild(v),c();for(var b,y=0;y<v.numChildren;y++)b=v.getChildAt(y),b.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",d);this.getBounds()||this.setBounds(0,0,o,o),this.setBounds(-s,-s,this.getBounds().width+s,this.getBounds().height+s),this.setSelected=function(t){if(zot(t)&&(t=-1),-1==t||v.getChildAt(t)){for(var o,n=0;n<v.numChildren;n++)o=v.getChildAt(n),o.removeChild(o.check);if(t>=0){o=v.getChildAt(t);var i=-2;m&&(i=m.index),m=o.obj}-1==t||i==m.index?(m=null,p.id=null,p.label=null,p.text=""):(o.addChild(o.check),p.id=m.id,p.label=m.label,p.label&&(p.text=p.label.text)),!e.OPTIMIZE&&p.stage&&p.stage.update()}},Object.defineProperty(p,"selected",{get:function(){return m},set:function(){zog("ZIM RadioButton - selected is read only")}}),Object.defineProperty(p,"selectedIndex",{get:function(){return m?m.index:-1},set:function(e){var t=e;l&&p.selectedIndex==t||p.setSelected(t)}}),this._enabled=!0,Object.defineProperty(p,"enabled",{get:function(){return p._enabled},set:function(e){t(p,e)}}),this.clone=function(){for(var t=e.copy(n),d=0;d<t.length;d++)t[d].label=t[d].label.clone();return p.cloneProps(new e.RadioButtons(o,t,i,r,a,s,l))},this.dispose=function(){for(var e,t=0;t<v.numChildren;t++)e=v.getChildAt(t),e.removeAllEventListeners();return p.removeAllEventListeners(),!0}},e.extend(e.RadioButtons,e.Container,"clone","zimContainer",!1),e.Pane=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g){function z(e){v(),t.stage.update(),k.dispatchEvent("close"),e.stopImmediatePropagation()}function v(){function o(){t.removeChild(k);for(var o,n=0;n<k.numChildren;n++)if(o=k.getChildAt(n),o.constructor==e.TextArea||o.constructor==e.Loader){var i={obj:o,depth:k.getChildIndex(o)};j.add(o,i),k.removeChild(o)}if(e.OPTIMIZE||t.stage.update(),s&&(isNaN(k.resetX)||(k.x=k.resetX),isNaN(k.resetY)||(k.y=k.resetY)),k.zimAccessibility){var r=k.zimAccessibility;r.resize(k),E?E.focus():k.zimTabTag.nextSibling.focus(),setTimeout(function(){r.talk("Pane has been closed.")},50)}}g>0?k.animate({obj:{alpha:0},time:g,call:o}):o()}function b(e,i){return e=Math.max(o/2,Math.min(t.getBounds().width-o/2,e)),i=Math.max(n/2,Math.min(t.getBounds().height-n/2,i)),{x:e,y:i}}var y,w="container, width, height, label, color, drag, resets, modal, corner, backingAlpha, shadowColor, shadowBlur, center, displayClose, backing, fadeTime";if(y=zob(e.Pane,arguments,w,this))return y;z_d("58"),this.zimContainer_constructor(),this.type="Pane";var x="zim display - Pane(): Please pass in a reference to a container with bounds set as first parameter";if(zot(t)){if(!zimDefaultFrame)return void zog(x);t=zimDefaultFrame.stage}else{if(!t.getBounds)return void zog(x);if(zot(t.getStage))return void zog("zim display - Pane(): The container must have a stage property")}zot(o)&&(o=200),zot(n)&&(n=200),zot(i)&&(i=null),("string"==typeof i||"number"==typeof i)&&(i=new e.Label(i,40,"arial","black")),zot(r)&&(r="white"),zot(a)&&(a=!1),zot(s)&&(s=!0),zot(l)&&(l=!0),zot(d)&&(d=20),zot(c)&&(c=.14),zot(u)&&(u="rgba(0,0,0,.3)"),zot(h)&&(h=20),zot(f)&&(f=!0),zot(p)&&(p=!0),a&&(p=!1),zot(g)&&(g=0);var C=this.backdrop=new createjs.Shape,T=C.graphics;T.f("black"),T.drawRect(-5e3,-5e3,1e4,1e4),this.setBounds(-o/2,-n/2,o,n),C.alpha=c;var k=this;C.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",z);var j=new e.Dictionary(!0);C.on("mousedown",function(e){e.stopImmediatePropagation()}),l&&this.addChild(C);var M;if(zot(m)?(M=this.display=new createjs.Shape,T=M.graphics,T.f(r),T.rr(0,0,o,n,d),M.setBounds(0,0,o,n),M.regX=o/2,M.regY=n/2):M=m,p&&(M.cursor="pointer",M.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",z)),-1!=u&&h>0&&(M.shadow=new createjs.Shadow(u,8,8,h)),M.on("click",function(e){e.stopImmediatePropagation()}),this.resetX,this.resetY,a){M.cursor="pointer";var S,A;M.on("mousedown",function(e){isNaN(k.resetX)&&(k.resetX=k.x),isNaN(k.resetY)&&(k.resetY=k.y),S=e.stageX-k.x,A=e.stageY-k.y,M.cursor="pointer"}),M.on("pressmove",function(o){var n=b(o.stageX-S,o.stageY-A);k.x=n.x,k.y=n.y;for(var i,r=0;r<k.numChildren;r++)i=k.getChildAt(r),(i.constructor==e.TextArea||i.constructor==e.Loader)&&i.resize();t.stage.update()}),this.on("pressup",function(){M.cursor="pointer",t.stage.update()})}this.addChild(M),i&&(this.addChild(i),e.center(i,this),this.label=i,this.text=i.text,i.mouseEnabled=!1),Object.defineProperty(k,"text",{get:function(){var e=" "==i.text?"":i.text;return e},set:function(e){i.text=e}}),this.hide=function(){v()};var E;this.show=function(){f&&isNaN(k.resetX)&&(k.x=t.getBounds().width/2,k.y=t.getBounds().height/2),t.addChild(k);for(var e=0;e<j.length;e++)k.addChildAt(j.objects[e].obj,j.objects[e].depth);if(g>0?(k.alpha=0,k.animate({alpha:1},g)):t.stage&&t.stage.update(),k.zimAccessibility){var o=k.zimAccessibility;setTimeout(function(){o.activatedObject&&(E=o.activatedObject.zimTabTag)},50),o.resize(k),o.tabIndex=k.zimTabIndex}return k},this.toggle=function(){return t.contains(k)?k.hide():k.show(),k},this.clone=function(){var z=i.x,v=i.y,b=k.cloneProps(new e.Pane(t,o,n,i.clone(),r,a,s,l,d,c,u,h,f,p,zot(m)?m.clone():null,g));return b.label.x=z,b.label.y=v,b},this.dispose=function(){return M.removeAllEventListeners(),k.removeChild(M),M=null,!0}},e.extend(e.Pane,e.Container,"clone","zimContainer",!1),e.Window=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b,y,w,x,C){function T(){_.setBounds(0,0,t,o),X.graphics.f(n).rr(0,0,t,o,s),-1!=v&&b>0&&(X.shadow=new createjs.Shadow(v,8,8,b)),r>0&&F.graphics.c().s(i).ss(r).rr(0,0,t,o,s)}function k(){e.dragRect(W,new createjs.Rectangle(0,0,Q?-_.scrollXMax:0,J?-_.scrollYMax:0))}function j(){vt=W.y,C&&bt.immediate(vt),d&&M()}function M(){H&&(H.x=-W.x,H.y=-W.y),Q&&d&&(G.x=q.convert(W.x)),J&&d&&(U.y=K.convert(W.y))}function S(){B(_),l&&(e.drag({obj:W,currentTarget:!0,localBounds:!0,slide:p,slideDamp:m,slideSnap:l===!0||"auto"==l||"vertical"==l?g:!1}),W.getBounds()&&W.getBounds().width>0&&setTimeout(function(){k()},300))}function A(){e.Ticker.remove(j),rt=!1,Q&&f&&e.animate(G,{alpha:0},N.fadeTime),J&&f&&e.animate(U,{alpha:0},N.fadeTime)}function E(){lt=Date.now(),e.Ticker.add(D,W.stage)}function P(){mt||(_.dispatchEvent("hoverout"),mt=!0),e.Ticker.remove(D)}function D(){return W.stage?void(Math.abs(dt-W.stage.mouseX)>pt||Math.abs(ct-W.stage.mouseY)>pt?(mt||(_.dispatchEvent("hoverout"),mt=!0),lt=Date.now(),dt=W.stage.mouseX,ct=W.stage.mouseY):Date.now()-lt>ft&&((Math.abs(ut-W.stage.mouseX)>pt||Math.abs(ht-W.stage.mouseY)>pt)&&(_.contentMouse=W.globalToLocal(W.stage.mouseX,W.stage.mouseY),_.dispatchEvent("hoverover"),ut=W.stage.mouseX,ht=W.stage.mouseY,mt=!1),lt=Date.now())):(mt||(_.dispatchEvent("hoverout"),mt=!0),void e.Ticker.remove(D))}function O(e){if(J&&_.stage&&_.hitTestPoint(_.stage.mouseX,_.stage.mouseY)){zot(e)&&(e=event);var t=e.detail?-19*e.detail:e.wheelDelta;vt+=t,vt=Math.max(-_.scrollYMax,Math.min(0,vt)),C||(_.scrollY=vt,W.stage.update())}}function B(t){C&&!yt&&t.stage&&(yt=!0,bt=new e.Damp(_.scrollY,C),e.Ticker.add(function(){rt||zot(vt)||(_.scrollY=bt.convert(vt))},t.stage))}var I,L="width, height, color, borderColor, borderWidth, padding, corner, swipe, indicatorActive, indicatorDrag, indicatorColor, indicatorAlpha, indicatorFade, slide, slideDamp, slideSnap, interactive, shadowColor, shadowBlur, paddingHorizontal, paddingVertical, scrollWheel, damp";if(I=zob(e.Window,arguments,L,this))return I;z_d("58.1"),this.zimContainer_constructor(),this.type="Window",zot(t)&&(t=300),zot(o)&&(o=200),zot(n)&&(n="#333"),zot(i)&&(i="#999"),zot(r)&&(r=1),zot(a)&&(a=10),zot(s)&&(s=0),zot(l)&&(l=!0),zot(d)&&(d=!0),zot(c)&&(c=!1),zot(u)&&(u=i),zot(h)&&(h=.3),zot(f)&&(f=!0),c&&(f=!1),zot(p)&&(p=!0),zot(m)&&(m=.6),zot(g)&&(g="vertical"),zot(z)&&(z=!0),zot(v)&&(v="rgba(0,0,0,.3)"),zot(b)&&(b=20),zot(w)&&(w=a),zot(y)&&(y=a),zot(x)&&(x=!0);var _=this;this.scrollX=this.scrollY=this.scrollXMax=this.scrollYMax=0;var X=this.backing=new createjs.Shape;this.addChild(X);var Y=new createjs.Shape,R=Y.graphics;this.addChild(Y);var W=this.content=new e.Container;if(this.addChild(W),W.mask=Y,!z)var H=new createjs.Shape;if(r>0){var F=new createjs.Shape;this.addChild(F)}T();var N=this.indicator={};if(N.size=6,N.minSize=2*N.size,N.spacing=3.5+r/2,N.margin=0,N.corner=N.size/2,N.showTime=500,N.fadeTime=3e3,d){var G=this.hIndicator=new e.Shape,Z=G.graphics;G.alpha=h,this.addChild(G),c&&G.drag({localBounds:!0});var U=this.vIndicator=new e.Shape,V=U.graphics;U.alpha=h,this.addChild(U),c&&U.drag({localBounds:!0})}var q,K,Q,J,$,et,tt,ot,nt,it;this.update=function(){d&&(Z.clear(),V.clear()),$=d?N.size+2*N.spacing:0,et=W.getBounds().width,tt=W.getBounds().height,Q=et>t-y&&(l===!0||"auto"==l||"horizontal"==l),J=tt>o-w&&(l===!0||"auto"==l||"vertical"==l),_.scrollXMax=et+2*y-t+(J?$+N.margin:0),_.scrollYMax=tt+2*w-o+(Q?$+N.margin:0),R.clear();var n=r/2,i=r/2,a=t-(J&&d?N.size+2*N.spacing:0)-(J?0:r),h=o-(Q&&d?N.size+2*N.spacing:0)-(Q?0:r);R.f("rgba(0,0,0,.01)").rr(n,i,a,h,s),z||(H.graphics.c().f("red").dr(n,i,a,h),W.hitArea=H);var f=Math.max(s,Math.min(N.corner,N.spacing)),p=f+r/2,m=f+(J?$:0)+r/2,g=f+r/2,v=f+(Q?$:0)+r/2;if(Q&&d&&(indicatorLength=Math.max(N.minSize,(t-p-m)*(t-p-m)/(et+y+N.margin)),Z.f(u).rr(0,0,indicatorLength,N.size,N.corner),G.x=p,G.y=o-N.size-N.spacing,q=new e.Proportion(-_.scrollXMax,0,p,t-indicatorLength-m,-1),c)){G.setBounds(0,0,indicatorLength,N.size);var b=new createjs.Rectangle(p,G.y,t-indicatorLength-p-m,0);G.dragRect(b),G.proportion=new e.Proportion(b.x,b.x+b.width,0,-_.scrollXMax),G.off("pressmove",ot),ot=G.on("pressmove",function(){W.x=G.proportion.convert(G.x)})}if(J&&d&&(indicatorLength=Math.max(N.minSize,(o-g-v)*(o-g-v)/(tt+w+N.margin)),V.f(u).rr(0,0,N.size,indicatorLength,N.corner),U.x=t-N.size-N.spacing,U.y=g,K=new e.Proportion(-_.scrollYMax,0,g,o-indicatorLength-v,-1),c)){U.setBounds(0,0,N.size,indicatorLength);var b=new createjs.Rectangle(U.x,g,0,o-indicatorLength-g-v);U.dragRect(b),U.proportion=new e.Proportion(b.y,b.y+b.height,0,-_.scrollYMax),U.off("pressmove",nt),nt=U.on("pressmove",function(){vt=W.y=U.proportion.convert(U.y)})}M(),clearTimeout(it),it=setTimeout(function(){k()},300)},this.resize=function(e,n){zot(e)&&(e=t),zot(n)&&(n=o),t=e,o=n,T(),_.update(),vt=W.y,C&&bt.immediate(vt)},this.add=function(e){return B(e),e.getBounds()?(W.addChild(e),0==e.x&&(e.x=y),0==e.y&&(e.y=w),void _.update()):void zog("SwipeBox.add() - please add content with bounds set")},this.remove=function(e){W.removeChild(e),_.update()};var rt=!1;if(l&&W.on("mousedown",function(){rt||e.Ticker.add(j,W.stage),rt=!0,Q&&d&&f&&e.animate(G,{alpha:h},N.showTime),J&&d&&f&&e.animate(U,{alpha:h},N.showTime)}),this.on("added",S,null,!0),p?W.on("slidestop",A):W.on("mousedown",function(){W.stage.on("stagemouseup",A,null,!0)}),z){var at,st;W.on("mousedown",function(){at=W.stage.mouseX,st=Date.now()}),W.on("click",function(){Date.now()-st<600&&Math.abs(W.stage.mouseX-at)<5&&(_.contentMouse=W.globalToLocal(W.stage.mouseX,W.stage.mouseY),_.dispatchEvent("select"))}),W.on("mouseover",E),W.on("mouseout",P);var lt,dt=0,ct=0,ut=0,ht=0,ft=300,pt=2,mt=!1}var gt,zt,vt=_.scrollY;x&&(gt=window.addEventListener("mousewheel",O),zt=window.addEventListener("DOMMouseScroll",O));var bt,yt=!1;Object.defineProperty(_,"scrollX",{get:function(){return W.x},set:function(e){W.x=e,M()}}),Object.defineProperty(_,"scrollY",{get:function(){return W.y},set:function(e){W.y=e,M()}}),this.clone=function(x){zot(x)&&(x=!0);var C=_.cloneProps(new e.Window(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b,y,w));return x&&(_.content.cloneChildren(C.content),C.update()),C},this.dispose=function(){return x&&(window.removeEventListener("mousewheel",gt),window.removeEventListener("DOMMouseScroll",zt)),_.removeAllEventListeners(),G.off("pressmove",ot),U.off("pressmove",nt),W.removeAllEventListeners(),e.Ticker.remove(D),e.Ticker.remove(j),e.noDrag(W),!0}},e.extend(e.Window,e.Container,"clone","zimContainer",!1),e.Waiter=function(t,o,n,i,r,a,s,l){var d,c="container, speed, color, circleColor, corner, shadowColor, shadowBlur, fadeTime";if(d=zob(e.Waiter,arguments,c,this))return d;z_d("59"),this.zimContainer_constructor(),this.type="Waiter";var u="zim display - Waiter(): Please pass in a reference to a container with bounds set as first parameter";if(zot(t)){if(!zimDefaultFrame)return void zog(u);t=zimDefaultFrame.stage}else{if(!t.getBounds)return void zog(u);if(zot(t.getStage))return void zog("zim display - Waiter(): The container must have a stage property")}zot(o)&&(o=600),zot(n)&&(n="orange"),zot(i)&&(i="white"),zot(r)&&(r=16),zot(a)&&(a="rgba(0,0,0,.3)"),zot(s)&&(s=14),zot(l)&&(l=0);var h=40,f=3,p=.6*h/2,m=(h-2*p)/2,g=f*(2*p+m)+m;this.setBounds(-g/2,-h/2,g,h);var z=this,v=this.display=new createjs.Shape;this.addChild(v),v.setBounds(0,0,g,h),v.regX=g/2,v.regY=h/2;var b=v.graphics;b.f(n),b.rr(0,0,g,h,r),-1!=a&&s>0&&(v.shadow=new createjs.Shadow(a,3,3,s)),v.on("click",function(e){e.stopImmediatePropagation()});var y=new e.Container;this.addChild(y);for(var w,x=0;f>x;x++)w=new createjs.Shape,w.graphics.f(i).dc(0,0,p),w.x=(x-(f-1)/2)*(2*p+m),y.addChild(w),w.cache(-p,-p,2*p,2*p),w.alpha=0;this.hide=function(){function e(){if(z.parent&&z.parent.removeChild(z),t.stage.update(),z.zimAccessibility){var e=z.zimAccessibility;e.resize(z),C?C.focus():z.zimTabTag.nextSibling.focus(),setTimeout(function(){e.talk("Waiter has finished.")},50)}}l>0?z.animate({obj:{alpha:0},time:l,call:e}):e()};var C;this.show=function(){for(var e,n=0,i=0;i<y.numChildren;i++)z.alpha=0,createjs.Tween.get(z,{override:!0}).to({alpha:1},300),setTimeout(function(){e=y.getChildAt(n),createjs.Tween.get(e,{loop:!0}).to({alpha:1},o/f/2).wait(o/f).to({alpha:0},o/f).wait(o-o/f-o/f/2),n++},i*o/f);if(z.ticker=createjs.Ticker.on("tick",function(){t.stage.update()}),z.x=t.getBounds().width/2,z.y=t.getBounds().height/2,t.addChild(z),l>0&&(z.alpha=0,z.animate({alpha:1},l)),z.zimAccessibility){var r=z.zimAccessibility;setTimeout(function(){r.activatedObject&&(C=r.activatedObject.zimTabTag)},50),r.resize(z),r.talk(z.zimTabTag.getAttribute("aria-label"))}return z},this.clone=function(){return z.cloneProps(new e.Waiter(t,o,n,i,r,a,s,l))},this.dispose=function(){return z.ticker&&createjs.Ticker.off("tick",z.ticker),v.removeAllEventListeners(),z.removeChild(v),z.removeChild(y),v=null,y=null,!0}},e.extend(e.Waiter,e.Container,"clone","zimContainer",!1),e.Indicator=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p){function m(t){t>=n&&(t=-1);for(var o,a=0;n>a;a++)o=d&&t>a?i:r,a==t&&(o=i),x.getChildAt(a).color=o;b.zimAccessibility&&b.zimAccessibility.changeTitle(b),!e.OPTIMIZE&&b.stage&&b.stage.update()}var g,z="width, height, num, color, offColor, borderColor, backingColor, indicatorType, fill, scale, lightScale, press, shadowColor, shadowBlur";if(g=zob(e.Indicator,arguments,z,this))return g;z_d("60"),this.zimContainer_constructor(),this.type="Indicator",zot(t)&&(t=300),zot(o)&&(o=50),zot(n)&&(n=6),zot(i)&&(i="#f58e25"),zot(r)&&(r="#666"),0>r&&(r="rgba(0,0,0,.01)"),0>a&&(a=null),zot(s)&&(s=-1),zot(l)&&(l="dot"),zot(d)&&(d=!1),zot(c)&&(c=1),zot(u)&&(u=1),zot(h)&&(h=!1),zot(f)&&(f="rgba(0,0,0,.3)"),zot(p)&&(p=5);var v="mousedown"==e.ACTIONEVENT?"mousedown":"click",b=this;this.lights=[];{var y;new e.Container}if(-1!=s){var w=new e.Rectangle(t,o,s);this.addChild(w),this.backing=w}var x=this.lightsContainer=new e.Container;this.addChild(x);var C,T=.5*o,k=t/(n+1),j=new createjs.Shape;"square"==l||"box"==l?j.graphics.f("black").dr(-k/2/u+T/2,-o/2+T/2,k/u,o):j.graphics.f("black").dr(-k/2/u,-o/2,k/u,o);for(var M=0;n>M;M++)"square"==l||"box"==l?(C=new e.Rectangle(T,T,r,a),C.regX=C.width/2,C.regY=C.height/2):C=new e.Circle(T/2,r,a),this.lights.push(C),C.znum=M,C.scaleX=C.scaleY=u,C.hitArea=j,C.x=k+k*M,C.y=o/2,x.addChild(C);if(x.setBounds(0,0,t,o),x.regX=x.x=t/2,x.regY=x.y=o/2,this.addChild(x),-1!=f&&p>0&&(x.shadow=new createjs.Shadow(f,2,2,p)),h){x.cursor="pointer";{x.on(v,function(e){y!=e.target.znum&&(y=e.target.znum,m(y),b.dispatchEvent("change"))})}}x.scaleX=x.scaleY=c,Object.defineProperty(this,"selectedIndex",{get:function(){return y},set:function(t){y=Math.floor(t),y=e.constrain(y,-1,n-1),m(y)}}),Object.defineProperty(this,"num",{get:function(){return n},set:function(){zon&&zog("num is read only")}}),this.clone=function(){return b.cloneProps(new e.Indicator(t,o,n,i,r,a,s,l,d,c,u,h,f,p))},this.dispose=function(){return b.removeAllEventListeners(),!0}},e.extend(e.Indicator,e.Container,"clone","zimContainer",!1),e.Stepper=function(o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b,y,w,x,C,T,k,j,M,S,A,E,P){function D(e){var t=String(e).split(".")[1];return t=t?t.length:0}function O(t,o,n){if(m){gt=N.stage.mouseX,holdY=N.stage.mouseY,0==gt&&(gt=1),0==holdY&&(holdY=1),v||(b=1),zt=new e.Proportion(0,y,z,z*b);var i=z;tt=setTimeout(function(){function e(){ot=setTimeout(function(){var r=t;if(v){var a=Math.abs($-gt),l=Math.abs(et-holdY);s?(o||n||(a=0),n&&(l=0)):(o||n||(l=0),n&&(a=0)),(a>=10||l>=10)&&(a>l?(U=s?k:T,r=$-gt>0?1:-1,i=zt.convert(Math.abs(gt-$))):(U=s?T:k,r=et-holdY>0?1:-1,"number"==w&&(r*=-1),i=zt.convert(Math.abs(holdY-et))))}I(r),e()},i)}ht=!0,e()},g)}}function B(){N.zimAccessibility&&N.zimAccessibility.aria||(ht=!1,clearTimeout(tt),clearTimeout(ot))}function I(t){var n;if("number"==w){var i=H;H+=U*t*V,H=e.decimals(H,F),h?H>N.max?H=N.min:H<N.min&&(H=N.max):(H>N.max?(H=1==T?N.max:i,f&&(mt.cursor="default")):f&&(mt.cursor="pointer"),H<N.min&&(H=1==T?N.min:i))}else{if(n=W+t,h)n>o.length-1&&(n=0),0>n&&(n=o.length-1);else{if(n>o.length-1)return void(f&&(mt.cursor="default"));if(f&&(mt.cursor="pointer"),0>n)return}W=n}L("number"==w?H:o[W],"number"==w?H:W),N.dispatchEvent("change")}function L(t,n){W=n,f&&("number"==w&&0!=t&&F>0&&(t=e.decimals(t,F,!0)),a.text=t,a.x=mt.x+mt.getBounds().width/2,a.y=mt.y+(mt.getBounds().height-a.getBounds().height)/2),l&&(it.alpha=1,rt.color=i,it.cursor="pointer",at.alpha=1,st.color=i,at.cursor="pointer",h||("number"==w?(W==N.min&&(V>0?_():X()),W==N.max&&(V>0?X():_())):(0==W&&(s?X():_()),W==o.length-1&&(s?_():X())))),at&&!e.OPTIMIZE&&at.stage?at.stage.update():a&&!e.OPTIMIZE&&a.stage&&a.stage.update(),N.zimAccessibility&&N.zimAccessibility.changeTitle(N,null,!0)}function _(){l&&(it.alpha=.8,rt.color="#aaa",it.cursor="default")}function X(){l&&(at.alpha=.8,st.color="#aaa",at.cursor="default")}var Y,R="list, width, color, borderColor, label, vertical, arrows, corner, shadowColor, shadowBlur, loop, display, press, hold, holdDelay, holdSpeed, drag, dragSensitivity, dragRange, stepperType, min, max, step, step2, arrows2, arrows2Scale, keyEnabled, keyArrows, rightForward, downForward";if(Y=zob(e.Stepper,arguments,R,this))return Y;z_d("61"),this.zimContainer_constructor(),this.type="Stepper",zot(o)&&(o=[0,1,2,3,4,5,6,7,8,9]),zot(n)&&(n=200),zot(i)&&(i="white"),zot(r)&&(r=null),zot(a)&&(a=""),("string"==typeof a||"number"==typeof a)&&(a=new e.Label(a,64,"arial","#555",null,null,null,"center")),zot(s)&&(s=!1),zot(l)&&(l=!0),zot(d)&&(d=16),zot(c)&&(c="rgba(0,0,0,.3)"),zot(u)&&(u=14),zot(h)&&(h=!1),zot(f)&&(f=!0),zot(p)&&(p=!0),zot(m)&&(m=!0),zot(g)&&(g=400),zot(z)&&(z=200),zot(v)&&(v=!0),(zot(b)||0>=b)&&(b=.1),zot(y)&&(y=200),zot(w)&&(w="list"),zot(x)&&(x=0),zot(C)&&(C=100),zot(T)&&(T=1),zot(k)&&(k=T),zot(j)&&k!=T&&"number"==w&&(j=!0),zot(M)&&(M=.5),zot(S)&&(S=!0),zot(A)&&(A=!0),zot(E)&&(E=!0),zot(P)&&(P="number"==w?!1:!0);var W,H,F,N=this,G=100,Z=G/4,U=T,V=1;if("number"==w){if(x=Number(x),C=Number(C),0/0==x&&(x=0),0/0==C&&(C=100),x>C){V=-1;var q=C;C=x,x=q,H=C}else H=x;this.min=x,this.max=C,0>x&&C>0&&(H=0),T=Math.abs(T),F=Math.max(D(T),D(k))}else if("letter"==w){o="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),"string"!=typeof x&&(x="A"),"string"!=typeof C&&(C="Z"),x=x.substr(0,1).toUpperCase(),C=C.substr(0,1).toUpperCase();var K=o.indexOf(x);0>K&&(x="A",K=0);var Q=o.indexOf(C);0>Q&&(C="Z",Q=o.length),K>Q&&(o.reverse(),K=o.length-1-K,Q=o.length-1-Q),o=o.splice(K,Q-K+1)}else w="list";var J,$=0,et=0;v&&this.on("mousedown",function(){N.zimAccessibility&&N.zimAccessibility.aria||(this.stage.mouseMoveOutside=!0,J=this.stage.on("stagemousemove",function(e){$=e.rawX,et=e.rawY}))},null,!0),this.label=a,a.mouseChildren=!1,a.mouseEnabled=!1;var tt,ot,nt,it,rt,at,st,lt,dt,ct,ut,ht=!1,ft=!1;if(l||j){var pt=new createjs.Shape;pt.graphics.f("rgba(255,255,255,.11)").r(0,0,1.5*G,1.5*G),pt.regX=1.5*G/2,pt.regY=1.5*G/2+Z/2}if(l&&(it=this.prev=new e.Container,this.addChild(it),it.hitArea=pt,rt=this.arrowPrev=new e.Triangle(G,.8*G,.8*G,i),-1!=c&&u>0&&(it.shadow=new createjs.Shadow(c,3,3,u)),it.addChild(rt),it.cursor="pointer",it.on("mousedown",function(){if(!N.zimAccessibility||!N.zimAccessibility.aria){U=T;var e=s?P?1:-1:E?-1:1;I(e),O(e)}}),m&&it.on("pressup",B),s?(it.rotation=180,it.x=n/2,it.y=f?it.height+Z+G+it.height/2+Z:2*it.height):(it.rotation=-90,it.x=it.height/2,it.y=it.width/2)),f){var mt=this.textBox=new createjs.Shape;mt.cursor="pointer",this.addChild(mt),mt.setBounds(0,0,n,G),null!=r&&mt.graphics.s(r).ss(1.5),mt.graphics.f(i).rr(0,0,n,G,d),-1!=c&&u>0&&(mt.shadow=new createjs.Shadow(c,3,3,u)),l&&(s?l&&(mt.y=rt.height+Z):l&&(mt.x=rt.height+Z)),this.addChild(a),o.length>0&&(W=0,a.text=o[W]),a.x=50+mt.x+mt.getBounds().width/2,a.y=mt.y+(mt.getBounds().height-a.getBounds().height)/2,mt.on("mousedown",function(){N.zimAccessibility&&N.zimAccessibility.aria||(p&&I(1),O(1,!0),"number"==w&&(clearTimeout(nt),ft=!0,nt=setTimeout(function(){ft=!1},200)))}),mt.on("pressup",function(){N.zimAccessibility&&N.zimAccessibility.aria||ft&&(H=Math.round(H),L(H,H),N.dispatchEvent("change"))})}else o.length>0&&(W=0);l&&(at=this.next=new e.Container,this.addChild(at),at.hitArea=pt.clone(),st=this.arrowNext=new e.Triangle(G,.8*G,.8*G,i),-1!=c&&u>0&&(at.shadow=new createjs.Shadow(c,3,3,u)),at.addChild(st),at.cursor="pointer",at.on("mousedown",function(){if(!N.zimAccessibility||!N.zimAccessibility.aria){U=T;var e=s?P?-1:1:E?1:-1;I(e),O(e)}}),m&&at.on("pressup",B),s?(at.rotation=0,at.x=n/2,at.y=at.getBounds().height/2):(at.rotation=90,at.x=f?mt.x+mt.getBounds().width+at.getBounds().height/2+Z:it.x+it.getBounds().width,at.y=at.getBounds().width/2));var gt,zt;m&&f&&mt.on("pressup",B),j&&(lt=this.prev2=new e.Container,lt.hitArea=pt.clone(),dt=this.arrowPrev2=new e.Triangle(G,.8*G,.8*G,"rgba(0,0,0,.2)",i,2),lt.addChild(dt),lt.cursor="pointer",lt.scale(M),lt.alpha=.5,lt.on("mousedown",function(){if(!N.zimAccessibility||!N.zimAccessibility.aria){U=k;var e=s?E?-1:1:P?1:-1;I(e),O(e,null,!0)}}),m&&lt.on("pressup",B),ct=this.next2=new e.Container,ct.hitArea=pt.clone(),ut=this.arrowNext2=new e.Triangle(G,.8*G,.8*G,"rgba(0,0,0,.2)",i,2),ct.addChild(ut),ct.cursor="pointer",ct.scale(M),ct.alpha=.5,ct.on("mousedown",function(){if(!N.zimAccessibility||!N.zimAccessibility.aria){U=k;var e=s?E?1:-1:P?-1:1;I(e),O(e,null,!0)}}),m&&ct.on("pressup",B),s?(lt.y=this.height/2,lt.x=-lt.width/2-Z*Math.max(.2,Math.min(1,M)),lt.rotation=270,ct.y=this.height/2,ct.x=this.width+ct.width/2+Z*Math.max(.2,Math.min(1,M)),ct.rotation=90):(ct.x=this.width/2,ct.y=-ct.height/2-Z*Math.max(.2,Math.min(1,M)),ct.rotation=0,lt.x=this.width/2,lt.y=this.height+lt.height/2+Z*Math.max(.2,Math.min(1,M)),lt.rotation=180),this.addChild(lt,ct)),L("number"==w?H:o[W],"number"==w?H:W),Object.defineProperty(this,"selectedIndex",{get:function(){return"number"==w?N.stepperArray.indexOf(N.currentValue):W},set:function(e){zot(e)||(e=Math.min(o.length-1,Math.max(0,e)),W=e,L(o[W],W))}}),Object.defineProperty(this,"currentValue",{get:function(){return"number"==w?H:o[W]},set:function(e){if(!zot(e))if("number"==w){if(e=Number(e),N.max>N.min){if(e>N.max||e<N.min)return}else if(e<N.max||e>N.min)return;H=e,L(H,H)}else{if(!(o.indexOf(e)>-1))return;if(e=o.indexOf(e),e==N.selectedIndex)return;W=e,L(o[W],W)}}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return N.currentValue},set:function(e){String(e)!=String(N.currentValue)&&(N.currentValue=e,N.dispatchEvent("change"))}}),Object.defineProperty(this,"loop",{get:function(){return h},set:function(e){h=e,"number"==w?L(H,H):L(o[N.selectedIndex],N.selectedIndex)}}),Object.defineProperty(this,"stepperArray",{get:function(){if("number"==w){o=[];for(var e=N.min;e<=N.max;e+=Math.min(T,k))o.push(e)}return o},set:function(e){o=e,N.selectedIndex=N.selectedIndex}}),this._enabled=!0,Object.defineProperty(N,"enabled",{get:function(){return N._enabled},set:function(n){t(N,n),n?("number"==w?L(H,H):L(o[N.selectedIndex],N.selectedIndex),window.addEventListener("keydown",N.keyDownEvent)):(_(),X(),window.removeEventListener("keydown",N.keyDownEvent),f&&(a.mouseChildren=!1),f&&(a.mouseEnabled=!1)),at&&!e.OPTIMIZE&&at.stage?at.stage.update():a&&!e.OPTIMIZE&&a.stage&&a.stage.update()}});var vt=!1,bt=!1,yt=!1;this.on("mousedown",function(){N.zimAccessibility&&N.zimAccessibility.aria||(N.focus=!0,vt=!0,bt=!1,yt=!1)}),this.keyDownEvent=function(e){if(N.focus){e||(e=event);var t=e.keyCode;if(A&&t>=37&&40>=t){var o=P?40:38,n=E?39:37,i=P?38:40,r=E?37:39;t==o||t==n?(U=s&&t==o||!s&&t==n?T:k,I(1)):(t==i||t==r)&&(U=s&&t==i||!s&&t==r?T:k,I(-1))}if(S)if("number"==w){var l;!e.shiftKey&&t>=48&&57>=t?l=t-48:t>=96&&105>=t?l=t-96:190==t?bt=!0:173==t||189==t?(N.currentValue=-1*N.currentValue,N.dispatchEvent("change"),yt=!yt):46==t&&(vt=!0,bt=!1),vt&&!zot(l)?(bt&&(l/=10),yt&&(l*=-1),N.currentValue=l,vt=!1,N.dispatchEvent("change")):zot(l)||(bt&&(l=String(l/10).substr(1)),N.currentValue=Number(Math.floor(Number(a.text))+String(l)),N.dispatchEvent("change"))}else{var d=N.currentValue;N.currentValue=String.fromCharCode(e.keyCode),N.currentValue!=d&&N.dispatchEvent("change")}}},window.addEventListener("keydown",this.keyDownEvent),this.next=function(){I(1)},this.prev=function(){I(-1)},this.clone=function(){return N.cloneProps(new e.Stepper(o,n,i,r,a.clone(),s,l,d,c,u,h,f,p,m,g,z,v,b,y,w,x,C,T,k,j,M,S,A,E,P))},this.dispose=function(){return N.removeAllEventListeners(),window.removeEventListener("keydown",N.keyDownEvent),N.stage&&N.stage.off(J),!0}},e.zut=function(t){return zot(t)||!t.key?!0:void e.async("http://zimjs.com/code/gamdata.php?id="+t.key+"&player="+t.player+"&score="+t.score+"&reverse="+t.info.reverse+"&total="+t.info.total+"&allowZero="+t.info.allowZero,t.info.type)},e.extend(e.Stepper,e.Container,"clone","zimContainer",!1),e.Slider=function(o,n,i,r,a,s,l,d,c,u,h,f){function p(e){return 0==i?e:Math.round(e/i)*i}function m(t){var i=T.globalToLocal(t.stageX,t.stageY),a=z(i.x-_,i.y-X,S);d?(r.x=a.x,k=p((a.y-S.y)/S.height*(o-n)),r.y=S.y+k*S.height/(o-n),k+=n,r.y!=j&&T.dispatchEvent("change"),j=r.y):(k=p((a.x-S.x)/S.width*(n-o)),r.x=S.x+k*S.width/(n-o),k+=o,r.y=a.y,r.x!=j&&T.dispatchEvent("change"),j=r.x),g(),!e.OPTIMIZE&&T.stage&&T.stage.update()}function g(){T.zimAccessibility&&T.zimAccessibility.changeTitle(T,null,!0)}function z(e,t,o){return e=Math.max(o.x,Math.min(o.x+o.width,e)),t=Math.max(o.y,Math.min(o.y+o.height,t)),{x:e,y:t}}var v,b="min, max, step, button, barLength, barWidth, barColor, vertical, useTicks, inside, keyArrows, keyArrowsStep";if(v=zob(e.Slider,arguments,b,this))return v;if(z_d("62"),this.zimContainer_constructor(),this.type="Slider",zot(o)&&(o=0),zot(n)&&(n=10),n-o==0)return void zog("ZIM Slider range must not be 0");if(zot(i)&&(i=0),zot(a)&&(a=300),zot(s)&&(s=3),zot(l)&&(l="#666"),zot(d)&&(d=!1),zot(c)&&(c=!1),zot(u)&&(u=!1),zot(h)&&(h=!0),zot(f)&&(f=(n-o)/100),zot(r)){var y=30,w=40;d&&(y=50,w=40),r=new e.Button(y,w,"","#fff","#ddd","#666",1,0,null,null,30)}r.rollPersist=!0;var x,C;d?(x=r.width,u?(C=a,this.setBounds(0,0,x,C)):(C=a+r.height,this.setBounds(-r.width/2,-r.height/2,x,C))):(C=r.height,u?(x=a,this.setBounds(0,0,x,C)):(x=a+r.width,this.setBounds(-r.width/2,-r.height/2,x,C)));var T=this,k=o,j=0;this.button=r,this.cursor="pointer";var M,S,A,E,P;
if(c&&0!=i){E=this.ticks=new e.Shape,this.addChild(E),P=E.graphics,P.ss(1).s(l);var D=Math.round((n-o)/i),O=(n-o)/D;if(O!=i&&zon&&zog("zim.Slider() : non-divisible step ("+i+") adjusted"),i=O,u)var B=(a-(d?r.height:r.width))/D;else var B=a/D}if(d){var I=u?r.height/2:0;if(c&&0!=i){for(var L=0;D>=L;L++)P.mt(0,I+B*L).lt(20,I+B*L);E.x=10}M=this.bar=new e.Rectangle(s,a,l),M.expand(20,0),this.addChild(M),e.centerReg(r),this.addChild(r),A=M.getBounds(),S=new createjs.Rectangle(A.width/2,A.y+I,0,A.height-2*I)}else{var I=u?r.width/2:0;if(c&&0!=i){for(var L=0;D>=L;L++)P.mt(I+B*L,0).lt(I+B*L,-20);E.y=-10}M=this.bar=new e.Rectangle(a,s,l),M.expand(0,20),this.addChild(M),e.centerReg(r),this.addChild(r),A=M.getBounds(),S=new createjs.Rectangle(A.x+I,A.height/2,A.width-2*I,0)}r.x=S.x,r.y=S.y;var _,X;r.on("mousedown",function(e){T.focus=!0;var t=T.globalToLocal(e.stageX,e.stageY);_=t.x-r.x,X=t.y-r.y,T.stage&&(T.stage.mouseMoveOutside=!0)}),r.on("pressmove",function(e){m(e)}),M.on("mousedown",function(e){_=0,X=0,T.zimAccessibility&&T.zimAccessibility.aria||m(e)}),Object.defineProperty(this,"currentValue",{get:function(){return k},set:function(t){zot(t)||(n>o?(o>t&&(t=o),t>n&&(t=n)):(t>o&&(t=o),n>t&&(t=n)),k=t=p(t),d?(r.y=(t-n)/(o-n)*S.height+I,j=r.y):(r.x=(t-o)/(n-o)*S.width+I,j=r.x),g(),!e.OPTIMIZE&&T.stage&&T.stage.update())}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return k},set:function(e){e!=T.currentValue&&(T.currentValue=e,T.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return o},set:function(){zon&&zog("min is read only")}}),Object.defineProperty(this,"max",{get:function(){return n},set:function(){zon&&zog("max is read only")}}),Object.defineProperty(this,"step",{get:function(){return i},set:function(){zon&&zog("step is read only")}}),this.keyDownEvent=function(e){(T.focus||!T.zimAccessibility&&h)&&(37==e.keyCode||40==e.keyCode?T.currentValueEvent-=i>0?i:f:(38==e.keyCode||39==e.keyCode)&&(T.currentValueEvent+=i>0?i:f))},window.addEventListener("keydown",this.keyDownEvent),this._enabled=!0,Object.defineProperty(T,"enabled",{get:function(){return T._enabled},set:function(e){t(T,e),e?window.addEventListener("keydown",T.keyDownEvent):window.removeEventListener("keydown",T.keyDownEvent)}}),this.clone=function(){return T.cloneProps(new e.Slider(o,n,i,r.clone(),a,s,l,d,c,u,h,f))},this.dispose=function(){return window.removeEventListener("keydown",T.keyDownEvent),r.removeAllEventListeners(),!0}},e.extend(e.Slider,e.Container,"clone","zimContainer",!1),e.Dial=function(o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z){function v(e){return 0==i?e:Math.round(e/i)*i}function b(){C.zimAccessibility&&C.zimAccessibility.changeTitle(C,null,!0)}function y(t){var r;0>t&&(t+=360),t%=360,0!=i?(t=Math.min(t,360-360/(D+1)),r=v(t/(360-360/(D+1))*(n-o)),I.rotation=r*(360-360/(D+1))/(n-o)):(I.rotation=t,r=t/360*(n-o)),r!=j&&(j=r,k=r+o,C.dispatchEvent("change"),!e.OPTIMIZE&&C.stage&&C.stage.update()),b()}var w,x="min, max, step, width, color, indicatorColor, indicatorScale, indicatorType, innerCircle, innerScale, useTicks, innerTicks, tickColor, limit, keyArrows, keyArrowsStep";if(w=zob(e.Dial,arguments,x,this))return w;if(z_d("63"),this.zimContainer_constructor(),this.type="Dial",zot(o)&&(o=0),zot(n)&&(n=10),n-o==0)return void zog("ZIM Dial range must not be 0");zot(i)&&(i=1),zot(r)&&(r=100),zot(a)&&(a="#666"),zot(s)&&(s="#222"),zot(l)&&(l=1),zot(d)&&(d="arrow"),zot(c)&&(c=!0),zot(u)&&(u=.5),zot(h)&&(h=!0),zot(f)&&(f=!1),zot(p)&&(p=s),zot(m)&&(m=!0),zot(g)&&(g=!0),zot(z)&&(z=(n-o)/100);var C=this;this.cursor="pointer";var T=r/2,k=o,j=0,M=this.backing=new e.Circle(T,a);if(this.addChild(M),c){var S=f?"rgba(0,0,0,.2)":"rgba(0,0,0,.1)";("black"==a||"#000"==a||"#000000"==a||"#111"==a||"#111111"==a)&&(S="#222");var A=this.inner=new e.Circle(T*u,S);if(this.addChild(A),!f){var E="rgba(0,0,0,.1)",P=this.inner2=new e.Circle(T*(u-.1),E);this.addChild(P)}}var D=Math.abs(n-o)/i;if(h&&0!=i){ticks=this.ticks=new e.Container,this.addChild(ticks);for(var O,B=0;D+1>B;B++){var O=new e.Rectangle(1,.2*T,p);O.regY=T*(f?u-.05:1.28),O.regX=.5,O.rotation=360/(D+1)*B,ticks.addChild(O)}}if(this.setBounds(-T,-T,r,r),"dot"==d||"circle"==d){var I=this.indicator=new e.Container,L=this.indicatorShape=new e.Circle(.19*T,s);I.addChild(L),e.scale(I,l),I.regY=T-I.getBounds().width*l/2-.07*T}else if("line"==d||"rectangle"==d){var I=this.indicator=new e.Container,L=this.indicatorShape=new e.Rectangle(.1*T,.3*T,s);I.addChild(L),e.scale(I,l),I.regY=T-I.getBounds().width*l/2-.07*T,I.regX=.05*T}else{var I=this.indicator=new e.Container,L=this.indicatorShape=new e.Triangle(.4*T,.4*T,.4*T,s);I.addChild(L),e.scale(I,l),I.regY=T-I.getBounds().height*l*(f?.85:.75),f&&(L.rotation=180)}I.regY/=l,this.addChild(I);var _,X,Y,R,W=0;this.on("mousedown",function(){if(!C.zimAccessibility||!C.zimAccessibility.aria){_=I.rotation;var e=C.parent.globalToLocal(C.stage.mouseX,C.stage.mouseY),t=e.x-C.x,o=C.y-e.y;X=180*Math.atan2(t,o)/Math.PI;var n=(new Date).getTime();Y=C.on("pressmove",function(){e=C.parent.globalToLocal(C.stage.mouseX,C.stage.mouseY),t=e.x-C.x,o=C.y-e.y;var n=_+180*Math.atan2(t,o)/Math.PI-X;m&&(0>n&&(n+=360),n%=360,Math.abs(n-W)>180)||(W=n,y(n))}),R=this.on("pressup",function(){var i=(new Date).getTime()-n;if(200>i){e=C.parent.globalToLocal(C.stage.mouseX,C.stage.mouseY),t=e.x-C.x,o=C.y-e.y;var r=180*Math.atan2(t,o)/Math.PI;y(r)}_=I.rotation,C.off("pressmove",Y),C.off("pressup",R)})}}),Object.defineProperty(this,"currentValue",{get:function(){return k},set:function(t){zot(t)||(n>o?(o>t&&(t=o),t>n&&(t=n)):(t>o&&(t=o),n>t&&(t=n)),k=t,t=v(t),I.rotation=0!=i?(t-o)*(360-360/(D+1))/(n-o):360*(t-o)/(n-o),j=t-o,W=I.rotation,b(),!e.OPTIMIZE&&C.stage&&C.stage.update())}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return k},set:function(e){e!=C.currentValue&&(C.currentValue=e,C.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return o},set:function(){zon&&zog("min is read only")}}),Object.defineProperty(this,"max",{get:function(){return n},set:function(){zon&&zog("max is read only")}}),Object.defineProperty(this,"step",{get:function(){return i},set:function(){zon&&zog("step is read only")}}),this.keyDownEvent=function(e){(C.focus||!C.zimAccessibility&&g)&&(37==e.keyCode||40==e.keyCode?C.currentValueEvent-=i>0?i:z:(38==e.keyCode||39==e.keyCode)&&(C.currentValueEvent+=i>0?i:z))},window.addEventListener("keydown",this.keyDownEvent),this._enabled=!0,Object.defineProperty(C,"enabled",{get:function(){return C._enabled},set:function(e){t(C,e),e?window.addEventListener("keydown",C.keyDownEvent):window.removeEventListener("keydown",C.keyDownEvent)}}),this.clone=function(){return C.cloneProps(new e.Dial(o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z))},this.dispose=function(){return C.removeAllEventListeners(),!0}},e.extend(e.Dial,e.Container,"clone","zimContainer",!1),e.Tabs=function(o,n,i,r,a,s,l,d,c,u,h,f,p,m){function g(e){var t=i[x];t&&(T[x].color=zot(t.offColor)?s:t.offColor,d||(T[x].enabled=!0)),x=e,t=i[x],t&&(T[x].color=zot(t.color)?r:t.color,d||(T[x].enabled=!1))}var z,v="width, height, tabs, color, rollColor, offColor, spacing, currentEnabled, corner, labelColor, flatBottom, keyEnabled, gradient, gloss";if(z=zob(e.Tabs,arguments,v,this))return z;z_d("65"),this.zimContainer_constructor(),this.type="Tabs",zot(o)&&(o=240),zot(n)&&(n=60),(zot(i)||i.length<=0)&&(i=[{label:1},{label:2},{label:3},{label:4}]),zot(r)&&(r="#333"),zot(a)&&(a="#555"),zot(s)&&(s="#777"),zot(d)&&(d=!1),zot(l)&&(l=1),zot(c)&&(c=0),zot(u)&&(u="white"),zot(h)&&(h=!0),zot(f)&&(f=!0);var b=this;this.keyEnabled=f;var y,w,x=0,C=[],T=[],k=i.length,j=(o-l*(k-1))/k;if("number"==typeof i[0]||"string"==typeof i[0])for(var M=0;M<i.length;M++)i[M]={label:String(null!=i[M])?i[M]:"1"};for(var w,S,A=0,E=0,M=0;M<i.length;M++)w=i[M],zot(w.width)&&E++,A+=zot(w.width)?j:w.width;if(A>o-l*(k-1))for(M=0;M<i.length;M++)w=i[M],w.width=(o-l*(k-1))/A*(zot(w.width)?j:w.width);else if(Math.round(A)<Math.round(o-l*(k-1)))if(E>0)for(S=(k*j-(A-E*j))/E,M=0;M<i.length;M++)w=i[M],w.width=zot(w.width)?S:w.width;else zon&&zog("ZIM Tabs - total less than width"),o=A+l*(k-1);var P,D=0;for(M=0;M<i.length;M++)w=i[M],zot(w.label)&&(w.label=" "),P=0==M?zot(w.color)?r:w.color:zot(w.offColor)?s:w.offColor,("string"==typeof w.label||"number"==typeof w.label)&&(w.label=new e.Label(w.label,n/2,"arial",u)),y=new e.Button(zot(w.width)?j:w.width,n,w.label,P,zot(w.rollColor)?a:w.rollColor,null,null,c,-1,null,null,p,m,h),y.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",function(t){g(t.currentTarget.znum),b.dispatchEvent("change"),!e.OPTIMIZE&&b.stage&&b.stage.update()}),y.znum=M,w.label.znum=M,y.type="TabsButton",C.push(w.label),T.push(y),this.addChild(y),y.x=D,D=y.x+y.width+l,0!=M||d||(y.enabled=!1);window.addEventListener("keydown",function(t){if(b.keyEnabled&&!b.zimAccessibility&&9==t.keyCode){var o=x;g(t.shiftKey?--o<0?i.length-1:o:++o>i.length-1?0:o),b.dispatchEvent("change"),!e.OPTIMIZE&&b.stage&&b.stage.update(),t.preventDefault()}}),Object.defineProperty(this,"selected",{get:function(){return T[x]},set:function(){zon&&zog("selected is read only - try selectedIndex")}}),Object.defineProperty(this,"selectedIndex",{get:function(){return x},set:function(t){g(t),!e.OPTIMIZE&&b.stage&&b.stage.update()}}),Object.defineProperty(this,"tabs",{get:function(){return x},set:function(t){g(Math.min(Math.max(t,0),i.length-1)),!e.OPTIMIZE&&b.stage&&b.stage.update()}}),Object.defineProperty(this,"color",{get:function(){return r},set:function(t){r=t,zot(i[x].color)&&(T[x].color=r,!e.OPTIMIZE&&b.stage&&b.stage.update())}}),Object.defineProperty(this,"rollColor",{get:function(){return a},set:function(e){a=e;for(var t=0;t<i.length;t++)zot(i[x].rollColor)&&(T[t].rollColor=a)}}),Object.defineProperty(this,"offColor",{get:function(){return s},set:function(t){s=t;for(var o=0;o<i.length;o++)zot(i[x].offColor)&&(T[o].color=s);!e.OPTIMIZE&&b.stage&&b.stage.update()}}),Object.defineProperty(this,"label",{get:function(){return C[x]},set:function(){zon&&zog("selected is read only - try selectedIndex")}}),Object.defineProperty(this,"text",{get:function(){return null!=C[x]?C[x].text:void 0},set:function(){zon&&zog("selected is read only - try selectedIndex")}}),Object.defineProperty(this,"buttons",{get:function(){return T},set:function(){zon&&zog("buttons is read only")}}),Object.defineProperty(this,"labels",{get:function(){return C},set:function(){zon&&zog("labels is read only")}}),this._enabled=!0,Object.defineProperty(b,"enabled",{get:function(){return b._enabled},set:function(e){t(b,e)}}),this.clone=function(){for(var t=e.copy(i),g=0;g<t.length;g++)t[g].label=t[g].label.clone();return b.cloneProps(new e.Tabs(o,n,t,r,a,s,l,d,c,u,h,f,p,m))},this.dispose=function(){for(var e=0;e<b.buttons.length;e++)b.buttons[e].dispose(),b.labels[e].dispose(),b.buttons[e].removeAllEventListeners();return b.removeAllEventListeners(),!0}},e.extend(e.Tabs,e.Container,"clone","zimContainer",!1),e.Pad=function(o,n,i,r,a,s,l,d,c,u,h){function f(t){var o=t.target;v.selected=o.selected,v.text=o.text,v.label=o.label;for(var i=o.selectedIndex,r=0;r<w.length;r++)w[r].selectedIndex=-1;o.selectedIndex=i,z=o.znum*n+i,v.dispatchEvent("change"),!e.OPTIMIZE&&v.stage&&v.stage.update()}var p,m="width, cols, rows, keys, color, rollColor, offColor, spacing, currentEnabled, corner, labelColor";if(p=zob(e.Pad,arguments,m,this))return p;if(z_d("66"),this.zimContainer_constructor(),this.type="Pad",zot(o)&&(o=150),zot(n)&&(n=3),zot(i)&&(i=n),zot(r)){r=[];for(var g=1;i*n>=g;g++)r.push(g)}zot(c)&&(c=!0),zot(d)&&(d=1);var z,v=this;this.cols=n,this.rows=i;var b,y=o/n-d,w=[],x=0;this.labels=[],this.buttons=[];for(var g=0;i>g;g++){for(var C=[],T=0;n>T;T++)C.push(null!=r[x]?r[x]:""),x++;b=w[g]=new e.Tabs(o,y,C,a,s,l,d,c,u,h,!1,!1),this.labels=this.labels.concat(b.labels),this.buttons=this.buttons.concat(b.buttons),this.addChild(b),b.selectedIndex=-1,b.y=(y+d)*g,b.znum=g,b.on("change",f)}this.tabs=w,Object.defineProperty(this,"selectedIndex",{get:function(){return z},set:function(e){z=e;for(var t=0;t<w.length;t++)w[t].selectedIndex=-1;var o=Math.floor(z/n);o>=0&&o<v.tabs.length&&(v.tabs[o].selectedIndex=z%n)}}),this._enabled=!0,Object.defineProperty(v,"enabled",{get:function(){return v._enabled},set:function(e){t(v,e)}}),this.clone=function(){return v.cloneProps(new e.Pad(o,n,i,r,a,s,l,d,c,u,h))},this.dispose=function(){for(var e=0;e<v.tabs.length;e++)v.tabs[e].dispose();return v.removeAllEventListeners(),!0}},e.extend(e.Pad,e.Container,"clone","zimContainer",!1),e.Tile=function(t,o,n,i,r,a,s){var l,d="obj, cols, rows, spacingH, spacingV, mirrorH, mirrorV";if(l=zob(e.Tile,arguments,d,this))return l;z_d("66.5"),this.zimContainer_constructor(),this.type="Tile",zot(o)&&(o=1),zot(n)&&(n=1),zot(i)&&(i=0),zot(r)&&(r=0),zot(a)&&(a=!1),zot(s)&&(s=!1);var c,u=this,h=t.width,f=t.height;if(!h||!f)return void(zon&&zog("ZIM Display: Tile() obj must have width and height"));for(var p=0;n>p;p++)for(var m=0;o>m;m++)c=m+p==0?zik(t):zik(t).clone(),this.addChild(c),a&&m%2==1?(c.scaleX=-c.scaleX,c.x=m*(h+i)+h):c.x=m*(h+i),s&&p%2==1?(c.scaleY=-c.scaleY,c.y=p*(f+r)+f):c.y=p*(f+r);this.clone=function(){return u.cloneProps(new e.Tile(t,o,n,i,r,a,s))}},e.extend(e.Tile,e.Container,"clone","zimContainer",!1),e.ColorPicker=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m){function g(e){return e=Math.floor(e).toString(16),e+""+e}function z(e){"#000"==N||"#000000"==N||"black"==N?(f.color="#222",f.alpha=1):(f.color="black",f.alpha=.5),f.x=S.x+e%n*(E+i)+E/2,f.y=S.x+Math.floor(e/n)*(E+i)+E/2}function v(){if(N!=U||M!=j){if(P&&r){k=T,T=U;var t=[k,T];for(L=0;2>L;L++){var o=S.graphics;Y=Math.floor(L/n),R=L%n,G=R*(E+i),Z=Y*(E+i)+K,D[L]=t[L],o.f(ft.color).r(G-1,Z-1,E+2,E+2).f(t[L]).r(G,Z,E,E)}!e.OPTIMIZE&&C.stage&&C.stage.update()}U=N,j=M,C.dispatchEvent("change")}else C.dispatchEvent("close")}function b(){C.zimAccessibility&&C.zimAccessibility.changeTitle(C,null,!0)}function y(e){return Math.round(e*Math.pow(10,2))/Math.pow(10,2)}var w,x="width, colors, cols, spacing, greyPicker, alphaPicker, startColor, drag, shadowColor, shadowBlur, buttonBar, circles, indicator, backingColor, keyArrows";if(w=zob(e.ColorPicker,arguments,x,this))return w;z_d("67"),this.zimContainer_constructor(),this.type="ColorPicker",zot(t)&&(t=500),zot(o)&&(P=!0),zot(n)&&(n=10),zot(i)&&(i=2),zot(a)&&(a=!0),zot(r)&&(r=!0),zot(d)&&(d="rgba(0,0,0,.3)"),zot(c)&&(c=14),zot(u)&&(u=!0),zot(l)&&(l=u?!0:!1),zot(h)&&(h=!1),zot(f)&&(f=!1,u||(f=!0)),zot(p)&&(p="black"),zot(m)&&(m=!0);var C=this,T="#e472c4",k="#50c4b7",j=1,M=1,S=new createjs.Shape;this.addChild(S),S.x+=i,S.y+=i;var A,E,P=!1,D=[];if(zot(o)){P=!0;var O=6,B=O*O*O;O=Math.ceil(Math.pow(B,.5)),E=(t-i)/18-i;var I=Math.floor(Math.pow(O*O,1/3));A=[];for(var L=0;6>L;L++)for(var _=0;6>_;_++)for(var X=0;6>X;X++)A.push("#"+g(3*L)+g(3*_)+g(3*X));o=[];var Y,R,W,H;for(L=0;L<A.length;L++)Y=Math.floor(L/6),R=L%6,I=Y>=18?1:0,W=Y-6*I*3,H=R+6*I,o[18*H+W]=A[L];n=18,D=[k,T]}else E=(t-i)/n-i;var F=Math.ceil(o.length/n),N=String(o[o.length-1]);zot(s)||(N=String(s));var R,Y,G,Z,U=k,V=S.graphics,I=0;for(L=0;L<o.length;L++)Y=L%n,R=Math.floor(L/n),G=Y*(E+i),Z=R*(E+i),h?V.f(o[L]).dc(G+E/2,Z+E/2,E/2):V.f(o[L]).r(G,Z,E,E);var q=Z+E+i,K=q;if(r){for(L=0;16>L;L++)D.push("#"+g(L)+g(L)+g(L));for(L=0;L<D.length;L++)Y=Math.floor(L/n),R=L%n,G=R*(E+i),Z=Y*(E+i)+q,h?V.f(D[L]).dc(G+E/2,Z+E/2,E/2):V.f(D[L]).r(G,Z,E,E);q=Z+E+i;var Q=n,J=Math.ceil(D.length/n)}f&&(f=this.indicator=h?new e.Circle(E/2*.5):new e.Rectangle(.5*E,.5*E),f.alpha=.5,f.centerReg(),this.addChild(f),z(o.indexOf(N)));var $=10;if(a){var et=new e.Container;et.setBounds(0,0,600,70),this.addChild(et),et.x=0,et.y=q;var tt=this.alphaBacking=new e.Rectangle(600-2*$,50,"#222",null,null,0);et.addChild(tt),e.centerReg(tt,et);var ot=this.alphaBut=new e.Button({width:20,height:30,label:"",corner:0,hitPadding:20}),nt=this.alphaSlider=new e.Slider(0,1,.05,ot,330);nt.currentValue=1,et.addChild(nt),nt.x=40,nt.y=et.height/2;var it=this.alphaText=new e.Label("Alpha: 1",30,null,"orange");et.addChild(it),it.x=nt.x+nt.bar.width+40,it.y=et.height/2-it.height/2,et.scaleX=et.scaleY=t/600,nt.on("change",function(){it.text="Alpha: "+y(nt.currentValue),ut&&(ut.alpha=M=nt.currentValue),C.dispatchEvent(u?"set":"change"),C.stage&&C.stage.update()}),q+=et.height-$}if(u){var rt=new e.Container;rt.setBounds(0,0,600,100),this.addChild(rt),rt.x=0,rt.y=q+$;var at=this.swatchText=new e.Label(N.toUpperCase().substr(0,7),30,null,"orange");if(rt.addChild(at),e.centerReg(at),at.x=90,at.y=48,l){var st=this.grip=new createjs.Shape;rt.addChild(st),st.graphics.f("rgba(256,256,256,.25)").r(0,0,5,20).r(10,0,5,20).r(20,0,5,20).r(30,0,5,20),st.x=70,st.y=65,at.y=40}var lt=this.closeBut=new e.Button(90,90,"X","#222","#444",null,null,0);rt.addChild(lt),lt.x=600-lt.width-$,lt.y=0,lt.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",function(){C.dispatchEvent("close")});var dt=this.okBut=new e.Button(150,90,"OK","#222","#444",null,null,0);rt.addChild(dt),dt.x=lt.x-dt.width-$,dt.y=0,dt.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",v);var ct=this.swatchBacking=new createjs.Shape;rt.addChild(ct);var V=ct.graphics;V.f("black").r(.5,.5,50,89).f("#666").r(50,.5,50,89).f("white").r(100,.5,49.5,89),ct.x=dt.x-150-$,ct.y=0;var ut=this.swatch=new e.Rectangle(150,90,N);rt.addChild(ut),ut.x=ct.x,ut.y=0,ut.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",v),ut.cursor="pointer",rt.scaleX=rt.scaleY=t/600,q+=rt.height}else S.cursor="pointer";a||u||(q-=$-i);var ht=q+$;this.setBounds(0,0,t,ht);var ft=this.backing=new e.Rectangle(t,ht,p);if(this.addChildAt(ft,0),-1!=d&&c>0&&(ft.shadow=new createjs.Shadow(d,8,8,c)),l){var pt,mt;ft.on("mousedown",function(e){pt=e.stageX-C.x,mt=e.stageY-C.y,ft.cursor="move"}),ft.on("pressmove",function(e){C.x=e.stageX-pt,C.y=e.stageY-mt,C.stage&&C.stage.update()}),ft.on("pressup",function(){ft.cursor="default",C.stage&&C.stage.update()})}var gt=n*(E+i),zt=F*(E+i);if(r)var vt=Q*(E+i),bt=J*(E+i);S.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",function(){var t=e.hitTestGrid(S,gt,zt,n,F,C.stage.mouseX,C.stage.mouseY,0,0,i,i);zot(t)||(N=o[t],u?(ut.color=N,at.text=String(o[t]).toUpperCase().substr(0,7),e.centerReg(at),N!=U&&C.dispatchEvent("set")):v()),r&&(t=null,t=e.hitTestGrid(S,vt,bt,Q,J,C.stage.mouseX,C.stage.mouseY,0,zt,i,i),zot(t)||(N=D[t],u?(ut.color=N,at.text=D[t].toUpperCase(),e.centerReg(at),N!=U&&C.dispatchEvent("set")):v())),f&&z(o.indexOf(N)),u?C.stage&&C.stage.update():f&&C.stage&&C.stage.update(),b()}),Object.defineProperty(this,"selectedColor",{get:function(){return N},set:function(t){U=N=t,u&&(ut.color=N,at.text=N,e.centerReg(at),C.stage&&C.stage.update()),f&&z(o.indexOf(N)),b()}}),Object.defineProperty(this,"currentValue",{get:function(){return N},set:function(e){C.selectedColor=e}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return N},set:function(e){e!=C.selectedColor&&(C.selectedColor=e,C.dispatchEvent("change"))}}),Object.defineProperty(this,"selectedIndex",{get:function(){return o.indexOf(N)},set:function(t){U=N=o[t],u&&(ut.color=N,at.text=N,e.centerReg(at),C.stage&&C.stage.update()),f&&z(o.indexOf(N)),b()}}),Object.defineProperty(this,"selectedAlpha",{get:function(){return a?y(nt.currentValue):1},set:function(e){a&&(j=nt.currentValue=e,ut&&(ut.alpha=j),it&&(it.text="Alpha: "+y(nt.currentValue)),C.stage&&C.stage.update())}}),Object.defineProperty(this,"colors",{get:function(){return r?o.concat(D):o},set:function(){zon&&zog("Display - ColorPicker() colors is read only - make a new ColorPicker to change")}}),this.keyDownEvent=function(e){function t(){0>o&&(o=C.colors.length-1),o>C.colors.length-1&&(o=0),C.selectedIndex=o,C.dispatchEvent("change"),C.stage&&C.stage.update()}if(C.focus||!C.zimAccessibility&&m){var o=C.selectedIndex;37==e.keyCode||40==e.keyCode?(o--,t()):(38==e.keyCode||39==e.keyCode)&&(o++,t())}},window.addEventListener("keydown",this.keyDownEvent),this.clone=function(){return C.cloneProps(new e.ColorPicker(t,P?null:o,n,i,r,a,s,l,d,c,u,h,f,p,m))},this.dispose=function(){return window.removeEventListener("keydown",C.keyDownEvent),nt.dispose(),S.removeAllEventListeners(),ft.removeAllEventListeners(),lt.removeAllEventListeners(),ut.removeAllEventListeners(),dt.removeAllEventListeners(),!0}},e.extend(e.ColorPicker,e.Container,"clone","zimContainer",!1),e.Loader=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b,y,w,x,C,T){function k(t){var o;o=t.dataTransfer&&t.dataTransfer.files&&t.dataTransfer.files.length>0?t.dataTransfer.files:t.target.files;for(var n,i=[],r=0;r<o.length;r++)!function(t){var r=new FileReader;r.onload=function(t){var r=new Image;r.onload=function(){var t=new e.Bitmap(r);if(i.push(t),1==i.length&&(n=t),i.length==o.length){var a=new createjs.Event("loaded");a.bitmaps=i,a.bitmap=n,a.lastBitmap=t,a.total=i.length,S.dispatchEvent(a),E.value=""}},r.src=t.target.result},r.readAsDataURL(t)}(o[r])}var j,M="frame, width, height, label, color, rollColor, borderColor, borderWidth, corner, shadowColor, shadowBlur, hitPadding, gradient, gloss, flatBottom, backing, rollBacking, rollPersist, icon, rollIcon, toggle, rollToggle, toggleEvent, dashed";if(j=zob(e.Loader,arguments,M,this))return j;if(z_d("67.5"),zot(t))return void(zon&&zog("zim.Loader - please provide a reference to zim Frame"));zot(o)&&(o=250),zot(n)&&(n=70),zot(r)&&(r="rgba(0,0,0,.05)"),zot(a)&&(a="rgba(0,0,0,.1)"),zot(s)&&(s="rgba(0,0,0,.3)"),zot(l)&&(l=1),zot(T)&&(T=!0),zot(d)&&(d=0),zot(i)&&(i=new e.Label({text:"UPLOAD PIC",color:"rgba(0,0,0,.4)",valign:"center",align:"center"})),this.zimButton_constructor(o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b,y,w,x,C,T),this.type="Loader";var S=this,A=t.stage;i=S.label;var E=S.tag=document.createElement("input");document.body.appendChild(E),E.setAttribute("type","file"),E.setAttribute("multiple","multiple"),E.setAttribute("aria-hidden",!0),E.hidden=!0,E.style.cssText="border:thin solid grey; z-index:2; width:"+o+"px; height:"+n+"px; overflow:hidden; outline:none;position:absolute; left:0px; top:0px; display:none; cursor:pointer; opacity: 0; filter: alpha(opacity=0);",this.addEventListener("mousedown",function(){E.click()}),E.addEventListener("change",k);var P=new createjs.DOMElement(E);A.addChild(P),P.alpha=0,this.resize=function(){return S.stage?(E.setAttribute("aria-hidden",!1),E.hidden=!1,E.style.display="block",void setTimeout(function(){var o=S.localToGlobal(0,0);P.x=t.x+o.x*t.scale,P.y=t.y+o.y*t.scale,e.scale(P,t.scale*S.scaleX,t.scale*S.scaleY),A.update()},50)):(E.setAttribute("aria-hidden",!0),E.hidden=!0,void(E.style.display="none"))},this.resize(),S.on("added",function(){E.style.display="block",E.hidden=!1,E.style.display="block",S.resize()}),S.on("removed",function(){E.style.display="none",E.hidden=!0,E.style.display="none"}),t.on("resize",S.resize);var D=new XMLHttpRequest;D.upload&&E.addEventListener("drop",function(e){E.removeEventListener("change",k),k(e),setInterval(function(){E.addEventListener("change",k)},100)}),this.save=function(e,o,n,i,r,a,s,l){var d,c="content, x, y, width, height, cached, cachedBounds, type";return(d=zob(S.save,arguments,c))?d:(zot(e)&&(e=t.stage),zot(o)&&(o=0),zot(n)&&(n=0),zot(i)&&(i=t.width),zot(r)&&(r=t.height),zot(l)&&(l="png"),e.cache(o,n,i,r),zgo(e.cacheCanvas.toDataURL("image/"+l),"_blank"),a?s&&e.cache(cashedBound.x,cashedBound.y,cashedBound.width,cashedBound.height):e.uncache(),S)},this.clone=function(){var k=new e.Loader(t,o,n,zot(i)?null:i.clone(),r,a,s,l,d,c,u,h,f,p,m,zot(g)?null:g.clone(),zot(z)?null:z.clone(),v,zot(b)?null:b.clone(),zot(y)?null:y.clone(),zot(w)?null:"string"==typeof w?w:w.clone(),zot(x)?null:x.clone(),C,T);return S.cloneProps(k)},this.dispose=function(){return S.zimButton_dispose(),S.removeAllEventListeners(),S.removeChild(P),document.body.removeChild(E),!0}},e.extend(e.Loader,e.Button,["clone","dispose"],"zimButton",!1),e.TextArea=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z){var v,b="frame, width, height, size, padding, color, backingColor, borderColor, borderWidth, corner, shadowColor, shadowBlur, dashed, id, placeholder, readOnly, spellCheck";if(v=zob(e.TextArea,arguments,b,this))return v;if(z_d("67.6"),zot(t))return void(zon&&zog("zim.TextArea - please provide a reference to zim Frame"));zot(o)&&(o=250),zot(n)&&(n=70),zot(i)&&(i=20),zot(r)&&(r=5),zot(a)&&(a="#666"),zot(s)&&(s="rgba(256,256,256,.1)"),zot(l)&&(l="rgba(0,0,0,.1)"),zot(c)&&(c=0),!zot(h)&&zot(u)&&(u="rgba(0,0,0,.3)"),!zot(u)&&zot(h)&&(h=10),this.zimContainer_constructor(o,n),this.type="TextArea";var y=this,w=t.stage,x=this.backing=new e.Rectangle(o,n,s,l,d,c,null,f);-1!=u&&h>0&&(x.shadow=new createjs.Shadow(u,3,3,h)),y.addChild(x);var C=y.tag=document.createElement("textarea");document.body.appendChild(C),zot(p)||(C.setAttribute("id",p),C.setAttribute("name",p)),g&&(C.readonly=!0),z||(C.spellcheck=!1),zot(m)||C.setAttribute("placeholder",m),C.style.cssText="background-color:transparent; color:"+a+"; resize:none; z-index:3; width:"+(o-2*r)+"px; height:"+(n-2*r)+"px; overflow:hidden; outline:none;font-size:"+i+"px; font-family:verdana; border:none; position:absolute; left:0px; top:0px; display:none;",C.addEventListener("change",function(){y.dispatchEvent("change")}),C.addEventListener("input",function(){y.dispatchEvent("input")}),C.addEventListener("focus",function(){window.removeEventListener("keydown",t.zil[0]),y.dispatchEvent("focus")}),C.addEventListener("blur",function(){window.addEventListener("keydown",t.zil[0]),y.dispatchEvent("blur")});var T=new createjs.DOMElement(C);T.alpha=0,this.on("mousedown",function(){setTimeout(function(){C.focus()},100)}),this.resize=function(){setTimeout(function(){var o=y.localToGlobal(r,r);T.x=t.x+o.x*t.scale,T.y=t.y+o.y*t.scale,e.scale(T,t.scale*y.scaleX,t.scale*y.scaleY),T.alpha=1,y.stage&&w.update()},50)},this.resize(),y.on("added",function(){w.addChild(T),C.style.display="block",y.resize()}),y.on("removed",function(){w.removeChild(T),C.style.display="none"}),t.on("resize",y.resize),Object.defineProperty(this,"currentValue",{get:function(){return C.value},set:function(e){C.value=e}}),Object.defineProperty(this,"text",{get:function(){return C.value},set:function(e){C.value=e}}),Object.defineProperty(this,"readOnly",{get:function(){return C.readOnly},set:function(e){C.readOnly=e}}),this.clone=function(){var v=new e.Loader(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z);return y.cloneProps(v)},this.dispose=function(){return y.removeAllEventListeners(),y.removeChild(T),document.body.removeChild(C),!0}},e.extend(e.TextArea,e.Container,["clone","dispose"],"zimContainer",!1),e.drag=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m){function g(){T=0,k=0,t.zimDragRect&&(s?(M=e.boundsToGlobal(t.parent,t.zimDragRect),d&&(S=t.zimDragRect)):(M=t.zimDragRect,d&&(S=e.boundsToGlobal(t.parent,t.zimDragRect,!0)))),M&&m&&(j=t.parent.localToGlobal(t.x,t.y),v(t,j.x,j.y)),c&&(t.zimDragMoving=!0,y())}function z(){t.zimDragTicker&&e.Ticker.remove(t.zimDragTicker)}function v(o,n,i){if(zot(o)&&(o=N?N:t),o.parent&&o.stage){if(zot(n)||zot(i)){var r=o.parent.localToGlobal(o.x,o.y);T=k=0,t.zimDragRect&&(s?(M=e.boundsToGlobal(o.parent,t.zimDragRect),d&&(S=o.zimDragRect)):(M=t.zimDragRect,d&&(S=e.boundsToGlobal(o.parent,t.zimDragRect,!0)))),n=r.x,i=r.y,c&&(X=o.x,Y=o.y,N=o,E.immediate(X),P.immediate(Y))}var a,l=o.parent.globalToLocal(n,i);c&&h?"vertical"==h?(a=b(o,l.x-T,l.y-k),o.x=a.x,o.y=l.y-k):"horizontal"==h?(a=b(o,l.x-T,l.y-k),o.x=l.x-T,o.y=a.y):(o.x=l.x-T,o.y=l.y-k):(a=b(o,l.x-T,l.y-k),o.x=a.x,o.y=a.y),o.zimMask&&(o.zimMask.x=o.x,o.zimMask.y=o.y)}}function b(e,t,o){if(M)if(d){var n=e.getBounds().width,i=e.getBounds().height,r=e.getBounds().x,a=e.getBounds().y;n<S.width?t=S.x+(S.width-n)/2+(e.regX-r):(t-(e.regX-r)>S.x&&(t=S.x+(e.regX-r)),t-(e.regX-r)+n<S.x+S.width&&(t=S.x+S.width+(e.regX-r)-n)),e.height<S.height?o=S.y+(S.height-i)/2+(e.regY-a):(o-(e.regY-a)>S.y&&(o=S.y+(e.regY-a)),o-(e.regY-a)+i<S.y+S.height&&(o=S.y+S.height+(e.regY-a)-i))}else{var s=e.parent.localToGlobal(t,o);t=Math.max(M.x,Math.min(M.x+M.width,s.x)),o=Math.max(M.y,Math.min(M.y+M.height,s.y)),s=e.parent.globalToLocal(t,o),t=s.x,o=s.y}return{x:t,y:o}}function y(){function o(e,o,n,i,r){Math.abs(e.x-H)<.1&&Math.abs(e.y-F)<.1?(t.zimDragMoving=!1,e.x=i,e.y=r,e.dispatchEvent("slidestop")):(H=o,F=n)}var n=t.stage;t.zimDragTicker=function(){if(N||(N=t),A){var e=N.parent.globalToLocal(n.mouseX,n.mouseY);O++,B.push(e.x),I.push(e.y),O>=D?(R=B.shift(),W=I.shift()):(R=B[0],W=I[0])}else{if(!t.zimDragMoving)return;var i=X+L-R,r=Y+_-W;if(M){var a=b(N,i,r);i=a.x,r=a.y}if(h)N.x=E.convert(i),N.y=P.convert(r),o(N,N.x,N.y,i,r);else{var a=b(N,E.convert(i),P.convert(r));N.x=a.x,N.y=a.y,o(N,N.x,N.y,N.x,N.y)}}},e.Ticker.add(t.zimDragTicker,n)}var w,x="obj, rect, overCursor, dragCursor, currentTarget, swipe, localBounds, onTop, surround, slide, slideDamp, slideSnap, reg, removeTweens, startBounds";if(w=zob(e.drag,arguments,x))return w;if(z_d("31"),!zot(t)&&t.on){t.cursor=zot(n)?"pointer":n,zot(r)&&(r=!1),zot(a)&&(a=!1),zot(s)&&(s=!1),zot(l)&&(l=!0),zot(d)&&(d=!1),zot(c)&&(c=!1),zot(u)&&(u=.3),zot(h)&&(h=!0);var C=["horizontal","vertical","auto"];h!==!0&&C.indexOf(h)<0&&(h=!1),zot(f)&&(f=!1),zot(p)&&(p=!0),zot(m)&&(m=!0),e.setSwipe(t,a),t.zimDragRect=o,t.zimLocalBounds=s;var T,k,j,M,S,A=!1;if(t.zimAdded=t.on("added",g,null,!0),t.zimRemoved=t.on("removed",z,null,!0),t.parent&&g(),c)var E=new e.Damp(t.x,u),P=new e.Damp(t.y,u),D=3,O=0,B=[],I=[],L=t.x,_=t.y,X=t.x,Y=t.y,R=t.x,W=t.y,H=-1e4,F=-1e4;var N;return t.pointers={},t.zimDown=t.on("mousedown",function(o){var n="id"+Math.abs(o.pointerID+1);if(t.pointers[n]=!0,N=r?o.currentTarget:o.target,t.zimDragRect&&!N.getBounds())return void zog("zim.drag() - drag object needs bounds set");A=!0,t.stage.mouseMoveOutside=!0,c||(t.zimDragTicker&&e.Ticker.remove(t.zimDragTicker),t.zimDragTicker=e.Ticker.add(function(){},t.stage)),p&&createjs.Tween.removeTweens(N),l&&N.parent.setChildIndex(N,N.parent.numChildren-1);var a=N.parent.globalToLocal(o.stageX,o.stageY);f&&(N.x=a.x,N.y=a.y),T=a.x-N.x,k=a.y-N.y,t.zimDragRect&&(s?(M=e.boundsToGlobal(N.parent,t.zimDragRect),d&&(S=t.zimDragRect)):(M=t.zimDragRect,d&&(S=e.boundsToGlobal(N.parent,t.zimDragRect,!0)))),t.cursor=zot(i)?"pointer":i,c&&(O=0,B=[a.x],I=[a.y],H=-1e4,F=-1e4,t.zimDragMoving=!0)},!0),t.zimMove=t.on("pressmove",function(e){A&&v(N,e.stageX,e.stageY)},!0),t.zimPosition=v,t.zimUp=t.on("pressup",function(o){var i="id"+Math.abs(o.pointerID+1);if(delete t.pointers[i],A){if(t.cursor=zot(n)?"pointer":n,c){var r=N.parent.globalToLocal(o.stageX,o.stageY);A=!1,L=r.x,_=r.y,X=N.x,Y=N.y,E.immediate(N.x),P.immediate(N.y)}else{var a=0;for(var s in t.pointers)a++;0==a&&e.Ticker.remove(t.zimDragTicker)}t.stage&&t.stage.update()}},!0),t}},e.noDrag=function(t){return z_d("32"),!zot(t)&&t.on?(t.cursor="default",e.setSwipe(t,!0),t.off("added",t.zimAdded),t.off("removed",t.zimRemoved),t.off("mousedown",t.zimDown),t.off("pressmove",t.zimMove),t.off("pressup",t.zimUp),e.Ticker&&t.zimDragSlide&&e.Ticker.remove(t.zimDragSlide),t.zimDragMoving=t.zimAdded=t.zimRemoved=t.zimDown=t.zimMove=t.zimUp=t.zimDragRect=t.zimDragSlide=null,t):void 0},e.dragRect=function(e,t){return z_d("33"),zot(e)||!e.on||zot(t)?void 0:(e.zimDragRect=t,e.zimDragMoving=!0,e.zimPosition&&e.zimPosition(),e)},e.setSwipe=function(e,t){function o(t){for(var n,i=t.numChildren,r=0;i>r;r++)n=t.getChildAt(r),n.zimNoSwipe=e.zimNoSwipe,n instanceof createjs.Container&&o(n)}return z_d("34"),!zot(e)&&e.on?(e.zimNoSwipe=t?null:!0,e instanceof createjs.Container&&o(e),e):void 0},e.gesture=function(t,o,n,i,r,a,s,l,d,c,u){function h(){t.zimTouch.pair=[],e.loop(t.zimTouch.pointers,function(e,o,n){o.startX=o.x,o.startY=o.y,1>=n&&t.zimTouch.pair.push(o)}),t.zimTouch.startX=t.x,t.zimTouch.startY=t.y,t.zimTouch.startSX=t.scaleX,t.zimTouch.startSY=t.scaleY,t.zimTouch.startR=t.rotation}var f,p="obj, move, scale, rotate, rect, minScale, maxScale, snapRotate, localBounds, slide, slideEffect";if(f=zob(e.gesture,arguments,p))return f;if(z_d("34.5"),!zot(t)&&t.on){zot(o)&&(o=!0),zot(n)&&(n=!0),zot(i)&&(i=!0),zot(d)&&(d=!1),zot(l)&&(l=1),zot(c)&&(c=!1),zot(u)&&(u=5);var m,g;
if(!t.zimTouch){var z=new e.Damp(t.scaleX,.05),v=new e.Damp(t.scaleY,.05),b=t.scaleX/t.scaleY;if(t.zimTouch={move:o,scale:n,rotate:i,pointers:{},checkBounds:function(e,o){if(t.zimTouch.rect){var n=t.zimTouch.rect,i=t.parent.localToGlobal(e,o);e=Math.max(n.x,Math.min(n.x+n.width,i.x)),o=Math.max(n.y,Math.min(n.y+n.height,i.y)),i=t.parent.globalToLocal(e,o),e=i.x,o=i.y}return{x:e,y:o}}},r){t.zimTouch.rect=r,d&&(t.zimTouch.rect=e.boundsToGlobal(t.parent,r));var y=t.zimTouch.checkBounds(t.x,t.y);t.x=y.x,t.y=y.y}c&&(slideSlice=10,slideTotal=5,g=0,m=[],t.zimTouch.slideInterval=e.interval(slideSlice,function(){m[g++%slideTotal]=[t.x,t.y]}),t.zimTouch.slideInterval.pause(),t.move(t.x,t.y,10,"quadOut")),t.zimTouch.mousedown=t.on("mousedown",function(o){var n="id"+Math.abs(o.pointerID+1),i=t.parent.globalToLocal(o.stageX,o.stageY);t.zimTouch.pointers[n]={startX:i.x,startY:i.y,x:i.x,y:i.y},(t.zimTouch.move||t.zimTouch.rotate)&&(t.zimTouch.total=0,e.loop(t.zimTouch.pointers,function(){t.zimTouch.total++})),c&&1==t.zimTouch.total&&t.zimTouch.slideInterval.pause(!1),h()}),t.zimTouch.pressmove=t.on("pressmove",function(o){var n="id"+Math.abs(o.pointerID+1),i=t.parent.globalToLocal(o.stageX,o.stageY);if(t.zimTouch.pointers[n].x=i.x,t.zimTouch.pointers[n].y=i.y,t.zimTouch.move){var r=0,l=0;e.loop(t.zimTouch.pointers,function(e,t){r+=t.x-t.startX,l+=t.y-t.startY}),r=t.zimTouch.startX+r/t.zimTouch.total,l=t.zimTouch.startY+l/t.zimTouch.total;var d=t.zimTouch.checkBounds(r,l);t.x=d.x,t.y=d.y,t.dispatchEvent("move")}if(2==t.zimTouch.pair.length){var c=t.zimTouch.pair[0],u=t.zimTouch.pair[1];if(t.zimTouch.scale){var h=Math.sqrt(Math.pow(u.startX-c.startX,2)+Math.pow(u.startY-c.startY,2)),f=Math.sqrt(Math.pow(u.x-c.x,2)+Math.pow(u.y-c.y,2)),p=t.zimTouch.startSX+(f/h-1),m=t.zimTouch.startSY+(f/h-1);t.scaleX=z.convert(p),t.scaleY=v.convert(m);var g=!zot(a)&&Math.min(p,m)<a,y=!zot(s)&&Math.max(p,m)>s;(g||y)&&(g?b>1?(t.scaleY=a,t.scaleX=a*b):(t.scaleX=a,t.scaleY=a/b):y&&(b>1?(t.scaleX=s,t.scaleY=s/b):(t.scaleY=s,t.scaleX=s*b)),z.immediate(t.scaleX),v.immediate(t.scaleY)),t.dispatchEvent("scale")}if(t.zimTouch.rotate){var w=Math.atan2(c.startY-u.startY,c.startX-u.startX)*(180/Math.PI),x=Math.atan2(c.y-u.y,c.x-u.x)*(180/Math.PI);t.rotation=t.zimTouch.startR+(x-w),t.dispatchEvent("rotate")}}t.getStage&&t.stage&&t.stage.update()}),t.zimTouch.pressup=t.on("pressup",function(e){var o="id"+Math.abs(e.pointerID+1);if(delete t.zimTouch.pointers[o],(t.zimTouch.move||t.zimTouch.rotate)&&t.zimTouch.total--,i&&!zot(l)&&0==t.zimTouch.total&&(l>0?t.rotation=Math.round(t.rotation/l)*l:0==l&&(t.rotation=Math.round(t.rotation))),c&&0==t.zimTouch.total){t.zimTouch.slideInterval.pause();var n=m[(g+1)%m.length],r=m[g%m.length],a=t.x+(n[0]-r[0])*u,s=t.y+(n[1]-r[1])*u,d=t.zimTouch.checkBounds(a,s),f=slideTotal*slideSlice*u*Math.min((t.x-d.x)/(t.x-a)||1,(t.y-d.y)/(t.y-s)||1);t.move(d.x,d.y,f,"quadOut",function(){t.dispatchEvent("slidestop")})}t.getStage&&t.stage&&t.stage.update(),h()})}return t}},e.noGesture=function(t,o,n,i){var r,a="obj, move, scale, rotate";return(r=zob(e.noGesture,arguments,a))?r:(z_d("34.6"),!zot(t)&&t.on&&t.zimTouch?(zot(o)&&(o=!0),zot(n)&&(n=!0),zot(i)&&(i=!0),t.zimTouch.move=!o,t.zimTouch.scale=!n,t.zimTouch.rotate=!i,t.zimTouch.move||t.zimTouch.scale||t.zimTouch.rotate||(t.off("mousedown",t.zimTouch.mousedown),t.off("pressmove",t.zimTouch.pressmove),t.off("pressup",t.zimTouch.pressup),delete t.zimTouch),t):void 0)},e.gestureRect=function(e,t){if(z_d("34.7"),!zot(e)&&e.on&&!zot(t)&&e.zimTouch){e.zimTouch.rect=t;var o=e.zimTouch.checkBounds(e.x,e.y);return e.x=o.x,e.y=o.y,e}},e.hitTestPoint=function(e,t,o){if(z_d("35"),!e.stage)return!1;if(!zot(e)&&e.globalToLocal){var n=e.globalToLocal(t,o),i=e.getBounds();if(i){if(n.x>i.x+i.width||n.x<i.x)return;if(n.y>i.y+i.height||n.y<i.y)return}return e.hitTest(n.x,n.y)}},e.hitTestReg=function(e,t){if(z_d("36"),!e.stage||!t.stage)return!1;if(!zot(e)&&!zot(t)&&e.localToLocal&&t.localToLocal){var o=t.localToLocal(t.regX,t.regY,e),n=e.getBounds();if(n){if(o.x>n.x+n.width||o.x<n.x)return;if(o.y>n.y+n.height||o.y<n.y)return}return e.hitTest(o.x,o.y)}},e.hitTestRect=function(t,o,n){if(z_d("37"),!t.stage||!o.stage)return!1;if(!zot(t)&&!zot(o)&&t.hitTest&&o.getBounds){zot(n)&&(n=0);var i=o.getBounds();if(!i)return void zog("zim methods - hitTestRect():\n please setBounds() on param b object");var r=t.getBounds();if(!r||e.hitTestBounds(t,o)){var a=i.x+i.width/2,s=i.y+i.height/2,l=o.localToLocal(a,s,t);if(t.hitTest(l.x,l.y))return!0;for(var d,c,l,u=0;n>=u;u++){if(d=i.width*(u+1)/(n+1),c=i.height*(u+1)/(n+1),l=o.localToLocal(i.x+d,i.y,t),t.hitTest(l.x,l.y))return!0;if(l=o.localToLocal(i.x+i.width,i.y+c,t),t.hitTest(l.x,l.y))return!0;if(l=o.localToLocal(i.x+i.width-d,i.y+i.height,t),t.hitTest(l.x,l.y))return!0;if(l=o.localToLocal(i.x,i.y+i.height-c,t),t.hitTest(l.x,l.y))return!0}}}},e.hitTestCircle=function(t,o,n){if(z_d("38"),!t.stage||!o.stage)return!1;if(!zot(t)&&!zot(o)&&t.hitTest&&o.getBounds){zot(n)&&(n=8);var i=o.getBounds();if(!i)return void zog("zim methods - hitTestCircle():\n please setBounds() on param b object");var r=t.getBounds();if(!r||e.hitTestBounds(t,o)){var a=i.x+i.width/2,s=i.y+i.height/2,l=o.localToLocal(a,s,t);if(t.hitTest(l.x,l.y))return!0;for(var d,c,u,h=(i.width+i.height)/2/2,f=0;n>f;f++)if(d=f/n*2*Math.PI,c=a+h*Math.cos(d),u=s+h*Math.sin(d),l=o.localToLocal(c,u,t),t.hitTest(l.x,l.y))return!0}}},e.hitTestBounds=function(t,o,n){function i(e,t){return e.x>=t.x+t.width||e.x+e.width<=t.x||e.y>=t.y+t.height||e.y+e.height<=t.y?!1:!0}if(z_d("39"),!t.stage||!o.stage)return!1;if(!zot(t)&&!zot(o)&&t.getBounds&&o.getBounds){var r=!1;n&&n.graphics&&(r=!0);var a=t.getBounds(),s=o.getBounds();if(!a||!s)return void zog("zim methods - hitTestBounds():\n please setBounds() on both objects");var l=e.boundsToGlobal(t),d=e.boundsToGlobal(o);if(r){var c=n.graphics;c.c(),c.ss(1).s("blue"),c.r(l.x,l.y,l.width,l.height),c.s("green"),c.r(d.x,d.y,d.width,d.height),n.stage.update()}return i(l,d)}},e.boundsToGlobal=function(e,t,o){if(z_d("40"),!zot(e)&&e.getBounds){zot(o)&&(o=!1);var n=e.getBounds();if(!n&&zot(t))return void zog("zim methods - boundsToGlobal():\n please setBounds() on object (or a rectangle)");if(t&&(n=t),o)var i=e.globalToLocal(n.x,n.y),r=e.globalToLocal(n.x+n.width,n.y),a=e.globalToLocal(n.x+n.width,n.y+n.height),s=e.globalToLocal(n.x,n.y+n.height);else var i=e.localToGlobal(n.x,n.y),r=e.localToGlobal(n.x+n.width,n.y),a=e.localToGlobal(n.x+n.width,n.y+n.height),s=e.localToGlobal(n.x,n.y+n.height);var l=Math.min(i.x,r.x,a.x,s.x),d=Math.min(i.y,r.y,a.y,s.y),c=Math.max(i.x,r.x,a.x,s.x),u=Math.max(i.y,r.y,a.y,s.y);return new createjs.Rectangle(l,d,c-l,u-d)}},e.hitTestGrid=function(e,t,o,n,i,r,a,s,l,d,c,u,h){if(z_d("41"),!e.stage)return!1;if(!zot(e)&&!u){var f=e.globalToLocal(r,a);r=f.x,a=f.y}zot(s)&&(s=0),zot(l)&&(l=0),zot(d)&&(d=0),zot(c)&&(c=0);var p=t/n,m=o/i,g=Math.min(n-1,Math.max(0,Math.floor((r-s)/p))),z=Math.min(i-1,Math.max(0,Math.floor((a-l)/m)));if(!(r-s>p*(g+1)-d||p*g>r-s||a-l>m*(z+1)-c||m*z>a-l)){var v=z*n+g;return zot(h)||"index"==h?v:"col"==h?g:"row"==h?z:"array"==h?[v,g,z]:void 0}},e.move=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b,y,w,x,C,T,k,j,M,S,A,E,P,D,O,B){var I,L="target, x, y, time, ease, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, sequence, sequenceCall, sequenceParams, sequenceReverse, ticker, props, protect, override, from, set, id";if(I=zob(e.move,arguments,L))return I;if(z_d("44"),!zot(o)||!zot(n)){var _={x:zik(o),y:zik(n)};return zot(o)?_={y:zik(n)}:zot(n)&&(_={x:zik(o)}),e.animate(t,_,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b,y,w,x,C,T,k,j,M,S,A,null,E,P,D,O,B)}},e.animate=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b,y,w,x,C,T,k,j,M,S,A,E,P,D,O,B){function I(){for(var t,n,i=s,r=0,a=0;a<o.length;a++)if(t=o[a],!zot(t.target)){zot(t.time)&&(t.time=st),i+=t.wait?t.wait:0,n=t.time,t.rewind&&(n=2*n+(t.rewindWait?t.rewindWait:0)),t.loop&&(n*=t.loopCount,n+=(t.loopCount-1)*(t.loopWait?t.loopWait:0));var l={target:t.target,obj:e.copy(t.obj),wait:r+i,waitedCall:t.waitedCall,waitedParams:t.waitedParams,time:t.time,ease:t.ease,from:t.from,rewind:t.rewind,call:t.call,params:t.params,loop:t.loop,loopCount:t.loopCount,loopWait:t.loopWait,loopCall:t.loopCall,loopParams:t.loopParams,loopWaitCall:t.loopWaitCall,loopWaitParams:t.loopWaitParams,rewind:t.rewind,rewindWait:t.rewindWait,rewindCall:t.rewindCall,rewindParams:t.rewindParams,rewindWaitCall:t.rewindWaitCall,rewindWaitParams:t.rewindWaitParams,set:e.copy(t.masterSet),override:!1,id:B};a==o.length-1&&L(l),e.animate(l),r+=i+n,i=0}}function L(e){e.call=S.loop&&(!S.count||ht<S.count)?function(){function e(){for(var e=0;e<ut.objects.length;e++)ut.objects[e].set&&ut.objects[e].set(ut.values[e]);S.loopWaitCall&&"function"==typeof S.loopWaitCall&&S.loopWaitCall(S.loopWaitParams),I()}S.loopCall&&"function"==typeof S.loopCall&&S.loopCall(S.loopParams),S.loopWait?lt=t.zimTweens[B]=t.zimTween=createjs.Tween.get(t,{override:S.override}).wait(S.loopWait).call(e):e()}:function(){r&&"function"==typeof r&&r(a),Q(B)},ht++}function _(){var n=new e.Dictionary;ut=new e.Dictionary;for(var r=0;r<o.length;r++)if(pt=o[r],t||(t=pt.target),zot(pt.target)&&(pt.target=t),zot(pt.ease)&&(pt.ease=i),!zot(pt.target)){if(pt.loop&&(zot(pt.loopCount)||pt.loopCount<=0)&&(pt.loopCount=0,o.splice(r+1,o.length)),zot(pt.obj.scale)||(pt.obj.scaleX=pt.obj.scaleY=pt.obj.scale,delete pt.obj.scale),pt.from){var a=n.at(pt.target);if(a){if(pt.set){var s=e.copy(pt.obj),l=e.merge(a,pt.set);pt.obj=R(pt.target,pt.obj,l),pt.set=e.merge(pt.set,s)}else pt.set=e.copy(pt.obj),pt.obj=R(pt.target,pt.obj,a);pt.from=!1}else n.add(pt.target,R(pt.target,pt.obj,pt.set))}var d={};for(var c in pt.obj)d[c]=pt.set&&pt.set[c]?pt.set[c]:pt.target[c];zot(ut.at(pt.target))&&ut.add(pt.target,{});var u=e.merge(ut.at(pt.target),d);ut.remove(pt.target),ut.add(pt.target,u),pt.masterSet=e.copy(pt.set)}zot(t.zimTweens)&&(t.zimTweens={})}function X(){t.mouseEnabled=!1,setTimeout(function(){t.zimBusy||(t.zimBusy={});for(var e in o)t.zimBusy[e]=!0;t.mouseEnabled=!0},70)}function Y(){zot(B)?B=e.makeID(10):(B=String(B),ct=B),zot(t.zimIdSets)&&(t.zimIdSets={}),zot(t.zimIdSets[B])?zot(t.zimTweens[B])||(dt=B,B=e.makeID(10),t.zimIdSets[dt]=[dt],t.zimTweens[dt].zimIdSet=dt,t.zimIdSets[dt].push(B)):(dt=B,B=e.makeID(10),t.zimIdSets[dt].push(B))}function R(e,t,o,n){var i={};for(rt in t)i[rt]=o&&!zot(o[rt])?o[rt]:e[rt],n&&(e[rt]=t[rt]);return i}function W(){zt&&"function"==typeof zt&&zt(vt)}function H(){bt&&"function"==typeof bt&&bt(yt)}function F(){Ct&&"function"==typeof Ct&&Ct(Tt)}function N(){kt&&"function"==typeof kt&&kt(jt)}function G(){var e=V();t.set&&!D&&t.set(O),lt=t.zimTweens[B]=t.zimTween=createjs.Tween.get(t,S).to(o,st,createjs.Ease[i]).call(N).wait(xt).call(F).to(e,st,createjs.Ease[wt]).call(U).wait(gt).call(W),K()}function Z(){t.set&&!D&&t.set(O),lt=t.zimTweens[B]=t.zimTween=createjs.Tween.get(t,S).to(o,st,createjs.Ease[i]).call(U).wait(gt).call(W),K()}function U(){if(S.loop){if(!(mt>0))return void H();if(mt>ht)return H(),void ht++;z?t.set&&t.set(V()):t.set&&t.set(o)}Q(B),r&&"function"==typeof r&&r(a)}function V(){var e={};for(var n in o)e[n]=A?zot(O[n])||D?t.style[n]:O[n]:zot(O[n])||D?t[n]:O[n];return e}function q(o){if(t.zimBusy){for(var n in o)delete t.zimBusy[n];e.isEmpty(t.zimBusy)&&(t.zimBusy=null)}}function K(){lt.zimObj=o,lt.zimTicker=Mt,lt.zimPaused=St,dt&&(lt.zimIdSet=dt),ct&&(zot(e.idSets)&&(e.idSets={}),zot(e.idSets[ct])?e.idSets[ct]=[t]:e.idSets[ct].indexOf(t)<0&&e.idSets[ct].push(t)),e.animatedObjects||(e.animatedObjects=new e.Dictionary(!0)),e.animatedObjects.add(t,!0)}function Q(o){if(!zot(t.zimTweens)&&!zot(t.zimTweens[o])){q(t.zimTweens[o].zimObj),t.zimTweens[o].paused=!0,J(o);var n=t.zimTweens[o].zimIdSet;if(!zot(n)&&t.zimIdSets){var i=t.zimIdSets[n];i&&i.splice(i.indexOf(o),1),i&&0==i.length&&(delete t.zimIdSets[n],e.isEmpty(t.zimIdSets)&&delete t.zimIdSets)}if(delete t.zimTweens[o],e.isEmpty(t.zimTweens)&&t.stopZimAnimate(),t.zimTweens&&t.zimTweens[o]||t.zimIdSets&&t.zimIdSets[n?n:o]);else if(e.idSets&&e.idSets[n?n:o]){e.idSets[n?n:o];var r=e.idSets[n?n:o].indexOf(t);r>=0&&e.idSets[n?n:o].splice(r,1),e.idSets[n?n:o].length<=0&&(delete e.idSets[n?n:o],e.isEmpty(e.idSets)&&delete e.idSets)}}}function J(o){-function(){var n=t.zimTweens[o].zimTicker;setTimeout(function(){n&&e.Ticker.remove(n),n=null},200)}()}function $(o,n){var i=t.zimTweens[o];i.paused=n,n!=i.zimPaused&&(i.zimPaused=n,n?i.zimTicker&&(i.zimAnimateTimeout=setTimeout(function(){e.Ticker.remove(i.zimTicker)},200)):(clearTimeout(i.zimAnimateTimeout),i.zimTicker&&e.Ticker.add(i.zimTicker,ft)))}function et(e){for(var o=[],n=0;n<e.length;n++)t.zimIdSets&&!zot(t.zimIdSets[e[n]])?o=o.concat(t.zimIdSets[e[n]]):o.push(e[n]);return o}var tt,ot="target, obj, time, ease, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, sequence, sequenceCall, sequenceParams, sequenceReverse, ticker, props, css, protect, override, from, set, id";if(tt=zob(e.animate,arguments,ot))return tt;if(z_d("45"),0!=e.ANIMATE){t=zik(t),n=zik(n),i=zik(i),s=zik(s),u=zik(u),h=zik(h),z=zik(z),v=zik(v),j=zik(j),D=zik(D),O=zik(O);var nt={override:!0};if(zot(c)||(nt.loop=c),zot(u)||(nt.count=u),zot(h)||(nt.loopWait=h),zot(f)||(nt.loopCall=f),zot(g)||(nt.loopWaitParams=g),zot(m)||(nt.loopWaitCall=m),zot(p)||(nt.loopParams=p),zot(z)||(nt.rewind=z),zot(v)||(nt.rewindWait=v),zot(b)||(nt.rewindCall=b),zot(y)||(nt.rewindParams=y),zot(w)||(nt.rewindWaitCall=w),zot(x)||(nt.rewindWaitParams=x),zot(S)||(nt=e.merge(nt,S)),S=nt,zot(C)&&(C=0),C>0&&t.addChild){for(var it=[],rt=0;rt<t.numChildren;rt++)it.push(t.getChildAt(rt));t=it}if(t instanceof Array){j&&t.reverse();for(var at=0,rt=0;rt<t.length;rt++)-function(){var l=rt;if(D){var d;t[rt].zimObj={};for(var c in o)d=o[c],t[rt].zimObj[c]=t[rt][c],t[rt][c]=d}else t[rt].zimObj=o;setTimeout(function(){var o=t[at];if(at++,e.animate(o,o.zimObj,n,i,r,a,s,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,M,e.copy(S),A,E,P,null,O,B),l==t.length-1&&T){var d=n?n:1e3;S&&S.rewind&&(d+=(n?n:1e3)+(S.rewindWait?S.rewindWait:0)),S&&S.loop&&S.loopWait&&(d+=S.loopWait),setTimeout(function(){T(k)},d)}},C*rt)}()}else{var st=n;zot(st)&&(st=1e3),zot(i)&&(i="quadInOut"),zot(s)&&(s=0),zot(S)&&(S={override:!0}),zot(a)&&(a=t),zot(M)&&(M=!0),zot(A)&&(A=!1),zot(E)&&(E=!1),zot(D)&&(D=!1),zot(O)&&(O={}),O.scale&&(O.scaleX=O.scaleY=O.scale,delete O.scale),zot(P)||(S.override=P);var lt,dt,ct;if(o instanceof Array){var ut,ht=1;return 0==o.length?this:(_(),Y(),I(),t)}if(!zot(t)){A&&(M=!1),zot(t.zimTweens)&&(t.zimTweens={});var ft;if(t.stage)ft=t.stage;else{if(!zimDefaultFrame)return;ft=zimDefaultFrame.stage}zot(o.scale)||(o.scaleX=o.scaleY=zik(o.scale),delete o.scale);for(var pt in o){if(!t.zimBusy)break;t.zimBusy[pt]&&delete o[pt]}if(!e.isEmpty(o)){(E||S.loop||S.rewind)&&X(),Y();for(var rt in o)o[rt]=zik(o[rt]);for(rt in O)O[rt]=zik(O[rt]);for(rt in S)"waitedCall"!=rt&&"waitedParams"!=rt&&"loopCall"!=rt&&"rewindCall"!=rt&&"loopWaitCall"!=rt&&"rewindWaitCall"!=rt&&(S[rt]=zik(S[rt]));for(rt in o)"string"==typeof o[rt]&&(o[rt]=t[rt]+Number(o[rt].replace(/\s/g,"")));for(rt in O)"string"==typeof O[rt]&&(O[rt]=t[rt]+Number(O[rt].replace(/\s/g,"")));D&&(o=R(t,o,O,!0));var mt=0;if(S.loop&&!zot(S.count)){mt=S.count,delete S.count;var ht=1}var gt=0;S.loopWait&&(gt=S.loopWait,delete S.loopWait);var zt;S.loopCall&&(zt=S.loopCall,delete S.loopCall);var vt=t;S.loopParams&&(vt=S.loopParams,delete S.loopParams);var bt;S.loopWaitCall&&(bt=S.loopWaitCall,delete S.loopWaitCall);var yt=t;if(S.loopWaitParams&&(yt=S.loopWaitParams,delete S.loopWaitParams),S.rewind){if(i){var wt=i;-1==wt.indexOf("InOut")&&(-1!=wt.indexOf("Out")?wt=wt.replace("Out","In"):-1!=wt.indexOf("In")&&(wt=wt.replace("In","Out")))}var xt=0;delete S.rewind,S.rewindWait&&(xt=S.rewindWait,delete S.rewindWait);var Ct;if(S.rewindCall){Ct=S.rewindCall;var Tt=S.rewindParams;zot(Tt)&&(Tt=t),delete S.rewindCall,delete S.rewindParams}var kt;if(S.rewindWaitCall){kt=S.rewindWaitCall;var jt=S.rewindWaitParams;zot(jt)&&(jt=t),delete S.rewindWaitCall,delete S.rewindWaitParams}s>0?lt=t.zimTweens[B]=t.zimTween=createjs.Tween.get(t,{override:S.override}).wait(s).call(function(){l&&"function"==typeof l&&l(zot(d)?t:d),G()}):G()}else s>0?lt=t.zimTweens[B]=t.zimTween=createjs.Tween.get(t,{override:S.override}).wait(s).call(function(){l&&"function"==typeof l&&l(zot(d)?t:d),Z()}):Z();var Mt;!A&&M&&(Mt=t.zimMask?e.Ticker.add(function(){e.copyMatrix(t.zimMask,t),t.zimMask.regX=t.regX,t.zimMask.regY=t.regY},ft):e.Ticker.add(function(){},ft));var St=!1;return K(),t.stopZimAnimate&&t.stopZimAnimate.real||(t.stopZimAnimate=function(o,n){if(zot(n)&&(n=!0),zot(o)){if(!n)return;t.zimBusy=null,createjs.Tween.removeTweens(t);for(var i in t.zimTweens)J(i);t.zimTweens=null,t.zimIdSets=null,e.idSets&&e.idSets[dt?dt:i]&&(delete e.idSets[dt?dt:i],e.isEmpty(e.idSets)&&delete e.idSets),e.animatedObjects.remove(t)}else{Array.isArray(o)||(o=[o]);var r=et(o);for(var i in t.zimTweens)n&&r.indexOf(i)>=0&&Q(i),!n&&r.indexOf(i)<0&&Q(i)}return t},t.stopZimAnimate.real=!0,t.pauseZimAnimate=function(e,o,n){if(zot(e)&&(e=!0),zot(n)&&(n=!0),!zot(o)||n){if(zot(o))for(var i in t.zimTweens)$(i,e);else{Array.isArray(o)||(o=[o]);var r=et(o);for(var i in t.zimTweens)n&&r.indexOf(i)>=0&&$(i,e),!n&&r.indexOf(i)<0&&$(i,e)}return t}}),t}}}}},e.stopZimAnimate=function(t){if(z_d("45.1"),zot(t)){if(e.animatedObjects)for(var o=e.animatedObjects.length-1;o>=0;o--)e.animatedObjects.objects[o].stopZimAnimate()}else if(Array.isArray(t)||(t=[t]),e.idSets)for(var n=0;n<t.length;n++){var i=t[n];if(e.idSets[i])for(var r=e.idSets[i].length-1,o=r;o>=0;o--)e.idSets[i][o].stopZimAnimate(i)}},e.pauseZimAnimate=function(t,o){if(z_d("45.2"),zot(t)&&(t=!0),zot(o)){if(e.animatedObjects)for(var n=e.animatedObjects.length-1;n>=0;n--)e.animatedObjects.objects[n].pauseZimAnimate(t)}else if(Array.isArray(o)||(o=[o]),e.idSets)for(var i=0;i<o.length;i++){var r=o[i];if(e.idSets[r])for(var n=e.idSets[r].length-1;n>=0;n--)e.idSets[r][n].pauseZimAnimate(t,r)}},e.wiggle=function(t,o,n,i,r,a,s,l,d,c,u){function h(){var f=e.rand(a,s),p={},z={};if(z[o]=n,"negative"==l)var v=-e.rand(i,r,c);else if("positive"==l)var v=e.rand(i,r,c);else if(0==g)var v=e.rand(i,r,c,!0);else var v=e.rand(i,r,c)*e.sign(m)*-1;p[o]=n+v,0==g&&(f/=2),m=v,g++,e.animate("negative"==l||"positive"==l?{target:t,obj:p,set:z,ease:d,time:2*f,rewind:!0,override:!1,call:h,id:u,ticker:t.getStage?!0:!1}:{target:t,obj:p,ease:d,time:f,override:!1,call:h,id:u,ticker:t.getStage?!0:!1})}var f,p="target, property, baseAmount, minAmount, maxAmount, minTime, maxTime, type, ease, integer, id";if(f=zob(e.wiggle,arguments,p))return f;if(z_d("45.25"),zot(t)||zot(n)||zot(i))return t;zot(r)&&(r=i),zot(a)&&(a=1e3),zot(s)&&(s=a),zot(d)&&(d="quadInOut"),zot(c)&&(c=!1),zot(u)&&(u=e.makeID()),zot(l)&&(l="both");var m,g=0;return h(),t},e.loop=function(t,o,n,i,r,a){function s(e){return zot(r)&&(r=n?e:0),zot(a)&&(a=n?0:e),n&&a>r||!n&&r>a?0:0>(0>r&&a)||r>e&&a>e?0:(r=Math.max(0,Math.min(r,e)),a=Math.max(0,Math.min(a,e)),Math.floor((n?r-a:a-r)/i)+1)}var l,d="obj, call, reverse, step, start, end";if(l=zob(e.loop,arguments,d))return l;if(z_d("45.3"),zot(t)||zot(o))return void 0;zot(n)&&(n=!1),(zot(i)||0>=i)&&(i=1);var c="number"==typeof t?"number":t.constructor===Array?"array":t.constructor==={}.constructor?"object":"container";if("container"==c&&!t.addChild)return void 0;if("number"==c||"array"==c){var u="number"==c?t:t.length,h=s(u-1);if(0==h)return;if(n)for(var f=r;f>=a;f-=i){if("number"==c)var p=o(f,h,r,a,t);else var p=o(t[f],f,h,r,a,t);if("undefined"!=typeof p)return p}else for(var f=r;a>=f;f+=i){if("number"==c)var p=o(f,h,r,a,t);else var p=o(t[f],f,h,r,a,t);if("undefined"!=typeof p)return p}}else if("object"==c){var u=0,m=[];for(var f in t)u++,m.push(f);var h=s(u-1);if(0==h)return;if(n)for(var f=r;f>=a;f-=i){var p=o(m[f],t[m[f]],f,h,r,a,t);if("undefined"!=typeof p)return p}else for(var f=r;a>=f;f+=i){var p=o(m[f],t[m[f]],f,h,r,a,t);if("undefined"!=typeof p)return p}}else{var h=s(t.numChildren-1);if(0==h)return;if(n)for(var f=r;f>=a;f-=i){var p=o(t.getChildAt(f),f,h,r,a,t);if("undefined"!=typeof p)return p}else for(var f=r;a>=f;f+=i){var p=o(t.getChildAt(f),f,h,r,a,t);if("undefined"!=typeof p)return p}}},e.copyMatrix=function(e,t){return z_d("45.5"),e.x=t.x,e.y=t.y,e.scaleX=t.scaleX,e.scaleY=t.scaleY,e.regX=t.regX,e.regY=t.regY,e.rotation=t.rotation,e.skewX=t.skewX,e.skewY=t.skewY,e},e.pos=function(e,t,o){return z_d("41.5"),zot(e)?void 0:(zot(t)||(e.x=t),zot(o)||(e.y=o),e)},e.mov=function(e,t,o){return z_d("41.6"),zot(e)?void 0:(zot(t)||(e.x+=t),zot(o)||(e.y+=o),e)},e.alp=function(e,t){return z_d("41.7"),zot(e)?void 0:(zot(t)||(e.alpha=t),e)},e.rot=function(e,t){return z_d("41.8"),zot(e)?void 0:(zot(t)||(e.rotation=t),e)},e.siz=function(e,t,o,n){return z_d("41.85"),zot(e)?void 0:(zot(n)&&(n=!1),zot(t)||zot(o)?zot(t)?zot(o)||(n?e.heightOnly=o:e.height=o):n?e.widthOnly=t:e.width=t:(e.widthOnly=t,e.heightOnly=o),e)},e.ske=function(e,t,o){return z_d("41.9"),zot(e)?void 0:(zot(t)||(e.skewX=t),zot(o)||(e.skewY=o),e)},e.reg=function(e,t,o){return z_d("41.95"),zot(e)?void 0:(zot(t)||(e.regX=t),zot(o)||(e.regY=o),e)},e.sca=function(e,t,o){return z_d("41.97"),zot(e)||zot(e.scaleX)?void 0:(zot(t)&&(t=e.scaleX),zot(o)&&(o=t),e.scaleX=t,e.scaleY=o,e)},e.scale=function(e,t,o){return z_d("42"),zot(e)||zot(e.scaleX)?void 0:(zot(t)&&(t=e.scaleX),zot(o)&&(o=t),e.scaleX=t,e.scaleY=o,e)},e.scaleTo=function(t,o,n,i,r,a){var s,l="obj, boundObj, percentX, percentY, type, boundsOnly";if(s=zob(e.scaleTo,arguments,l))return s;if(z_d("43"),zot(t)||!t.getBounds||!t.getBounds())return void zog("zim methods - scaleTo(): please provide an object (with setBounds) to scale");if(zot(o)||!o.getBounds||!o.getBounds())return void zog("zim methods - scaleTo(): please provide a boundObject (with setBounds) to scale to");zot(n)&&(n=-1),zot(i)&&(i=-1),-1==n&&-1==i&&(n=i=100),zot(r)&&(r="smallest"),zot(a)&&(a=!1);var d=o.getBounds().width*n/100*(a?1:o.scaleX),c=o.getBounds().height*i/100*(a?1:o.scaleY);if((-1==n||-1==i)&&"both"!=r&&"stretch"!=r)return-1==n?e.scale(t,c/t.getBounds().height):e.scale(t,d/t.getBounds().width),t;if("both"==r||"stretch"==r)return t.scaleX=-1!=n?d/t.getBounds().width:t.scaleX,t.scaleY=-1!=i?c/t.getBounds().height:t.scaleY,t;if("biggest"==r||"largest"==r||"outside"==r)var u=Math.max(d/t.getBounds().width,c/t.getBounds().height);else var u=Math.min(d/t.getBounds().width,c/t.getBounds().height);return e.scale(t,u),t},e.fit=function(t,o,n,i,r,a){var s,l="obj, left, top, width, height, inside";if(s=zob(e.fit,arguments,l))return s;if(z_d("46"),!zot(t)&&t.getBounds){if(!t.getBounds())return void zog("zim methods - fit(): please setBounds() on object");if(zot(o)){if(!t.stage)return void zog("zim methods - fit(): please add boundary dimensions or add obj to stage first");if(!t.stage.getBounds())return void zog("zim methods - fit(): please add boundary dimensions or add obj with bounds to stage first");var d=t.stage.getBounds().width,c=t.stage.getBounds().height;o=0,n=0,i=d,r=c}zot(a)&&(a=!0),t.scaleX=t.scaleY=1;var u,h=i,f=r,p=t.getBounds().width,m=t.getBounds().height;u=a?h/f>=p/m?f/m:h/p:h/f>=p/m?h/p:f/m,t.scaleX=t.scaleY=u;var g=p*u,z=m*u;return t.x=(t.regX-t.getBounds().x)*u+o+(h-g)/2,t.y=(t.regY-t.getBounds().y)*u+n+(f-z)/2,{x:t.x,y:t.y,width:g,height:z,scale:u,bX:o,bY:n,bWidth:i,bHeight:r}}},e.outline=function(t,o,n){var i,r="obj, color, size";if(i=zob(e.outline,arguments,r))return i;if(z_d("47"),zot(t)||!t.getBounds)return void zog("zim methods - outline(): please provide object with bounds set");if(!t.getBounds())return void zog("zim methods - outline(): please setBounds() on object");if(!t.parent)return void zog("zim methods - outline(): object should be on stage first");zot(o)&&(o="brown"),zot(n)&&(n=2);var a=t.getBounds(),s=new createjs.Shape,l=new createjs.Shape,d=t.parent,c=t.localToLocal(a.x,a.y,d),u=t.localToLocal(a.x+a.width,a.y,d),h=t.localToLocal(a.x+a.width,a.y+a.height,d),f=t.localToLocal(a.x,a.y+a.height,d),p=t.localToLocal(0,0,d),m=s.graphics,g=l.graphics;m.s(o).ss(n).mt(c.x,c.y).lt(u.x,u.y).lt(h.x,h.y).lt(f.x,f.y).lt(c.x,c.y);var z=10,v=z+1;return g.s("white").ss(n+2),g.mt(-v,0).lt(v,0),g.mt(0,-v).lt(0,v),g.s(o).ss(n),g.mt(-z,0).lt(z,0),g.mt(0,-z).lt(0,z),l.x=p.x,l.y=p.y,l.rotation=t.rotation,m.s("white").ss(n+2).dc(t.x,t.y,z+6),m.s(o).ss(n).dc(t.x,t.y,z+6),t.parent.addChild(s),t.parent.addChild(l),s.mouseEnabled=!1,l.mouseEnabled=!1,t.stage&&t.stage.update(),t},e.addTo=function(e,t,o){return z_d("47.5"),zot(e)?void zog("zim methods - addTo(): please provide object"):zot(t)?void zog("zim methods - addTo(): please provide container"):(zot(o)||isNaN(o)?t.addChild(e):t.addChildAt(e,o),e)},e.removeFrom=function(e,t){return z_d("47.6"),zot(e)?void zog("zim methods - removeFrom(): please provide object"):zot(t)?void zog("zim methods - removeFrom(): please provide container"):(t.removeChild(e),e)},e.added=function(e,t,o,n){if(z_d("47.7"),!zot(e)&&!zot(t)&&"function"==typeof t){if(zot(o)&&(o=100),e.stage)return void t(e.stage,e);var i=Date.now(),r=setInterval(function(){n>0&&i-Date.now()>n&&clearInterval(r),e.stage&&(t(e.stage,e),clearInterval(r))},o);return r}},e.centerReg=function(t,o,n,i){var r,a="obj, container, index, add";if(r=zob(e.centerReg,arguments,a))return r;if(z_d("48"),zot(t)||!t.getBounds||!t.getBounds())return void zog("zim methods - centerReg(): please provide object with bounds set");var s=t.getBounds();return t.regX=s.x+s.width/2,t.regY=s.y+s.height/2,o?e.center(t,o,n,i):t},e.center=function(t,o,n,i){var r,a="obj, container, index, add";if(r=zob(e.center,arguments,a))return r;if(z_d("48.1"),zot(t)||!t.getBounds)return void zog("zim.center(): please provide object with bounds");if(zot(o)||!o.getBounds)return void zog("zim.center(): please provide container with bounds");var s=t.getBounds(),l=o.getBounds();if(zot(i)&&(i=!0),i&&o.addChild&&(zot(n)||"number"==typeof n&&isNaN(n)?o.addChild(t):o.addChildAt(t,n)),zot(l))return t;if(zot(s))return t.x=o.getBounds().width/2,t.y=o.getBounds().height/2,t;var d=t.localToLocal(t.regX,t.regY,o),c=e.boundsToGlobal(t),u=e.boundsToGlobal(o,c,!0);if(t.x=l.x+l.width/2-u.width/2+(d.x-u.x),t.y=l.y+l.height/2-u.height/2+(d.y-u.y),!i&&o.getStage&&o.stage&&t.parent){var h=o.localToLocal(t.x,t.y,t.parent);t.x=h.x,t.y=h.y}return t},e.place=function(t,o){function n(){zog(o+".x = "+Math.round(t.x)+"; "+o+".y = "+Math.round(t.y)+";"),zog(o+".pos("+Math.round(t.x)+", "+Math.round(t.y)+");")}z_d("49"),zot(t)||(zot(o)&&(o="obj"),e.drag({obj:t,currentTarget:!0,dragCursor:"crosshair"}),zog("place "+o+" - to get new position"),t.on("click",n))},e.placeReg=function(t,o){function n(){var e=t.globalToLocal(a.x,a.y);zog(o+".regX = "+Math.round(e.x)+"; "+o+".regY = "+Math.round(e.y)+";"),zog(o+".reg("+Math.round(e.x)+", "+Math.round(e.y)+");")}if(z_d("49.5"),!zot(t)){var i=t.stage;if(zot(i))return void zog("zim.placeReg() - add object to stage before calling placeReg()");zot(o)&&(o="obj");var r=t.parent.localToGlobal(t.x,t.y),a=new e.Shape(-25,-25,50,50).addTo(i).pos(r.x,r.y);a.graphics.s("white").mt(-25,0).lt(25,0).mt(0,-25).lt(0,20),a.compositeOperation="difference",a.expand(0),e.drag({obj:a}),zog("place cursor to get new registration point location"),i.on("stagemouseup",n)}},e.expand=function(e,t,o){if(z_d("50"),zot(e)||!e.getBounds)return void zog("zim methods - expand(): please provide object with bounds set");zot(t)&&(t=20),zot(o)&&(o=t);var n=e.getBounds(),i=new createjs.Shape;return i.graphics.f("0").r(n.x-t,n.y-o,n.width+2*t,n.height+2*o),e.hitArea=i,e},e.setMask=function(t,o){if(z_d("50.1"),zot(t))return void zog("zim methods - setMask(): please provide obj");var n;return o&&o.shape?(o.zimMask=n=o.shape.clone(),e.copyMatrix(n,o),n.regX=o.regX,n.regY=o.regY,n.centerReg||zimify(n),o.addChildAt(n,0),n.alpha=0):n=o,t.mask=n,n},e.ANIMATE=!0,e.OPTIMIZE=!1,e.ACTIONEVENT="mousedown",e.Ticker={stages:null,myUpdate:null,alwaysList:new e.Dictionary,list:new e.Dictionary,setFPS:function(t,o){zot(t)&&zot(o)?(t=30,o=60):zot(t)?t=30:zot(o)&&(o=t),e.Ticker.framerate=createjs.Ticker.framerate=e.mobile()?t:o},setTimingMode:function(e){createjs.Ticker.timingMode=createjs.Ticker.RAF,"synched"==e&&(createjs.Ticker.timingMode=createjs.Ticker.RAF_SYNCHED),"timeout"==e&&(createjs.Ticker.timingMode=createjs.Ticker.TIMEOUT)},add:function(t,o){z_d("30");var n=e.Ticker;return n.has(t,o)?t:(n.framerate||n.setFPS(),(zot(o)||!o.update)&&(o=zimDefaultFrame.stage),zot(t)||"function"!=typeof t?void zog("zim.Ticker.add() - only add functions"):(n.ticker||(n.ticker=createjs.Ticker.on("tick",n.call)),n.list.at(o)?n.list.at(o).push(t):n.list.add(o,[t]),t))},call:function(){for(var t,o,n=e.Ticker,i=0;i<n.list.length;i++){t=n.list.objects[i],o=n.list.values[i];for(var r=0;r<o.length;r++)o[r]();n.alwaysList.at(t)?t.update():o.length>0&&(zot(n.update)&&!e.OPTIMIZE?t.update():n.update&&t.update())}for(i=0;i<n.alwaysList.length;i++)t=n.alwaysList.objects[i],null==n.list[t]&&t.update()},always:function(t){z_d("30");var o=e.Ticker;o.framerate||o.setFPS(),(zot(t)||!t.update)&&(t=zimDefaultFrame.stage),o.alwaysList.add(t,!0),o.ticker||(o.ticker=createjs.Ticker.on("tick",o.call))},alwaysOff:function(t){var o=e.Ticker;(zot(t)||!t.update)&&(t=zimDefaultFrame.stage),o.alwaysList.remove(t)},remove:function(t){var o=e.Ticker;if(zot(t)||"function"!=typeof t)return void zog("zim.Ticker - only remove functions");for(var n,i=0,r=0;r<o.list.length;r++){n=o.list.objects[r];var a=o.list.values[r].indexOf(t);a>-1&&o.list.values[r].splice(a,1),i+=o.list.values[r].length}o.alwaysList.length>0||0==i&&(createjs.Ticker.off("tick",o.ticker),o.ticker=null)},removeAll:function(t){for(var o,n=e.Ticker,i=0,r=0;r<n.list.length;r++)o=n.list.objects[r],(zot(t)||t===o)&&(n.list.values[r]=[]),i+=n.list.values[r].length;n.alwaysList.length>0||0==i&&(createjs.Ticker.off("tick",n.ticker),n.ticker=null)},has:function(t,o){return(zot(o)||!o.update)&&(o=zimDefaultFrame.stage),e.Ticker.list&&e.Ticker.list.at(o)&&e.Ticker.list.at(o).indexOf(t)>=0},dispose:function(t){for(var o,n=e.Ticker,i=0,r=n.list.length-1;r>=0;r--)o=n.list.objects[r],zot(t)||t===o?(n.list.remove(t),n.alwaysList.remove(t)):i+=n.list.values[r].length;return n.alwaysList.length>0?void 0:(0==i&&(createjs.Ticker.off("tick",n.ticker),n.ticker=null),!0)}},Object.defineProperty(e.Ticker,"update",{get:function(){return e.Ticker.myUpdate},set:function(t){var o=e.Ticker;"boolean"!=typeof t&&(t=null),o.myUpdate=t,o.myUpdate===!1&&(cancelAnimationFrame(o.ticker),o.alwaysList=new e.Dictionary)}}),e.Accessibility=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p){function m(e){var t=e.currentTarget,o=t.boundsToGlobal(),n=o.x+o.width/2,i=o.y+o.height/2,r=5;e.stageX<n-r||e.stageX>n+r||e.stageY<i-r||e.stageY>i+r?v():z()}function g(){Y&&(Y.innerHTML="")}function z(){J=!0,x(),Y&&Y.setAttribute("aria-hidden",!1),e.ACTIONEVENT="click",a.stage.removeChild(L),I.alwaysHighlight=!1,a.stage.update();for(var t,o,n,i=0;i<N.length;i++)t=N[i],o=t.obj,n=o.zimTabTag,n.disabled=!1,t.title=t.title.replace(/\s\(use arrow keys\)/,""),n.setAttribute("aria-label",t.title),n.addEventListener("focus",b)}function v(){J=!1;for(var e,t,o,n=0;n<N.length;n++)e=N[n],t=e.obj,o=t.zimTabTag,o.disabled=!1;x(),s&&C()}function b(e){var t=e.currentTarget,o=t.zimObject;G=o.zimTabIndex,o.focus=!0;var n=new createjs.Event("change");n.title=t.getAttribute("aria-label"),I.dispatchEvent(n)}function y(e){J=!1,e.target.focusTab.focus()}function w(){zot(J)||J?z():v()}function x(){Q=!0,_.removeEventListener("focus",w),X.removeEventListener("focus",w),R.removeEventListener("focus",y),W.removeEventListener("focus",y),R.parentNode.removeChild(R),W.parentNode.removeChild(W),H.removeEventListener("focus",y),F.removeEventListener("focus",y),H.parentNode.removeChild(H),F.parentNode.removeChild(F);
for(var e=0;e<$.length;e++)$[e][0].off("mousedown",$[e][1])}function C(){for(var e=0;e<Z.length;e++){var t=Z[e];(!t.zimObject||"Loader"!=t.zimObject.type&&"TextArea"!=t.zimObject.type)&&(Z[e].style.left="-2000px")}}function T(e){var t=e.currentTarget;if("RadioButton"==t.type||"TabsButton"==t.type||"PadButton"==t.type)for(var o=0;o<t.zimTabParent.buttons.length;o++){var n=t.zimTabParent.buttons[o];n.zimTabTag.setAttribute("aria-label",n.zimTabTag.getAttribute("aria-label").split(" - currently")[0]+(t.zimTabParent.selectedIndex==n.tabIndex?" - currently selected.":" - currently not selected."))}I.tabIndex=e.currentTarget.zimTabIndex,I.activatedObject=t}function k(e){return"TextArea"==e.type||"RadioButtons"==e.type||"Tabs"==e.type||"Pad"==e.type?e.type:"Waiter"==e.type?"Waiter active - please wait":e.text?e.type+" - "+("a"==e.text||"A"==e.text?"eh":e.text):e.type+("Dial"==e.type||"Slider"==e.type||"ColorPicker"==e.type||"Stepper"==e.type?" (use arrow keys)":"")+("TextArea"==e.type?" (press ENTER to edit)":"")}function j(t){var o=t.obj;t.title=t.title.replace(/\.$/,""),"RadioButton"==o.type||"TabsButton"==o.type||"PadButton"==o.type?t.title=t.title+(o.tabIndex==o.zimTabParent.selectedIndex?" - currently selected":" - currently not selected"):"CheckBox"==o.type?t.title=t.title+(o.checked?" - currently checked":" - currently not checked"):"Stepper"==o.type?t.title=t.title+" - currently displaying "+o.currentValue:"Slider"==o.type||"Dial"==o.type?t.title=t.title+" - currently at "+e.decimals(o.currentValue,I.decimals):"ColorPicker"==o.type?t.title=t.title+" - currently at "+o.selectedColor:"TextArea"==o.type?t.title=t.title+(""!=o.tag.value?"":" - placeholder: "+o.tag.placeholder):"Indicator"==o.type&&(t.title=t.title+" - currently "+(o.selectedIndex>=0?"at "+(o.selectedIndex+1)+" of "+o.num:"not indicating")),t.title+="."}function M(e,t,o,n,i){var r,s;if(n&&(r=n.obj),n&&("TextArea"==r.type||"Loader"==r.type)){var s=r.tag;return s.setAttribute("aria-label",t),r&&s.setAttribute("aria-hidden",!r.stage),"before"==i?o.parentNode.insertBefore(s,o):o.parentNode.insertBefore(s,o.nextSibling),s.style.zIndex="5",s.zimObject=r,n.obj.zimTabTag=s,Z.push(s),s}if(!n||"Dial"!=r.type&&"Slider"!=r.type&&"Stepper"!=r.type&&"ColorPicker"!=r.type)s=document.createElement("div"),r&&(s.zimObject=r),s.innerHTML="tag",s.setAttribute("role","button");else{var l=[];if("Dial"==r.type||"Slider"==r.type)for(var d=r.step<=0?(r.max-r.min)/20:r.step,c=r.min;c<r.max;c+=d)l.push(r.min+c);else"Stepper"==r.type?l=r.stepperArray:"ColorPicker"==r.type&&(l=r.colors);s=document.createElement("select"),s.disabled=!0,s.zimObject=r,s.addEventListener("change",function(e){J&&(e.currentTarget.zimObject.zimTabParent.currentValueEvent=e.target.value,a.stage.update())}),s.size=1;for(var u,h,c=0;c<l.length;c++)u=l[c],h=document.createElement("option"),h.setAttribute("aria-label",u),h.innerHTML=u,s.add(h),u==r.zimTabParent.currentValue&&h.setAttribute("selected","selected");s.setAttribute("role","button")}if(s.setAttribute("id",e),s.setAttribute("tabindex",0),s.setAttribute("aria-label",t),r&&s.setAttribute("aria-hidden",!r.stage),"before"==i?o.parentNode.insertBefore(s,o):o.parentNode.insertBefore(s,o.nextSibling),s.style.position="absolute",n){var r=n.obj,f=r.boundsToGlobal();s.style.left=a.x+f.x*a.scale+"px",s.style.top=a.y+f.y*a.scale+"px",s.style.width=f.width*a.scale+"px",s.style.height=f.height*a.scale+"px",n.obj.zimTabTag=s}else s.style.left="-1000px",s.style.top=a.y+"px";return s.style.overflow="hidden",s.style.zIndex="5",s.style.fontSize="20px",Z.push(s),s}function S(){for(var e=!1,t=0;t<Z.length;t++)if(document.activeElement==Z[t]){e=!0;break}return document.activeElement==a.canvas||e?!0:!1}function A(e){a.shiftKey||zid(q+"PrefixTab")!=document.activeElement&&a.canvas!=document.activeElement?!a.shiftKey||zid(q+"SuffixTab")!=document.activeElement&&zid(q+"BufferTab")!=document.activeElement||(N.length>0&&(N[0].obj.focus=!0),nt=!0,ot=!0,E(e)):(N.length>0&&(N[N.length-1].obj.focus=!0),nt=!0,ot=!0,E(e))}function E(e){return e.ctrlKey?void P(e.shiftKey?-1:1):(I.tab(e.shiftKey?-1:1),void e.preventDefault())}function P(e){ot=!1,zid(q+(1==e?"SuffixTab":"PrefixTab")).focus(),a.stage.removeChild(f),a.stage.update(),I.tabIndex=-1}var D,O="appName, tabOrder, tabIndex, cycle, decimals, frame, alwaysHighlight, AHTime, AHColor, AHBorderWidth, AHBorderPadding, AHAlpha, AHObject, AHObjectScale";if(D=zob(e.Accessibility,arguments,O,this))return D;if(z_d("30.5"),this.cjsEventDispatcher_constructor(),zot(t)&&(t="application"),zot(i)&&(i=!1),zot(r)&&(r=2),zot(a)&&(a=zimDefaultFrame),zot(s)&&(s=!1),zot(l)&&(l=700),zot(d)&&(d="brown"),zot(c)&&(c=3),zot(u)&&(u=5),zot(h)&&(h=.8),zot(p)&&(p=.8),zot(f)){var B=new e.Shape;B.mouseEnabled=!1}else f.mouseEnabled&&(f.mouseEnabled=!1);var I=this;I.cycle=i,I.decimals=r,I.alwaysHighlight=s,I.AHTime=l,I.AHColor=d,I.AHBorderWidth=c,I.AHBorderPadding=u,I.AHAlpha=h,I.AHObjectScale=p;var L,_,X,Y,R,W,H,F,N=-1,G=-1,Z=[],U=[],V={RadioButtons:"option",Tabs:"tab",Pad:"key"},q=a.canvas.id,K=e.mobile(),Q=!1,J=null,$=[],et=150;Object.defineProperty(this,"tabOrder",{get:function(){return N},set:function(e){_&&_.removeEventListener("focus",g),X&&X.removeEventListener("focus",g);for(var o=0;o<Z.length;o++)Z[o].outerHTML="";Z=[];var n,i;for(o=0;o<U.length;o++)n=N[o],n&&U[o][0].off("mousedown",U[o][1]);U=[],N=[];for(var r=[],s=a.canvas,l=0,o=0;o<e.length;o++){if(n=e[o],n.constructor=={}.constructor){if(i=n.obj,!i||!i.getStage)continue;n.title||(n.title=k(i,o+l))}else i=n,n={obj:n,title:k(n,o+l)};if("RadioButtons"==i.type||"Tabs"==i.type||"Pad"==i.type){var d=[];l--;for(var c=0;c<i.buttons.length;c++){l++;var u=i.buttons[c],h={obj:u,title:n.title+" - "+V[i.type]+": "+("a"==u.text||"A"==u.text?"eh":u.text)};d.push(h),u.zimTabParent=i,u.zimTabParent.zimAccessibility=I,u.zimTabIndex=o+l,u.tabIndex=c,u.zimAccessibility=I,j(h),s=M(q+"Tab"+(o+l),h.title,s,h),U.push([u,u.on("mousedown",T)]),Q||$.push([u,u.on("mousedown",m)])}r=r.concat(d)}else i.zimTabIndex=o+l,i.zimTabParent=i,j(n),i.zimAccessibility=I,U.push([i,i.on("mousedown",T)]),Q||$.push([i,i.on("mousedown",m)]),r.push(n),s=M(q+"Tab"+(o+l),n.title,s,n)}_=I.startAppTag=M(q+"PrefixTab",t+" start",a.canvas,null,"before"),_.addEventListener("focus",g),Q||(_.addEventListener("focus",w),R=M(q+"noAriaTab","",_,null,"before"),R.setAttribute("aria-hidden",!0),R.focusTab=_,R.addEventListener("focus",y),H=M(q+"noAriaTab","",_),H.setAttribute("aria-hidden",!0),H.focusTab=_,H.addEventListener("focus",y)),s=M(q+"BufferTab","",s),K&&s.setAttribute("aria-hidden",!0),s=X=I.endAppTag=M(q+"SuffixTab",t+" end",s),X.addEventListener("focus",g),Q||(X.addEventListener("focus",w),s=W=M(q+"noAriaTab","",X),W.setAttribute("aria-hidden",!0),W.focusTab=X,W.addEventListener("focus",y),F=M(q+"noAriaTab","",X,null,"before"),F.setAttribute("aria-hidden",!0),F.focusTab=X,F.addEventListener("focus",y)),N=r}}),Object.defineProperty(this,"tabIndex",{get:function(){return G},set:function(t){function o(){if(G&&G>-1)N[G].obj.focus=!1;else for(var e=0;e<N.length;e++)N[e].obj.focus=!1}function n(){o(),ot=!1,I.AHObject&&a.stage.removeChild(I.AHObject),I.alwaysHighlightShape&&a.stage.removeChild(I.alwaysHighlightShape),a.stage.update(),G=-1}if(_state)if(0>t||t>=N.length)n();else{t!=G&&o();var i=N[t].obj;if(i.stage){if(G=t,i.focus=!0,ot=!0,nt=!1,I.changeTitle(i),i.zimTabTag.focus(),setTimeout(function(){i.zimTabTag.focus();var e=new createjs.Event("change");e.title=i.zimTabTag.getAttribute("aria-label"),I.dispatchEvent(e)},et),I.alwaysHighlight&&!J){if(I.AHObject){L=I.AHObject;var r=e.boundsToGlobal(i);I.AHObject.alp(I.AHAlpha).addTo(a.stage),I.AHObject.fit(r.x,r.y,r.width,r.height),I.AHObject.scale(I.AHObject.scaleX*I.AHObjectScale),I.AHTime>0&&(tt=setTimeout(function(){a.stage.removeChild(I.AHObject),a.stage.update()},I.AHTime))}else{L=B;var s=i.getBounds(),l=i.localToGlobal(s.x-5,s.y-5),d=i.localToGlobal(s.x+s.width+5,s.y-5),c=i.localToGlobal(s.x+s.width+5,s.y+s.height+5),u=i.localToGlobal(s.x-5,s.y+s.height+5),h=B.graphics;h.clear(),h.s(I.AHColor).ss(I.AHBorderWidth).mt(l.x,l.y).lt(d.x,d.y).lt(c.x,c.y).lt(u.x,u.y).lt(l.x,l.y).cp(),B.alpha=I.AHAlpha,I.AHTime>0&&(tt=setTimeout(function(){a.stage.removeChild(B),a.stage.update()},I.AHTime))}a.stage.addChild(L),a.stage.update()}}else n()}}}),Object.defineProperty(this,"aria",{get:function(){return J},set:function(e){J=e,J&&z()}}),zot(o)?setTimeout(function(){if(-1==N){N=[];var t=[];e.loop(a.stage,function(e){e.type&&t.push(e)}),I.tabOrder=t,zot(n)||(I.tabIndex=n)}},50):(N=[],I.tabOrder=o,zot(n)||(I.tabIndex=n));var tt,ot=!1,nt=!0,it=a.on("keydown",function(e){if(9==e.keyCode&&(S()||(ot=!1,-1!=I.tabIndex&&(I.tabIndex=-1)),ot?E(e):A(e)),ot&&N.length>0&&I.tabIndex>=0&&13==e.keyCode){var t=N[I.tabIndex],o=t.obj;if(t&&o.stage){var n=new createjs.Event("mousedown"),i=new createjs.Event("click");n.fromEnter=i.fromEnter=!0,"Pane"==o.type?(o.backdrop.dispatchEvent(n),o.backdrop.dispatchEvent(i)):(o.dispatchEvent(n),o.dispatchEvent(i))}}});this.tab=function(e){if(clearTimeout(tt),L&&a.stage.removeChild(L),zot(e)&&(e=1),0==N.length)return void P(e);for(var t=0;t<N.length;t++){var o=N[t].obj;if(o.focus){o.focus=!1;var n=t+e,i=(n+1e4*N.length)%N.length,r=N[i];o=r.obj;for(var s=0,l=!1;!o.stage||!(!o.zimTabParent&&(zot(o.enabled)||o.enabled)||o.zimTabParent&&(zot(o.zimTabParent.enabled)||o.zimTabParent.enabled));)if(s++,n+=e,i=(n+100*N.length)%N.length,r=N[i],o=r.obj,s==N.length){l=!0;break}if(l||!I.cycle&&n!=i&&!nt)return void P(e);nt=!1,I.tabIndex=i;break}}},this.changeTitle=function(e,t,o){if("number"!=typeof e&&(e=e.zimTabIndex),!zot(e)){if(o&&zot(t))return void(I.tabIndex=e);var n=N[e],i=n.obj;zot(t)&&(t=i.zimTabTag.getAttribute("aria-label").split(" - currently")[0]),n.title=t,j(n),i.zimTabTag.setAttribute("aria-label",n.title),o&&(I.tabIndex=e)}};var rt=!1;this.talk=function(e){rt||(Y=M(q+"TalkTab","",X),Y.setAttribute("role","alert"),Y.setAttribute("aria-hidden",!J),rt=!0),Y.setAttribute("aria-label",e),Y.innerHTML=" ",Y.innerHTML=e;var t=new createjs.Event("change");t.title=e,I.dispatchEvent(t)},this.resize=function(e){function t(e){if("TextArea"==e.type||"Loader"==e.type)return void e.resize();var t=e.boundsToGlobal(),o=e.zimTabTag;o.style.left=a.x+t.x*a.scale+"px",o.style.top=a.y+t.y*a.scale+"px",o.style.width=t.width*a.scale+"px",o.style.height=t.height*a.scale+"px",o.setAttribute("aria-hidden",!e.stage),o.hidden=!e.stage}if(zot(e)){if(I.alwaysHighlight&&!zot(J))return;for(var o=0;o<N.length;o++)t(N[o].obj)}else{if("number"!=typeof e&&(e=e.zimTabIndex),0>e)return;var n=N[e],i=n.obj;if(!i.stage&&L&&i==I.currentObject&&(a.stage.removeChild(L),a.stage.update()),I.alwaysHighlight&&!zot(J))return;t(i)}},Object.defineProperty(this,"currentObject",{get:function(){return N[G]&&N[G].obj?N[G].obj:null},set:function(e){for(var t=0;t<N.length;t++)if(N[t].obj==e){I.tabIndex=t;break}}}),_state=!0,Object.defineProperty(this,"enabled",{get:function(){return _state},set:function(e){_state=e}}),this.dispose=function(){I.tabOrder=[];for(var e=0;e<Z.length;e++)Z[e].outerHTML="";I.removeAllEventListeners(),a.off("keydown",it)}},e.extend(e.Accessibility,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),e.Swipe=function(t,o,n){var i,r="obj, distance, duration";if(i=zob(e.Swipe,arguments,r,this))return i;if(z_d("70"),this.cjsEventDispatcher_constructor(),zot(t)||!t.on)return void zog("zim controls - Swipe():\nPlease pass in object");zot(o)&&(o=30),zot(n)&&(n=80),this.distance=o,this.duration=n,this.active=!0;var a,s,l,d,c,u,h=this;t.on("mousedown",function(e){function o(){var e=new createjs.Event("swipe");e.obj=h.obj,e.swipeX=e.swipeY=0,h.direction="none",Math.abs(l-a)>Math.abs(d-s)?(l-a>h.distance&&(e.swipeX=1,h.direction="right"),a-l>h.distance&&(e.swipeX=-1,h.direction="left")):(d-s>h.distance&&(e.swipeY=1,h.direction="down"),s-d>h.distance&&(e.swipeY=-1,h.direction="up")),h.dispatchEvent(e)}h.active&&!e.target.zimNoSwipe&&(h.obj=e.target,l=a=e.stageX,d=s=e.stageY,c=!0,h.dispatchEvent("swipedown"),clearTimeout(u),u=setTimeout(function(){c&&(o(),c=!1)},h.duration),t.on("pressmove",function(e){l=e.stageX,d=e.stageY}),t.on("pressup",function(){c&&(o(),c=!1,clearTimeout(u))}))}),this.disable=function(){h.active=!1},this.enable=function(){h.active=!0}},e.extend(e.Swipe,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),e.Pages=function(t,o,n,i,r){function a(){c=new createjs.Shape,c.graphics.f("black").r(0,0,h,f+1),u=new createjs.Shape,u.graphics.f("white").r(0,0,h,f+1)}var s,l="pages, transition, speed, transitionTable, holder";if(s=zob(e.Pages,arguments,l,this))return s;if(z_d("71"),this.zimContainer_constructor(),this.type="Pages",zot(t)&&(t=[]),this.pages=t,zot(o)&&(o="none"),zot(n)&&(n=200),zot(i)&&(i=[]),this.transitionTable=i,zot(r)&&zimDefaultFrame&&(r=zimDefaultFrame.stage),!r.getBounds||!r.getBounds())return void zog("zim controls - Pages():\nholder object must have bounds set");this.speed=n,this.active=!0;var d=this;d.transitioning=!1;var c,u,h=r.getBounds().width,f=r.getBounds().height;("none"!=o||i!=[])&&a();for(var p,m,g=["left","right","up","down"],z=0;z<t.length;z++)p=t[z],p.constructor!=={}.constructor&&(p=t[z]={page:t[z]}),p.page.zimSwipeArray=p.swipe?p.swipe:[],p.page.zimOriginalAlpha=p.page.alpha,p.page.parent&&p.page.parent.removeChild(p.page);var v=this.page=t[0]?t[0].page:null;this.addChild(v),this.swipe=new e.Swipe(r);var b,y=!1,w=this.swipe.on("swipe",function(e){if(d.active){var t=e.currentTarget.direction;if("none"!=t){var o="";"left"==t?o="right":"right"==t?o="left":"up"==t?o="down":"down"==t&&(o="up"),t=o;var n=g.indexOf(t);m=v.zimSwipeArray[n],b=[m,t,null,null,!0],d.page=v,d.nextPage=m,d.direction=t,d.dispatchEvent("swipe"),setTimeout(function(){y||d.go(m,t,null,null,!0)},50)}}});this.addPage=function(e,t){zot(t)&&(t=[]);var o={page:e,swipe:t};o.page.zimSwipeArray=o.swipe?o.swipe:[],o.page.zimOriginalAlpha=o.page.alpha,v?o.page.parent&&o.page.parent.removeChild(o.page):(v=d.page=o.page,d.addChild(v))},this.removePage=function(e){d.currentPage==e&&(d.removeChild(e),r.stage&&r.stage.update()),e.zimSwipeArray=null},this.setSwipe=function(e,t){zot(t)&&(t=[]);var o={page:e,swipe:t};o.page.zimSwipeArray=o.swipe?o.swipe:[]},this.pause=function(){y=!0},this.unpause=function(){y&&d.go(b[0],b[1],b[2],b[3],b[4])};var x=!0;this.go=function(t,i,a,s,l){function p(e){e[0].uncache(),e[1].uncache(),d.transitioning=!1,d.dispatchEvent("pagetransitioned"),d.removeChild(d.lastPage),d.removeChild(c),d.removeChild(u),x=!0}function m(t){d.removeChild(d.lastPage),e.animate(t.shift(),{alpha:0},d.speed/2,null,p,t)}if("number"==typeof t){var z=d.pages[t];if(zot(z))return;t=z.page}setTimeout(function(){y=!1},200);for(var b=[{x:h},{x:-h},{y:f},{y:-f}],w=[{x:0},{x:0},{y:0},{y:0}],C=[{x:h/2,alpha:0},{x:-h/2,alpha:0},{y:f/2,alpha:0},{y:-f/2,alpha:0}],T=o,k=n,j=0;j<d.transitionTable.length;j++)if(d.transitionTable[j][0]==v&&d.transitionTable[j][1]==t){T=d.transitionTable[j][2],k=d.transitionTable[j][3];break}if(zot(a)&&(a=T),zot(s)&&(s=k),d.speed=s,d.direction=i,""==t||null==t)d.page=v,d.dispatchEvent("nothing");else if("string"==typeof t)d.page=v,d.dispatchEvent(t);else{if(t==v)return;zot(i)&&(i="right");var M=g.indexOf(i);if(!x)return;x=!1,t.x=0,t.y=0,t.alpha=t.zimOriginalAlpha,d.transitioning=!0,"slide"==a?(t.x=-(0|b[M].x),t.y=-(0|b[M].y),t.cache(0,0,(h+1)/t.scaleX,(f+1)/t.scaleY),v.cache(0,0,(h+1)/v.scaleX,(f+1)/v.scaleY),d.addChild(t),d.addChild(v),e.animate(v,b[M],d.speed,null,p,[v,t]),e.animate(t,w[M],d.speed)):"reveal"==a?(t.cache(0,0,(h+1)/t.scaleX,(f+1)/t.scaleY),v.cache(0,0,(h+1)/v.scaleX,(f+1)/v.scaleY),d.addChild(t),d.addChild(v),e.animate(v,C[M],d.speed,null,p,[v,t])):"fade"==a?(t.cache(0,0,(h+1)/t.scaleX,(f+1)/t.scaleY),v.cache(0,0,(h+1)/v.scaleX,(f+1)/v.scaleY),t.alpha=1,d.addChild(t),d.addChild(v),e.animate(v,{alpha:0},d.speed,null,p,[v,t])):"black"==a?(t.cache(0,0,(h+1)/t.scaleX,(f+1)/t.scaleY),v.cache(0,0,(h+1)/v.scaleX,(f+1)/v.scaleY),t.alpha=1,d.addChild(t),d.addChild(v),c.alpha=0,d.addChild(c),e.animate(c,{alpha:1},d.speed/2,null,m,[c,v,t])):"clear"==a?(t.cache(0,0,(h+1)/t.scaleX,(f+1)/t.scaleY),v.cache(0,0,(h+1)/v.scaleX,(f+1)/v.scaleY),t.alpha=0,d.addChild(t),d.addChild(v),e.animate(v,{alpha:0},d.speed/2),e.animate(t,{alpha:1},d.speed/2,null,p,[v,t],d.speed/2)):"white"==a?(t.cache(0,0,(h+1)/t.scaleX,(f+1)/t.scaleY),v.cache(0,0,(h+1)/v.scaleX,(f+1)/v.scaleY),t.alpha=1,d.addChild(t),d.addChild(v),u.alpha=0,d.addChild(u),e.animate(u,{alpha:1},d.speed/2,null,m,[u,v,t])):(d.transitioning=!1,d.addChild(t),d.removeChild(v),x=!0),d.lastPage=v,d.page=t,zot(l)&&(l=!1),d.fromSwipe=l,d.dispatchEvent("page"),v=t,r.stage&&r.stage.update()}},this.resize=function(){h=r.getBounds().width,f=r.getBounds().height,("none"!=o||i!=[])&&a()},this.puff=function(e){for(var o=0;o<t.length;o++)d.addChild(t[o].page);d.addChild(v),e>0&&setTimeout(function(){d.settle()},e)},this.settle=function(){d.removeAllChildren(),d.addChild(v),d.dispatchEvent("puffed")},this.disable=function(){d.active=!1},this.enable=function(){d.active=!0},this.dispose=function(){return d.swipe.off("swipe",w),d.removeAllChildren(),t=null,!0}},e.extend(e.Pages,e.Container,"clone","zimContainer",!1),zot(e.ACTIONEVENT)&&(e.ACTIONEVENT="mousedown"),e.HotSpots=function(t,o,n){function i(t){var i=null;if(!Array.isArray(t.rect)){if(i=t.rect,!i)return void zog("zim controls - HotSpots(): HotSpot "+t.page+" "+t.rect+" button does not exist");t.rect=[i.x,i.y,1,1]}d=new e.HotSpot(t.page,t.rect[0],t.rect[1],t.rect[2],t.rect[3],t.call,o),d.zimHSpage=t.page,d.button=i,u.push(d),d.on(c,r),i&&(d.spot.mouseEnabled=!1,d.spot.mouseChildren=!1,i.zimHScall=t.call,i.zimHSEvent=i.on(c,r,!0),n||(i.zimHSMDEvent=i.on("mousedown",function(e){e.stopImmediatePropagation()})),i.cursor="pointer")}function r(e){e.stopImmediatePropagation&&e.stopImmediatePropagation(),window.event&&(window.event.cancelBubble=!0),"function"==typeof e.currentTarget.zimHScall&&e.currentTarget.zimHScall(e)}var a,s="spots, local, mouseDowns";if(a=zob(e.HotSpots,arguments,s,this))return a;if(z_d("72"),this.zimContainer_constructor(),this.type="HotSpots",zot(t)||!Array.isArray(t))return void zog("zim controls - HotSpots():\nplease provide an array of HotSpot data");zot(o)&&(o=!0),zot(n)&&(n=!1);for(var l,d,c="mousedown"==e.ACTIONEVENT?"mousedown":"click",u=[],h=0;h<t.length;h++)i(t[h]);this.addHotSpot=function(e,o,n){l={page:e,rect:o,call:n},t.push(l),i(l)},this.show=function(){for(var e=0;e<u.length;e++)d=u[e],d.button||d.show()},this.hide=function(){for(var e=0;e<u.length;e++)d=u[e],d.hide()},this.removeHotSpots=function(o,i){for(var a=t.length-1;a>=0;a--)l=t[a],d=u[a],i&&!Array.isArray(i)&&(i=[i.x,i.y,i.getBounds().width,i.getBounds().height]),(zot(o)&&zot(i)||zot(i)&&o==l.page||zot(o)&&e.arraysEqual(i,l.rect)||o==l.page&&e.arraysEqual(i,l.rect))&&(t.splice(a,1),d.button&&(d.button.off(c,d.button.zimHSEvent),d.button.zimHSEvent=null,n||(d.button.off("mousedown",d.button.zimHSMDEvent),d.button.zimHSMDEvent=null)),d.off(c,r),d.dispose(),u.splice(a,1))},this.dispose=function(){for(var e=0;e<u.length;e++)d=u[e],d.button&&(d.button.off(c,d.button.zimHSEvent),d.button.zimHSCall=null,d.button.zimHSEvent=null,n||(d.button.off("mousedown",d.button.zimHSMDEvent),d.button.zimHSMDEvent=null)),d.off(c,r),d.dispose();return!0}},e.extend(e.HotSpots,e.Container,"clone","zimContainer",!1),e.HotSpot=function(t,o,n,i,r,a,s){var l,d="obj, x, y, width, height, call, local";if(l=zob(e.HotSpot,arguments,d,this))return l;if(z_d("73"),this.zimContainer_constructor(),this.type="HotSpot",zot(t)||!t.addChild)return void zog("zim controls - HotSpot():\nPlease pass in container object for obj");if(t instanceof createjs.Container==0)return void zog("zim controls - HotSpot():\nObjects passed in should be Containers");if(zot(o)||zot(n)||zot(i)||zot(r))return void zog("zim controls - HotSpot():\nPlease pass in x, y, width, height");zot(s)&&(s=!0),eventType="mousedown"==e.ACTIONEVENT?"mousedown":"click";var c=i,u=r,h=new createjs.Shape,f=new createjs.Shape;if(s)h.graphics.f("#999999").dr(o,n,c,u),f.graphics.f("#999999").dr(o,n,1,1);else{var p=t.globalToLocal(o,n),m=t.globalToLocal(o+c,n+u),g=m.x-p.x,z=m.y-p.y;h.graphics.f("#999999").dr(p.x,p.y,g,z),f.graphics.f("#999999").dr(p.x,p.y,1,1)}h.alpha=.4,h.mouseEnabled=!1,f.alpha=.01,f.cursor="pointer",this.spot=f;var v=f.on(eventType,function(){"function"==typeof a&&a()});t.addChild(f),f.hitArea=h,this.show=function(){t.addChild(h)},this.hide=function(){t.removeChild(h)},this.dispose=function(){return f.off(eventType,v),t.removeChild(f),delete f,!0}},e.extend(e.HotSpot,e.Container,"clone","zimContainer",!1),e.Manager=function(){z_d("75");var e=this;this.items=[],this.add=function(t){Array.isArray(t)?e.items.concat(t):e.items.push(t)},this.remove=function(t){if(zot(t))return void(e.items=[]);Array.isArray(t)||(t=[]);for(var o,n=0;n<t.length;n++){o=t[n];var i=e.items.indexOf(o);-1!=i&&e.items.splice(i,1)}},this.resize=function(){if(e)for(var t=0;t<e.items.length;t++)e.items[t].resize||e.items.splice(t)},this.dispose=function(){for(var t=e.items.length-1;t>=0;t--)e.items[t].dispose();return e.items=[],e=null,!0}},e.ResizeManager=function(){z_d("75.5"),e.Manager.call(this,"ResizeManager")},e.ResizeManager.prototype=new e.Manager,e.ResizeManager.prototype.constructor=e.ResizeManager,e.Guide=function(t,o,n,i,r){function a(t,o,n){var i=new e.Container;return i.shape=new createjs.Shape,i.shape.graphics.s(o).ss(1).f(t).r(0,0,v,b),i.shape.alpha=.9,i.addChild(i.shape),i.label=new createjs.Text("10","16px verdana",n),i.label.textAlign="center",i.label.textBaseline="middle",i.addChild(i.label),i.mouseChildren=!1,i.mouseEnabled=!1,i}function s(){"stage"==t?(x=z.stage,t=x):x=t.stage,t.addChild(z),C=t.getBounds().width,T=t.getBounds().height,o?(g.y=T/2,g.label.text="y:"+(z.pixels?Math.round(70*C/100):"70%")):(g.x=C/2,g.label.text="x:"+(z.pixels?Math.round(70*T/100):"70%")),k=new createjs.Shape,z.addChild(k),o?k.x=.7*C:k.y=.7*T,S||(t.addChild(z),d()),x.off("stagemousemove",f),f=x.on("stagemousemove",l),x.update()}function l(e){var i,r;e?(i=t.globalToLocal(e.rawX,e.rawY),A=i):i={x:A.x,y:A.y},n?o?(r=Math.round(Math.abs(i.x-k.x)/C*100),g.label.text="x:"+Math.max(0,Math.min(r,100))+"%",g.y=Math.max(w,Math.min(i.y,m))):(r=Math.round(Math.abs(i.y-k.y)/T*100),g.label.text="y:"+Math.max(0,Math.min(r,100))+"%",g.x=Math.max(y,Math.min(i.x,p))):o?(r=Math.round(Math.abs(i.x-k.x)),g.label.text="x:"+Math.max(0,Math.min(r,Math.round(C))),g.y=Math.max(w,Math.min(i.y,m))):(r=Math.round(Math.abs(i.y-k.y)),g.label.text="y:"+Math.max(0,Math.min(r,Math.round(T))),g.x=Math.max(y,Math.min(i.x,p))),x&&x.update()}function d(){S=!0,C=t.getBounds().width,T=t.getBounds().height;var n;o?(n="ew-resize",j=new createjs.Rectangle(0,0,C,0)):(n="ns-resize",j=new createjs.Rectangle(0,0,0,T)),e.noDrag(k),setTimeout(function(){e.drag(k,j,n,n,null,null,!0)},500),x.mouseMoveOutside=!0,x.enableMouseOver(10),p=C-2*v/3,m=T-b-b,k.uncache();var i=k.graphics;o?(i.c().s("rgba(0,255,255,.1)").ss(20).mt(0,0).lt(0,T),i.f().s("white").ss(2).mt(0,0).lt(0,T),i.s("#00c5af").sd([20,20]).mt(0,0).lt(0,T).sd(),k.cache(-10,0,20,T)):(i.c().s("rgba(255,0,255,.1)").ss(20).mt(0,0).lt(C,0),i.f().s("white").ss(2).mt(0,0).lt(C,0),i.s("#d61fa0").sd([20,20]).mt(0,0).lt(C,0).sd(),k.cache(0,-10,C,20)),o?g.x=C:g.y=T,z.addChild(g)}function c(e){e||(e=event),x&&(String.fromCharCode(e.keyCode)==i.toUpperCase()&&(z.visible=!z.visible,x.off("stagemousemove",f),z.visible&&(f=x.on("stagemousemove",l,z)),x.update()),String.fromCharCode(e.keyCode)==r.toUpperCase()&&(z.pixels=!z.pixels))}var u,h="obj, vertical, percent, hideKey, pixelKey";if(u=zob(e.Guide,arguments,h,this))return u;if(z_d("76"),this.zimContainer_constructor(),this.type="Guide",zot(t)&&(t=zimDefaultFrame?zimDefaultFrame.stage:"stage"),zot(o)&&(o=!0),!("stage"==t||t.addChild&&t.getBounds&&t.getBounds()))return void zog("zim controls - Guide(): Please provide container with bounds for the obj (setBounds())");zot(n)&&(n=!0),zot(i)&&(i="G"),zot(r)&&(r="P");var f,p,m,g,z=this,v=80,b=26,y=v/6+v/2,w=2*b;o?(g=a("#00c5af","white","white"),g.shape.regX=v+v/6,g.shape.regY=b/2,g.label.x=-v/2-v/6):(g=a("#d61fa0","white","white"),g.shape.regX=v/2,g.shape.regY=b+b/4,g.label.y=3*-b/4);var x;"stage"!=t&&t.addChild(z);var C,T,k,j,M=e.added(z,s),S=!1,A={x:0,y:0};Object.defineProperty(this,"pixels",{get:function(){return!n},set:function(e){n=!e,z.resize()}}),window.addEventListener("keydown",c),this.resize=function(){return z?(x&&(d(),l()),!0):!1},this.dispose=function(){return z?(e.noDrag(k),clearInterval(M),z.removeAllChildren(),window.removeEventListener("keydown",c),z.parent&&z.parent.removeChild(z),z=null,!0):!1}},e.extend(e.Guide,e.Container,"clone","zimContainer",!1),e.GuideManager=function(){z_d("77"),e.Manager.call(this,"GuideManager")},e.GuideManager.prototype=new e.Manager,e.GuideManager.prototype.constructor=e.GuideManager,e.Grid=function(t,o,n,i,r){function a(t,o,n){var i=new e.Container;return i.shape=new createjs.Shape,i.shape.graphics.s(o).ss(1).f(t).r(0,0,g,z),i.shape.alpha=.9,i.addChild(i.shape),i.label=new createjs.Text("10","16px verdana",n),i.label.textAlign="center",i.label.textBaseline="middle",i.addChild(i.label),i.mouseChildren=!1,i.mouseEnabled=!1,i}function s(){"stage"==t?(T=p.stage,t=T):T=t.stage,A||(d(),t.addChild(p)),T.off("stagemousemove",f),f=T.on("stagemousemove",l),T.update()}function l(e){var o;e?(o=t.globalToLocal(e.rawX,e.rawY),E=o):o={x:E.x,y:E.y},n?(v.label.text="x:"+Math.max(0,Math.min(Math.round(o.x/k*100),100))+"%",v.x=Math.max(x,Math.min(o.x,y)),b.label.text="y:"+Math.max(0,Math.min(Math.round(o.y/j*100),100))+"%",b.y=Math.max(C,Math.min(o.y,w))):(v.label.text="x:"+Math.max(0,Math.min(Math.round(o.x),Math.round(k))),v.x=Math.max(x,Math.min(o.x,y)),b.label.text="y:"+Math.max(0,Math.min(Math.round(o.y),Math.round(j))),b.y=Math.max(C,Math.min(o.y,w))),T&&T.update()}function d(){A=!0,t&&t.getBounds&&(k=t.getBounds().width,j=t.getBounds().height),T&&(T.mouseMoveOutside=!0,T.enableMouseOver(10)),y=k-2*g/3,w=j-z-z,M=new e.Container,p.addChild(M);var i=new createjs.Shape;M.addChild(i);var r=i.graphics;r.s(o).ss(1);var a=new createjs.Shape;if(M.addChild(a),n){for(var s=1;22>s;s++)r.mt(s*k/20,0).lt(s*k/20,j);for(var s=1;20>s;s++)r.mt(0,s*j/20).lt(k,s*j/20);i.alpha=.3,r=a.graphics,r.s(o).ss(1);for(var s=1;10>s;s++)r.mt(s*k/10,0).lt(s*k/10,j);for(var s=1;10>s;s++)r.mt(0,s*j/10).lt(k,s*j/10)}else{for(var s=0;k/m>s;s++)r.mt(s*m,0).lt(s*m,j);for(var s=0;j/m>s;s++)r.mt(0,s*m).lt(k,s*m);i.alpha=.3,r=a.graphics,r.s(o).ss(1);for(var s=0;k/(10*m)>s;s++)r.mt(10*s*m,0).lt(10*s*m,j);for(var s=0;j/(10*m)>s;s++)r.mt(0,10*s*m).lt(k,10*s*m)}var l=80;r.s("#FFFFFF").ss(8),r.mt(k/2,j/2-l/2).lt(k/2,j/2+l/2),r.mt(k/2-l/2,j/2).lt(k/2+l/2,j/2),r.s("#000000").ss(4),r.mt(k/2,j/2-l/2).lt(k/2,j/2+l/2),r.mt(k/2-l/2,j/2).lt(k/2+l/2,j/2),r.s(o).ss(3),r.dr(0,0,k,j),a.alpha=.5,M.cache(0,0,k,j),p.addChild(v),p.addChild(b),T&&T.update()}function c(e){e||(e=event),T&&(String.fromCharCode(e.keyCode)==i.toUpperCase()&&(p.visible=!p.visible,T.off("stagemousemove",f),p.visible&&(f=T.on("stagemousemove",l,p)),T.update()),String.fromCharCode(e.keyCode)==r.toUpperCase()&&(p.removeChild(M),M=null,p.pixels=!p.pixels))}var u,h="obj, color, percent, hideKey, pixelKey";if(u=zob(e.Grid,arguments,h,this))return u;if(z_d("78"),this.zimContainer_constructor(),this.type="Grid",zot(t)&&(t=zimDefaultFrame?zimDefaultFrame.stage:"stage"),zot(o)&&(o="black"),!("stage"==t||t.addChild&&t.getBounds&&t.getBounds()))return void zog("zim controls - Grid(): Please provide container with bounds for the obj (setBounds())");zot(n)&&(n=!0),zot(i)&&(i="G"),zot(r)&&(r="P");var f,p=this,m=10;this.mouseChildren=!1,this.mouseEnabled=!1;var g=80,z=26,v=a("#dddddd",o,"#333333");v.shape.regX=g/2,v.shape.regY=-z/4,v.label.y=3*z/4;var b=a("#dddddd",o,"#333333");b.shape.regX=-g/6,b.shape.regY=z/2,b.label.x=g/2+g/6;var y,w,x=g/6+g/2,C=2*z;v.x=x,b.y=C,v.label.text="x:0",b.label.text="y:0";var T;"stage"!=t&&t.addChild(p);var k,j,M,S=e.added(p,s),A=!1,E={x:0,y:0};Object.defineProperty(this,"pixels",{get:function(){return!n},set:function(e){n=!e,p.resize()}}),window.addEventListener("keydown",c),this.resize=function(){return p?(p.removeChild(M),M=null,T&&(d(),l(),setTimeout(function(){p.removeChild(M),M=null,d()},200)),!0):!1},this.dispose=function(){return clearInterval(S),p.removeAllChildren(),window.removeEventListener("keydown",c),p.parent&&p.parent.removeChild(p),p=null,!0}},e.extend(e.Grid,e.Container,"clone","zimContainer",!1),e.GridManager=function(){z_d("79"),e.Manager.call(this,"GridManager")},e.GridManager.prototype=new e.Manager,e.GridManager.prototype.constructor=e.GridManager,e.Layout=function(t,o,n,i,r,a,s,l){function d(){for(var e=0,t=0;t<o.length;t++)g=o[t],g.given=0,0==g[b]&&(e+=g.object.getBounds()[b]);for(var t=0;t<o.length;t++)g=o[t],0==g[b]&&(g.given=g.object.getBounds()[b]/e*j)}function c(e){e||(e=event),a&&String.fromCharCode(e.keyCode)==l.toUpperCase()&&(a.visible=!a.visible,a.stage&&a.stage.update())}var u,h="holder, regions, lastMargin, backgroundColor, vertical, regionShape, scalingObject, hideKey";if(u=zob(e.Layout,arguments,h,this))return u;if(z_d("80"),this.cjsEventDispatcher_constructor(),zot(t)||!t.getBounds)return void zog("zim controls - Layout(): please provide an object with bounds set that holds the objects being laid out");if(s=zot(s)?t:s,!s.getBounds||!s.getBounds())return void zog("zim controls - Layout(): holder must have bounds set or provide a scalingObject with bounds");var f=s.getBounds();t.setBounds(0,0,f.width,f.height),zot(n)&&(n=0),zot(r)&&(r=!0),zot(i)&&(i=""),zot(l)&&(l="B");var p=new createjs.Shape,m=this;this.active=!0,this.regions=o;var g,z=0,v="minWidth",b="width",y="height",w="marginLeft",x="maxHeight",C="x",T="y";r&&(v="minHeight",b="height",y="width",w="marginTop",x="maxWidth",C="y",T="x");for(var k=0;k<o.length;k++){if(g=o[k],!g.object||!g.object.getBounds())return void zog("zim controls - Layout(): each region object must have an object with setBounds() set");g[v]||(g[v]=0),g[b]||(g[b]=0),g.backgroundColor||(g.backgroundColor=""),g.given=0,g.maxGiven=0,g[w]||(g[w]=0),g[x]||(g[x]=100),r?(g.align||(g.align="middle"),g.valign||(g.valign=0==k?"top":k==o.length-1?"bottom":"middle",1==o.length&&(g.valign="middle"))):(g.valign||(g.valign="top"),g.align||(g.align=0==k?"left":k==o.length-1?"right":"middle",1==o.length&&(g.align="middle"))),g[b]&&(g[v]=0),z+=g[b]+g[w]}if(z+=n,z>100)return void zog("zim controls - Layout(): cannot fit regions into 100% bounds");var j=100-z;d(),this.resize=function(){if(m.active){f=s.getBounds(),t.setBounds(0,0,f.width,f.height),p.graphics.clear(),""!=i&&p.graphics.f(i).r(0,0,f.width,f.height);for(var l=0;l<o.length;l++)g=o[l],g.maxGiven=0,g.marginGiven=0;for(var c,u,h,C,T,k,M,S=!0,A=j;S;){u=0,S=!1,c=!0;for(var l=0;l<o.length;l++)g=o[l],g.given>0&&0==g.maxGiven&&(h=g.object.getBounds()[b],C=g.object.getBounds()[y],T=g.given*f[b]/100,k=g[x]*f[y]/100,M=C/h*T,M>k?(g.maxGiven=h/C*k*100/f[b],u+=g.given-g.maxGiven,A-=g.maxGiven):c=!1);if(c)break;totalPrimaries=0;for(var l=0;l<o.length;l++)g=o[l],0==g[b]&&0==g.maxGiven&&(totalPrimaries+=g.object.getBounds()[b]);for(var l=0;l<o.length;l++)g=o[l],0==g[b]&&0==g.maxGiven&&(g.given=g.object.getBounds()[b]/totalPrimaries*A)}var E=!0;if(g=o[0],g.maxGiven>0?g.maxGiven<g[v]&&(g[b]=g[v],E=!1):g.given>0&&g.given<g[v]&&(g[b]=g[v],E=!1),g=o[o.length-1],g.maxGiven>0?g.maxGiven<g[v]&&(g[b]=g[v],E=!1):g.given>0&&g.given<g[v]&&(g[b]=g[v],E=!1),!E){z=0;for(var l=0;l<o.length;l++)g=o[l],z+=g[b]+g[w];return z+=n,z>100?void zog("zim display - Layout(): cannot fit regions into 100% bounds"):(j=100-z,d(),void m.resize())}for(var P=!0,D=0,O=0,l=0;l<o.length;l++)g=o[l],D+=g[w],g[b]>0?O+=g[b]:g.maxGiven>0?O+=g.maxGiven:g.given>0&&(O+=g.given),0==g[b]&&(P=!1);if(P||c){D+=n;var B=100-O-D;if(D-=n+o[0][w],0!=B&&0!=D)for(var l=0;l<o.length;l++)0!=l&&(g=o[l],g.marginGiven=g[w]/D*(D+B))}var h,C,I,L,_,X=0,Y=0;if(a&&a.graphics){var R=a.graphics;R.c()}for(var l=0;l<o.length;l++)g=o[l],X+=g.marginGiven>0?g.marginGiven*f[b]/100:g[w]*f[b]/100,h=g[b]>0?g[b]:g.maxGiven>0?g.maxGiven:g.given>0?g.given:0,h=h*f[b]/100,C=g[x]*f[y]/100,Y=(f[y]-C)/2,I=r?e.fit(g.object,Y,X,C,h):e.fit(g.object,X,Y,h,C),"top"==g.valign?g.object.y=I.bY:"bottom"==g.valign&&(g.object.y=I.bY+I.bHeight-I.height),"left"==g.align?g.object.x=I.bX:"right"==g.align&&(g.object.x=I.bX+I.bWidth-I.width),a&&a.graphics&&(R.s("white").ss(2).r(I.bX,I.bY,I.bWidth,I.bHeight),R.s("#ff8203").sd([20,20]).r(I.bX,I.bY,I.bWidth,I.bHeight).sd()),_=L=0,(0==X||X+h==f[b])&&(r?_=1:L=1),C==f[y]&&(r?L=1:_=1),""!=g.backgroundColor&&p.graphics.f(g.backgroundColor).r(I.bX,I.bY,I.bWidth+L,I.bHeight+_),X+=h
}},this.resize(),a&&t.addChild(a),t.addChildAt(p,0),window.addEventListener("keydown",c),this.disable=function(){m.active=!1,window.removeEventListener("keydown",c),a&&(a.alpha=0)},this.enable=function(){m.active=!0,window.addEventListener("keydown",c),m.resize(),a&&(a.alpha=1)},this.removeShape=function(){a&&(a.graphics.clear(),t.removeChild(a),a=null,a=!1),window.removeEventListener("keydown",c)},this.addShape=function(e){m.removeShape(),a=e,window.addEventListener("keydown",c),t.addChild(a),m.resize()},this.dispose=function(){return m.removeShape(),!0}},e.extend(e.Layout,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),e.LayoutManager=function(){z_d("81");var e=this;this.items=[],this.add=function(t){e.items.push(t)},this.resize=function(){for(var t=0;t<e.items.length;t++)e.items[t].resize()},this.disable=function(){for(var t=0;t<e.items.length;t++)e.items[t].disable()},this.enable=function(){for(var t=0;t<e.items.length;t++)e.items[t].enable()},this.dispose=function(){for(var t=0;t<e.items.length;t++)e.items[t].removeShape();return!0}},e.Parallax=function(t,o,n,i){function r(){d.step()}var a,s="stage, damp, layers, auto";if(a=zob(e.Parallax,arguments,s,this))return a;if(z_d("68"),zot(t)||!t.getBounds)return void zog("zim display - Parallax(): please pass in the stage with bounds as first parameter");if(!t.getBounds())return void zog("zim display - Parallax(): Please give the stage bounds using setBounds()");zot(i)&&(i=!0);var l=t.getBounds().width,d=(t.getBounds().height,this),c=zot(o)?.1:o;this.addLayer=function(t){if(!(zot(t.obj)||zot(t.prop)||zot(t.propChange))){var o={obj:t.obj,prop:t.prop};o[o.prop]=t.propChange,zot(t.input)&&(t.input="mouseX"),o.input=t.input;var n=zot(t.inMin)?0:t.inMin,i=zot(t.inMax)?l:t.inMax,r=zot(t.factor)?1:t.factor,a=zot(t.integer)?!1:t.integer;return o["p_"+o.prop]=new e.ProportionDamp(n,i,0,o[o.prop],c,r,a),o["s_"+o.prop]="scale"==o.prop?o.obj.scaleX:"frame"==o.prop?o.obj.currentFrame:o.obj[o.prop],u.push(o),u.length-1}},this.removeLayer=function(e){if(!zot(e)){var t=u[e];t["p_"+t.prop].dispose(),u.splice(e,1)}},this.immediate=function(e){for(var t,o=0;o<u.length;o++)t=u[o],t["p_"+t.prop].immediate(e[o])},this.dispose=function(){return u=null,i&&e.Ticker.remove(f),!0},n=zot(n)?[]:n;for(var u=[],h=0;h<n.length;h++)this.addLayer(n[h]);if(i)var f=e.Ticker.add(r,t);this.step=function(o){for(var n,r,a=0;a<u.length;a++)n=u[a],zot(o)?"mouseX"==n.input?r=t.mouseX:"mouseY"==n.input?r=t.mouseY:"scrollX"==n.input?r=e.scrollX():"scrollY"==n.input&&(r=e.scrollY()):r=o,"scale"==n.prop?n.obj.scaleX=n.obj.scaleY=n["s_"+n.prop]+n["p_"+n.prop].convert(r):"frame"==n.prop?n.obj.gotoAndStop(n["s_"+n.prop]+n["p_"+n.prop].convert(r)):(n.obj[n.prop]=n["s_"+n.prop]+n["p_"+n.prop].convert(r),"mouseX"==n.input&&i&&(n.obj[n.prop]-=n[n.prop]/2))},Object.defineProperty(d,"damp",{get:function(){return c},set:function(e){c=e;for(var t,o=0;o<u.length;o++)t=u[o],t["p_"+t.prop].damp=c}})},e.Scroller=function(t,o,n,i,r,a,s){function l(){g||(g=s.getBounds().width,z=s.getBounds().height),0!=f.speed&&0!=f.direction&&(i?(u.x-=f.speed*f.direction,h.x=u.x<h.x?u.x+v:u.x-v,f.direction*f.speed>0?h.x<0&&u.x<h.x?u.x=h.x+v:u.x<0&&h.x<u.x&&(h.x=u.x+v):h.x>g&&h.x>u.x?h.x=u.x-v:u.x>g&&u.x>h.x&&(u.x=h.x-v)):(u.y-=f.speed*f.direction,h.y=u.y<h.y?u.y+b:u.y-b,f.direction*f.speed>0?h.y<0&&u.y<h.y?u.y=h.y+b:u.y<0&&h.y<u.y&&(h.y=u.y+b):h.y>z&&h.y>u.y?h.y=u.y-b:u.y>z&&u.y>h.y&&(u.y=h.y-b)))}var d,c="backing, speed, direction, horizontal, gapFix, stage, container";if(d=zob(e.Scroller,arguments,c,this))return d;z_d("69"),this.cjsEventDispatcher_constructor();var u=this.backing1=t;if(!zot(u)&&u.getBounds){var h=this.backing2=t.clone();u.parent.addChild(h),zot(i)&&(i=!0),zot(r)&&(r=0);var f=this;this.speed=zot(o)?1:o;var p=this.baseSpeed=this.speed;this.direction=zot(n)?1:n;var m=i?u.scaleX:u.scaleY;if(!u.getBounds())return void zog("zim display - Scroller(): please setBounds() on backing objects");if(!a&&!u.stage)return void zog("zim display - Scroller(): please pass in stage parameter or add backing objects to stage to start");if(a=a||u.stage,zot(s)&&(s=a),!s.getBounds())return void zog("zim display - Scroller(): please setBounds() on container or stage if no container");var g,z,v=u.getBounds().width*m-r,b=u.getBounds().height*m-r;i?h.x=v:h.y=b;var y=!1,w=e.Ticker.add(l,a);this.paused=!1,this.pause=function(t,o){return zot(t)&&(t=!0),zot(o)&&(o=0),t?(p=f.speed,o>0?(y=!0,e.animate({target:f,obj:{pausingSpeed:0},ticker:!1,time:o,call:function(){f.speed=0,f.paused=!0,y=!1,f.dispatchEvent("pause")}})):(y=!1,f.speed=0,f.paused=!0,setTimeout(function(){f.dispatchEvent("pause")},10))):(y=!1,o>0?e.animate({target:f,obj:{pausingSpeed:p},ticker:!1,time:o,call:function(){f.speed=p,f.paused=!1,y=!1}}):(f.speed=p,f.paused=!1)),f},Object.defineProperty(f,"percentSpeed",{get:function(){return 0==f.baseSpeed?0/0:f.speed/f.baseSpeed*100},set:function(e){y||f.paused||(f.speed=f.baseSpeed*e/100)}}),Object.defineProperty(f,"pausingSpeed",{get:function(){return 0==f.baseSpeed?0/0:f.speed/f.baseSpeed*100},set:function(e){f.speed=f.baseSpeed*e/100}}),this.dispose=function(){return zon&&zog("bye from Scroller"),e.Ticker.remove(w),!0}}},e.extend(e.Scroller,createjs.EventDispatcher,null,"cjsEventDispatcher"),e.Dynamo=function(t,o,n,i,r,a,s){function l(){if(p=requestAnimationFrame(l),m=u[h].s,0!=b.speed&&0!=m&&(z=1e3/Math.abs(b.speed)*m,g=Date.now(),g-y>z)){y=g;var e=b.frame+(b.speed>0||!s?1:-1),o=!1;e>=u.length&&(o=!0,e=0),0>e&&(o=!0,e=u.length-1),b.frame=e,o&&b.dispatchEvent("loop"),b.dispatchEvent("change"),a&&t.stage&&t.stage.update(),zot(v)||v!=b.frame||(w=!1,b.speed=0,b.paused=!0,b.dispatchEvent("pause"))}}var d,c="sprite, speed, label, startFrame, endFrame, update, reversable";if(d=zob(e.Dynamo,arguments,c,this))return d;z_d("69.2"),this.cjsEventDispatcher_constructor();var u=this.frames=t.parseFrames(n,i,r,!0);if(0!=u.length){this.totalFrames=u.length;var h=0;zot(o)&&(o=30),zot(s)&&(s=!0);var f=this.baseSpeed=this.speed=o;zot(a)&&(a=!1);var p,m,g,z,v,b=this,y=Date.now(),w=!1;l(),this.paused=!1,this.pause=function(t,o,n){return zot(t)&&(t=!0),zot(o)&&(o=0),t?(f=b.speed,zot(n)?o>0?(w=!0,e.animate({target:b,obj:{pausingSpeed:0},ticker:!1,time:o,call:function(){w=!1,b.speed=0,b.paused=!0,b.dispatchEvent("pause")}})):(w=!1,b.speed=0,b.paused=!0,setTimeout(function(){b.dispatchEvent("pause")},10)):(w=!0,v=n)):(v=null,o>0?(w=!0,e.animate({target:b,obj:{pausingSpeed:f},ticker:!1,time:o,call:function(){w=!1,b.speed=f,b.paused=!1}})):(w=!1,b.speed=f,b.paused=!1)),b},Object.defineProperty(b,"frame",{get:function(){return h},set:function(e){h=Math.round(e)%u.length;var o=u[h];zot(o)||(t.frame=o.f)}}),Object.defineProperty(b,"percentSpeed",{get:function(){return 0==b.baseSpeed?0/0:b.speed/b.baseSpeed*100},set:function(e){w||b.paused||(b.speed=b.baseSpeed*e/100)}}),Object.defineProperty(b,"pausingSpeed",{get:function(){return 0==b.baseSpeed?0/0:b.speed/b.baseSpeed*100},set:function(e){b.speed=b.baseSpeed*e/100}}),this.dispose=function(){cancelAnimationFrame(p)}}},e.extend(e.Dynamo,createjs.EventDispatcher,null,"cjsEventDispatcher"),e.Accelerator=function(e){z_d("69.3"),this.cjsEventDispatcher_constructor();var t=this;this.paused=!1,this.items=[],this.paused=!1,this._percentSpeed=100,this.add=function(e){var o;o=Array.isArray(e)?e:[e];for(var n,i=0;i<o.length;i++)n=t.items.indexOf(o[i]),0>n&&o[i].pause&&t.items.push(o[i]);return t},e&&this.add(e),this.remove=function(e){var o;o=Array.isArray(e)?e:[e];for(var n,i=0;i<o.length;i++)n=t.items.indexOf(o[i]),n>=0&&t.items.splice(n,1);return t},this.pause=function(e,o,n){function i(){for(var o=0;o<t.items.length;o++)1!=r[o]&&t.items[o].pause(e)}zot(e)&&(e=!0);var r=[];if(e){zot(n)||(o=null);for(var a=!1,s=0;s<t.items.length;s++)(!zot(o)&&zot(n)&&!t.items[s].totalFrames||t.items[s].totalFrames&&(!zot(o)||!zot(n)))&&(t.items[s].pause(!0,o,n),a=!0,r[s]=1,t.items[s].on("pause",function(){t.paused||(i(!0),t.paused=!0,t.dispatchEvent("pause"))},null,!0));a||(i(),t.paused=!0,setTimeout(function(){t.dispatchEvent("pause")},10))}else t.paused=!1,i()},Object.defineProperty(t,"percentSpeed",{get:function(){return t._percentSpeed},set:function(e){t._percentSpeed=e;for(var o=0;o<t.items.length;o++)t.items[o].percentSpeed=e}}),this.dispose=function(){for(var e=0;e<t.items.length;e++)t.items[e].dispose();return!0}},e.extend(e.Accelerator,createjs.EventDispatcher,null,"cjsEventDispatcher"),e.Swiper=function(t,o,n,i,r,a,s,l,d){function c(){g=r?v.mouseX:v.mouseY,z=b.target[b.property],b.dispatchEvent("swipedown")}function u(){var e=g-(r?v.mouseX:v.mouseY);w=z-e*i,zot(a)||(w=Math.max(w,a)),zot(s)||(w=Math.min(w,s)),b.desiredValue=w,b.dispatchEvent("swipemove")}function h(){y.canvas?(y.off("stagemousedown",x),y.off("stagemousemove",C),y.off("stagemouseup",T)):(y.off("mousedown",x),y.off("pressmove",C),y.off("pressup",T)),e.Ticker.remove(j)}function f(){y.canvas?y.on("stagemousedown",x):(y.on("mousedown",x),y.on("pressmove",C),y.on("pressup",T)),e.Ticker.add(j,v)}var p,m="swipeOn, target, property, sensitivity, horizontal, min, max, damp, integer";if(p=zob(e.Swiper,arguments,m,this))return p;if(z_d("69.5"),this.cjsEventDispatcher_constructor(),zot(t)||!t.getStage||!t.stage)return void zog("zim.Swiper() - please provide container on stage");if(!zot(o)){zot(i)&&(i=1),zot(r)&&(r=!0),zot(l)&&(l=.1),zot(d)&&(d=!1);var g,z,v,b=this,y=t,w=b.desiredValue=o[n];this.target=o,this.property=n;var x,C,T;y.canvas?(x=y.on("stagemousedown",function(){c(),C=y.on("stagemousemove",u),T=y.on("stagemouseup",function(){y.off("stagemousemove",C),y.off("stagemouseup",T),b.dispatchEvent("swipeup")})}),v=y):(v=y.stage,x=y.on("mousedown",c),C=y.on("pressmove",u),T=y.on("pressup",function(){b.dispatchEvent("swipeup")}));var k=new e.Damp(b.target[b.property]),j=e.Ticker.add(function(){b.target[b.property]=d?Math.round(k.convert(w)):k.convert(w)},v);this.immediate=function(e){k.immediate(e),b.target[b.property]=d?Math.round(e):e,b.desiredValue=w=e};var M=!0;Object.defineProperty(b,"enabled",{get:function(){return M},set:function(e){M!=e&&(e?f():h(),M=Boolean(e))}}),this.dispose=function(){h(),k=null}}},e.extend(e.Swiper,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),e.MotionController=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g){function z(e){var t,o="keydown"==n?e.keyCode:e.buttonCode;for(O=0;4>O;O++)if(s[O].indexOf(o)>-1){if(l||"both"!=S.axis||(X.dirX=X.dirY=0),X["dir"+L[O]]=_[O],B[O]=1,t=I.indexOf(O),0==t)return;return t>0&&I.splice(t,1),void I.unshift(O)}}function v(e){var t,o="keydown"==n?e.keyCode:e.buttonCode;for(O=0;4>O;O++)if(s[O].indexOf(o)>-1){if(B[O]=0,t=I.indexOf(O),t>=0&&I.splice(t,1),"both"!=S.axis||l)X["dir"+L[O]]=-B[2*Math.floor(O/2)]+B[2*Math.floor(O/2)+1];else if(I.length>0){X["dir"+L[O]]=0;var i=I[0];X["dir"+L[i]]=_[i]}else X.dirX=X.dirY=0;return}}function b(e){N.rotation+=e.dirX*S.turnSpeed,S.rotation=N.rotation,N.speedX=Math.sin(N.rotation*Math.PI/180)*S.speed*-e.dirY,N.speedY=-Math.cos(N.rotation*Math.PI/180)*S.speed*-e.dirY,S.x+=N.speedX,S.y+=N.speedY}function y(){var e=S.x-S.target.x,t=S.y-S.target.y,o=x(e,t);if(A=o.speedX,E=o.speedY,u){if(S.rotation=o.angle,zot(S.rotation))return void(S.rotation=S.target.rotation);S.rotation+=P;var n=w(S.rotation),i=S.target.rotation=w(S.target.rotation);Math.abs(n-i)>180&&(i>n?i-=360:n-=360),S.dampR.immediate(i),S.target.rotation=i,S.rotation=n}}function w(e){return(e%360+360)%360}function x(e,t){var o,n=S.speed,i=S.speed,r=Math.sqrt(Math.pow(e,2)+Math.pow(t,2));return r>0&&(n=Math.abs(e)/r*S.speed,i=Math.abs(t)/r*S.speed,o=90-180*Math.atan2(e,t)/Math.PI),{speedX:n,speedY:i,angle:o}}function C(){"keydown"==n?(frame.on("keydown",Y),frame.on("keyup",H),e.Ticker.add(G,M)):"gamebutton"==n?(R.on("buttondown",W),R.on("buttonup",F),e.Ticker.add(G,M)):"gamestick"==n?R.on("data",U):"swipe"==n?(V.enabled=!0,q.enabled=!0,V.on("swipemove",K)):("mousedown"==n||"mousemove"==n)&&M.on("stage"+n,Z),e.Ticker.add(tt,M)}function T(){"keydown"==n?(frame.off("keydown",Y),frame.off("keyup",H),e.Ticker.remove(G)):"gamebutton"==n?(R.off("buttondown",W),R.off("buttonup",F),e.Ticker.remove(G)):"gamestick"==n?R.off("data",U):"swipe"==n?(V.enabled=!1,q.enabled=!1,V.off("swipemove",K)):("mousedown"==n||"mousemove"==n)&&M.off("stage"+n,Z),e.Ticker.remove(tt)}var k,j="container, target, type, speed, axis, rect, map, diagonal, damp, flip, rotate, constant, firstPerson, turnSpeed, moveThreshold, stickThreshold";if(k=zob(e.MotionController,arguments,j,this))return k;if(z_d("69.7"),this.cjsEventDispatcher_constructor(),zot(t)||!t.getStage)return void zog("zim Controller(): Please pass in a reference to a container as first parameter");if(zot(t.stage))return void zog("zim Controller(): The Container must be on the stage");var M=t.stage;zot(o)&&(o=new e.Container(1,1)),zot(i)&&(i=7),(zot(n)||"mousemove"!=n&&"keydown"!=n&&"gamebutton"!=n&&"gamestick"!=n&&"swipe"!=n&&"manual"!=n)&&(n="mousedown"),zot(r)&&(r="both"),"keydown"==n&&zot(s)&&(s=[[65,37],[68,39],[87,38],[83,40]]),"gamebutton"==n&&zot(s)&&(s=f?[14,15,e.GamePad.RT,e.GamePad.LT]:[14,15,12,13]),"gamestick"==n&&zot(s)&&(s=f?[[0,2],[0,2],[1],[1]]:[0,0,1,1]),"gamestick"==n&&zot(s)&&(s=[0,0,1,1]),zot(l)&&(l=!0),("horizontal"==r||"vertical"==r)&&(l=!1),zot(d)&&(d="keydown"==n||"gamebutton"==n?1:.1),zot(f)&&(f=!1),zot(p)&&(p=.4*i),zot(m)&&(m=4),zot(g)&&(g=.2);var S=this;this.dirX=0,this.dirY=0,this.speed=i,this.turnSpeed=p,this.axis=r,this.target=o,this.moveThreshold=m,this.stickThreshold=g;var A=S.speed,E=S.speed,P=0;S.rotation=0,S.x=this.target.x,S.y=this.target.y;{var D=S.scaleX=o.scaleX;S.scaleY=o.scaleY}if("keydown"==n||"gamebutton"==n){for(var O=0;4>O;O++)Array.isArray(s[O])||(s[O]=[s[O]]);var B=[0,0,0,0],I=[],L=["X","X","Y","Y"],_=[-1,1,-1,1],X={dirX:0,dirY:0};if("keydown"==n)var Y=frame.on("keydown",z);else var R=S.gamepad=new e.GamePad,W=R.on("buttondown",z);if(zot(h))if("keydown"==n)var H=frame.on("keyup",v);else var F=R.on("buttonup",v);var N={rotation:0,speedX:S.speed,speedY:S.speed},G=e.Ticker.add(function(){if(f)return void b(X);var e=S.speed,t=S.speed;if("both"==S.axis&&0!=X.dirX&&0!=X.dirY){var o=x(X.dirX,X.dirY);e=o.speedX,t=o.speedY}("horizontal"==S.axis||"both"==S.axis)&&(S.x+=e*X.dirX),("vertical"==S.axis||"both"==S.axis)&&(S.y+=t*X.dirY),y()},M)}else if("mousedown"==n||"mousemove"==n)var Z=M.on("stage"+n,function(){var e=t.globalToLocal(M.mouseX,M.mouseY);S.x=e.x,S.y=e.y,y()});else if("gamestick"==n){for(var R=this.gamepad=new e.GamePad,O=0;4>O;O++)Array.isArray(s[O])||(s[O]=[s[O]]);var N={rotation:0,speedX:S.speed,speedY:S.speed},U=R.on("data",function(e){for(var t={dirX:0,dirY:0},o=0;o<s[0].length;o++){var n=e.axes[s[0][o]];if(Math.abs(n)>S.stickThreshold){t.dirX=n;break}}for(var o=0;o<s[2].length;o++){var n=e.axes[s[2][o]];if(Math.abs(n)>S.stickThreshold){t.dirY=n;break}}return f?void b(t):(S.x+=S.speed*t.dirX,S.y+=S.speed*t.dirY,void y())})}else if("swipe"==n)var V=new e.Swiper(M,S,"x",.8),q=new e.Swiper(M,S,"y",.8,!1),K=V.on("swipemove",function(){y()});var Q=this.x=this.target.x,J=this.y=this.target.y;this.dampX=new e.Damp(Q,d),this.dampY=new e.Damp(J,d),this.dampR=new e.Damp(this.target.rotation,d);var $=0,et=0,tt=e.Ticker.add(function(){if(a&&(S.x=e.constrain(S.x,a.x,a.x+a.width),S.y=e.constrain(S.y,a.y,a.y+a.height)),("horizontal"==S.axis||"both"==S.axis)&&(S.dirX=e.sign(S.x-Q),Math.abs(S.x-Q)<A?Q=S.x:Q+=S.dirX*A,S.target.x=S.dampX.convert(Q)),("vertical"==S.axis||"both"==S.axis)&&(S.dirY=e.sign(S.y-J),Math.abs(S.y-J)<E?J=S.y:J+=e.sign(S.y-J)*E,S.target.y=S.dampY.convert(J)),S.dirX!=$||S.dirY!=et){var t=new createjs.Event("change");if(S.dirX!=$){var n=["left",null,"right"];t.dir=n[S.dirX+1],$=S.dirX,("horizontal"==c||"both"==c)&&(S.scaleX=o.scaleX=S.dirX?Math.abs(o.scaleX)*S.dirX:o.scaleX,P=0!=D&&-1==Math.round(S.scaleX/D)?180:0)}else{var n=["up",null,"down"];t.dir=n[S.dirY+1],et=S.dirY,("vertical"==c||"both"==c)&&(S.scaleY=o.scaleY=S.dirY?Math.abs(o.scaleY)*S.dirY:o.scaleY)}S.dispatchEvent(t)}S.movingX=Math.abs(Q-S.target.x)>S.moveThreshold,S.movingY=Math.abs(J-S.target.y)>S.moveThreshold,S.moving=S.movingX||S.movingY,u&&!zot(S.rotation)&&(S.target.rotation=S.dampR.convert(S.rotation))},M);this.immediate=function(e,t,o){!zot(e)&&S.dampX&&(S.dampX.immediate(e),S.x=S.target.x=Q=e,V&&V.immediate(e)),!zot(t)&&S.dampY&&(S.dampY.immediate(t),S.y=S.target.y=J=t,q&&q.immediate(t)),!zot(o)&&S.dampR&&(S.dampR.immediate(o),S.rotation=S.target.rotation=o)},this.convert=function(e,t){zot(e)||(S.x=e),zot(t)||(S.y=t),y()};var ot=!0;Object.defineProperty(S,"enabled",{get:function(){return ot},set:function(e){ot!=e&&(e?C():T(),ot=Boolean(e))}}),this.dispose=function(){T(),R&&R.dispose(),V&&V.dispose(),q&&V.dispose()}},e.extend(e.MotionController,createjs.EventDispatcher,"enabled","cjsEventDispatcher"),e.GamePad=function(){function e(e){function r(){if(n=requestAnimationFrame(r),i.data=navigator.getGamepads()[i.currentIndex],i.data){for(var e=i.buttons=[],t=0;t<i.data.buttons.length;t++)if(e[t]=i.data.buttons[t].pressed,e[t]!=i.lastData[t]){if(i.lastData[t]=e[t],e[t])var a=new createjs.Event("buttondown");else var a=new createjs.Event("buttonup");a.buttonCode=t,a.button=o[t],i.dispatchEvent(a)}var a=new createjs.Event("data");a.axes=i.axes=i.data.axes,a.buttons=i.buttons,i.dispatchEvent(a)}}i.connected=!0,t("gamepadconnected",e);var a=navigator.getGamepads()[i.currentIndex];i.lastData=[];for(var s=0;s<a.buttons.length;s++)i.lastData[s]=a.buttons[s].pressed;r()}function t(e,t){var o=new createjs.Event(e);o.index=t.gamepad.index,o.id=t.gamepad.id,o.buttons=t.gamepad.buttons,o.axes=t.gamepad.axes,i.dispatchEvent(o)}if(z_d("69.8"),this.cjsEventDispatcher_constructor(),!navigator.getGamepads)return this.error=!0,void(zon&&zog("zim.GamePad() - no browswer support"));var n;window.addEventListener("gamepadconnected",e),this.currentIndex=0;var i=this,r=setInterval(function(){navigator.getGamepads&&navigator.getGamepads()[0]&&(i.connected||e(),clearInterval(r))},500),a=window.addEventListener("gamepaddisconnected",function(e){e.gamepad.index==i.currentIndex&&(cancelAnimationFrame(n),connected=!1,i.dispatchEvent("gamepaddisconnected"))});this.dispose=function(){window.removeEventListener("gamepadconnected",e),window.addEventListener("gamepaddisconnected",a),cancelAnimationFrame(n),clearInterval(r),i.connected=!1}};for(var o=["A","B","X","Y","LB","RB","LT","RT","BACK","START","LS","RS","DPAD_UP","DPAD_DOWN","DPAD_LEFT","DPAD_RIGHT"],n=0;n<o.length;n++)e.GamePad[o[n]]=n;var i=["LSX","LSY","RSX","RSY"];for(n=0;n<i.length;n++)e.GamePad[i[n]]=n;return e.extend(e.GamePad,createjs.EventDispatcher,null,"cjsEventDispatcher"),e.Emitter=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b,y,w,x,C,T,k,j,M,S,A,E){function P(i){if(R=i,zot(j)&&(j=R.isWebGL?!1:e.mobile()),j&&(R.snapToPixelEnabled=!0),R){x||C||X.centerReg(),X.zimInterval=e.interval(X.interval,function(){function i(e,t){return e-t}if(X.startPaused)return void X.pause();if(t=Array.isArray(X.obj)?X.obj:[X.obj],!(t.length<=0)){var r,a;Array.isArray(X.interval)?(X.interval.sort(i),r=X.interval[0]):r=X.interval.constructor=={}.constructor?X.interval.min:X.interval,Array.isArray(X.num)?(X.num.sort(i),a=X.num[X.num.length-1]):a=X.num.constructor=={}.constructor?X.num.max:X.num,e.loop(zik(X.num),function(){if(X.decayTime>0){var i={};X.shrink&&(i.scale=0),X.fade&&(i.alpha=0)}if(X.pool&&W.length>0&&F>=Math.max(X.poolMin,(X.life/r+5)*a)){var s=W[H++%W.length];s.visible=!0;var l=s.trace?s.getChildAt(0):s;if(l.emitShape){var d=l.template;l.graphics.c().s(d.s?zik(d.s):null).ss(d.ss?zik(d.ss):null).sd(d.sd?zik(d.sd):null,d.offset?zik(d.offset):null)}s.trace&&s.updateCache(),"top"==X.layers?l.emitShape?s.addTo(X):s.centerReg(X):l.emitShape?s.addTo(X,!0,"bottom"==X.layers?0:e.rand(X.numChildren)):s.centerReg(X,"bottom"==X.layers?0:e.rand(X.numChildren)),s.alpha=1,s.scaleX=1,s.scaleY=1,l.alpha=l.originalAlpha,l.scaleX=l.originalScaleX,l.scaleY=l.originalScaleY,l.endSpurt=!1}else{F++;var s;X.trace&&(s=new e.Container(o,n),s.trace=!0);var c=zik(e.shuffle(t)[0]);if("shape"==c.type){var d=c,l=new e.Shape(1,1);l.emitShape=!0,l.template=d,l.graphics.s(d.s?zik(d.s):null).ss(d.ss?zik(d.ss):null).sd(d.sd?zik(d.sd):null,d.offset?zik(d.offset):null),X.trace?l.addTo(s):"top"==X.layers?l.addTo(X):l.addTo(X,"bottom"==X.layers?0:e.rand(X.numChildren))}else{var l=c.clone();l.centerReg||zimify(l),X.trace?l.centerReg(s).pos(-1e3,-1e3):"top"==X.layers?l.centerReg(X):l.centerReg(X,"bottom"==X.layers?0:e.rand(X.numChildren))}X.trace&&("top"==X.layers?s.addTo(X):s.addTo(X,"bottom"==X.layers?0:e.rand(X.numChildren)),s.cache(f,p,o,n)),X.trace||(s=l),s.particle=l,l.originalAlpha=l.alpha,l.originalScaleX=l.scaleX,l.originalScaleY=l.scaleY}X.currentParticle=l,X.particlesEmitted++,s.particleNormal=!0,s.particleDecaying=!1,s.particleFizzing=!1;var u=zik(X.angle),h=zik(X.force),m=h*Math.cos(u*Math.PI/180),g=h*Math.sin(u*Math.PI/180);l.info={position:{x:o/2,y:n/2},velocity:{x:m,y:g}},X.horizontal&&(l.info.position={x:e.rand(0,o),y:X.vertical?n/2:0}),X.vertical&&(l.info.position={x:X.horizontal?o/2:0,y:e.rand(0,n)}),l.emitShape?l.graphics.mt(l.info.position.x,l.info.position.y):l.pos(l.info.position.x,l.info.position.y),X.random&&e.loop(X.random,function(e,t){val=zik(t),"scale"==e?l.scale(val):("x"==e?l.info.position.x=X.horizontal||X.vertical?val:val+o/2:"y"==e&&(l.info.position.y=X.horizontal||X.vertical?val:val+n/2),l[e]=val,l.emitShape&&l.pos(0,0))}),j&&!l.emitShape&&l.cache(l.getBounds().x-10,l.getBounds().y-10,l.getBounds().width+20,l.getBounds().height+20);var z=l.emitShape?!1:X.shrink;if(X.decayTime>0&&(X.fade||z||X.trace&&X.traceFadeTime>0)){if(X.trace&&X.traceFadeTime>0&&s.animate({obj:{alpha:0},time:X.traceFadeTime,wait:X.life-X.traceFadeTime,waitedCall:function(e){e.particleNormal=!1,e.particleFizzing=!0},call:D,override:!1,id:"decay"}),X.fade||z){var v={};X.fade&&(v.alpha=0),z&&(v.scaleX=0,v.scaleY=0),l.animate({obj:v,time:X.decayTime,wait:zot(X.decayStart)?X.life-X.decayTime:X.decayStart,waitedCall:function(e){e.parent!=X&&(e=e.parent),e.particleNormal=!1,e.particleDecaying=!0},call:function(t){X.events&&O("decayed",t),t.endSpurt&&O("spurtDecayed",t),X.trace&&X.traceFadeTime>0||(zot(X.decayStart)||X.decayStart+X.decayTime>X.life?D(t.parent.trace?t.parent:t):-function(){var t=s;e.timeout(X.life-(X.decayStart+X.decayTime),function(){D(t)})}())},override:!1,id:"decay"})}}else X.life>0&&-function(){var t=s;t.timeOut=e.timeout(X.life,function(){D(t)})}();if(X.events&&O("emitted",s),B(l),X.animation){var b=zik(X.animation);zot(b.override)&&(b.override=!1),l.animate(e.copy(b))}})}},null,!0);Y=X.emitterTicker=e.Ticker.add(function(){e.loop(X,function(t){if(t.trace){var o=t;t=t.getChildAt(0)}var n=t.info,i=0,r=0;if(!zot(X.sink)){var a,s=X.localToGlobal(n.position.x,n.position.y);if(X.sink.parent&&X.sink.parent.localToGlobal)var a=X.sink.parent.localToGlobal(X.sink.x,X.sink.y);else a=new createjs.Point(zik(X.sink.x),zik(X.sink.y));var l=e.angle(s.x,s.y,a.x,a.y),i=X.sinkForce*Math.cos(l*Math.PI/180),r=X.sinkForce*Math.sin(l*Math.PI/180)}var d=X.wind+i,c=X.gravity+r;n.velocity.x+=d*frameRate,n.velocity.y+=c*frameRate,n.position.x+=n.velocity.x*frameRate*100,n.position.y+=n.velocity.y*frameRate*100,t.emitShape?t.graphics.lt(n.position.x,n.position.y):(t.x=n.position.x,t.y=n.position.y),X.trace&&o&&o.updateCache(t.emitShape?null:"source-over")})},R),frameRate=1/e.Ticker.framerate}}function D(e){return X.events&&O("fizzed",e),(e.trace?e.getChildAt(0).endSpurt:e.endSpurt)&&(O("spurtFizzed",e),X.spurting=!1),X.pool&&"end"!=e.pooled?e.pooled?void(e.visible=!1):(e.pooled=!0,W.push(e),void(e.visible=!1)):(X.removeChild(e),X.trace&&e.uncache(),void(e=null))}function O(e,t){var o=new createjs.Event(e);o.particle=t.trace?t.getChildAt(0):t,X.dispatchEvent(o)}function B(e){zot(X.spurtCount)&&zot(X.spurtNum)||(X.spurtCount++,X.spurtCount>=X.spurtNum&&I(e))}function I(e){X.pause(),X.spurtCount=X.spurtNum=null,O("spurted",e),e.endSpurt=!0}var L,_="obj, width, height, interval, num, life, fade, shrink, decayTime, decayStart, trace, traceFadeTime, traceShiftX, traceShiftY, angle, force, gravity, wind, layers, animation, random, horizontal, vertical, sink, sinkForce, cache, events, startPaused, pool, poolMin";if(L=zob(e.Emitter,arguments,_,this))return L;z_d("69.9"),zot(t)&&(t=[]),zot(o)&&(o=300),zot(n)&&(n=300),zot(i)&&(i=20),"number"==typeof i&&(i=Math.max(10,i)),zot(r)&&(r=1),zot(u)&&(u=!1),zot(h)&&(h=d),zot(f)&&(f=0),zot(p)&&(p=0),zot(a)&&(a=1e3),zot(s)&&(s=!0),zot(l)&&(l=u?!1:!0),zot(d)&&(d=1e3),zot(m)&&(m={min:0,max:360}),zot(g)&&(g=5),zot(z)&&(z=9.8),zot(v)&&(v=0),zot(b)&&(b="top"),zot(o)&&(o=100),zot(n)&&(n=100),zot(x)&&(x=!1),zot(C)&&(C=!1),!zot(T)&&zot(k)&&(k=10),zot(M)&&(M=!1),zot(S)&&(S=!1),zot(A)&&(A=!0),zot(E)&&(E=0),this.zimContainer_constructor(o,n),this.type="Emitter";var X=this;X.obj=t,X.interval=i,X.num=r,X.life=a,X.fade=s,X.shrink=l,X.decayTime=d,X.decayStart=c,X.trace=u,X.traceFadeTime=h,X.traceShiftX=f,X.traceShiftY=p,X.angle=m,X.force=g,X.gravity=z,X.wind=v,X.layers=b,X.animation=y,X.random=w,X.horizontal=x,X.vertical=C,X.sink=T,X.sinkForce=k,X.events=M,X.startPaused=S,X.pool=A,X.poolMin=E,X.particlesEmitted=0;var Y,R,W=[],H=0,F=0;e.added(X,P),Object.defineProperty(X,"interval",{get:function(){return i},set:function(e){i=e,X.zimInterval&&(X.zimInterval.time=i)}}),this.spurting=!1,this.spurt=function(t,o,n){var i,r="num, time, restart";return(i=zob(X.spurt,arguments,r))?i:(zot(o)||(e.timeout(zik(o),function(){I(X.currentParticle)}),X.spurting=!0),zot(t)||(X.spurtNum=zik(t),X.spurtCount=0,X.spurting=!0),void X.pause(!1,n,null,!0))},this.clearPool=function(){e.loop(X,function(e){e.pooled="end",e.visible||X.removeChild(e)},!0),F=0,H=0,W=[]},X.startPaused||(this.paused=!1),this.pause=function(t,o,n,i){if(X.startPaused=null,zot(t)&&(t=!0),zot(o)&&(o=!1),zot(n)&&(n=!1),t){if(X.paused)return X;n&&(Y&&e.Ticker.remove(Y),e.loop(X,function(e){e.pauseZimAnimate(),e.trace&&e.getChildAt(0).pauseZimAnimate(),e.timeOut&&e.timeOut.pause()})),X.zimInterval.pause(),X.paused=!0}else{if(!X.paused)return X;o&&(e.loop(X,function(e){e.stopZimAnimate(),e.timeOut&&e.timeOut.clear(),e.trace&&e.getChildAt(0).pauseZimAnimate()}),X.removeAllChildren()),R&&Y&&!e.Ticker.has(R,Y)&&(e.Ticker.add(Y,R),e.loop(X,function(e){e.pauseZimAnimate(!1),e.timeOut&&e.timeOut.pause(!1),e.trace&&e.getChildAt(0).pauseZimAnimate(!1)})),X.zimInterval.pause(!1,i),X.paused=!1}return X},this.resize=function(e,t){zot(e)||(o=e),zot(t)||(n=t),X.setBounds(0,0,o,n),x||C||X.centerReg(),X.clearPool()},this.clone=function(){var t;return t=Array.isArray(X.obj)||X.obj.constructor=={}.constructor?e.copy(X.obj):X.obj.clone?X.obj.clone():X.obj,X.cloneProps(new e.Emitter(t,o,n,X.interval,X.num,X.life,X.fade,X.shrink,X.decayTime,X.decayStart,X.trace,X.traceFadeTime,X.traceShiftX,X.traceShiftY,X.angle,X.force,X.gravity,X.wind,X.layers,X.animation,e.copy(X.random),X.horizontal,X.vertical,X.sink,X.sinkForce,j,X.events,S,X.pool,X.poolMin))},this.dispose=function(){return Y&&e.Ticker.remove(Y),e.loop(X,function(e){e.stopZimAnimate()}),X.zimInterval.clear(),!0}},e.extend(e.Emitter,e.Container,"clone","zimContainer",!1),e.SoundWave=function(t,o,n,i,r,a,s,l,d,c){function u(t){if(t.connect(g),"mic"!=o&&g.connect(m.destination),g.fftSize=2*e.SoundWave.bufferLength,b=Math.floor(n*e.SoundWave.bufferLength/_num),1>b)return void zog("ZIM SoundWave: include param is too small or num param is too big");var i=g.frequencyBinCount,r=new Uint8Array(i);p.calculate=function(){g.getByteFrequencyData(r);var t=r.map(s);if(1==b)return t;for(var i=[],a=0,l=0;l<=n*e.SoundWave.bufferLength;l++)a+=t[l],0!=l&&l%b==0&&(i.push(Math.max(0,(a/b-p.baseline)*p.magnify-p.reduce)),a=0);return"mic"!=o&&(i[0]*=.75,i[1]*=.85,i[2]*=.9,i[i.length-2]*=.8,i[i.length-1]*=.75),i[i.length-1]*=1.3,i[i.length-2]*=1.2,i[i.length-3]*=1.1,i},setTimeout(function(){p.dispatchEvent("ready")},50)}var h,f="num, input, include, smoothing, min, max, operation, baseline, magnify, reduce";if(h=zob(e.SoundWave,arguments,f,this))return h;z_d("69.95"),zot(t)&&(t=120),zot(o)&&(o="mic"),zot(n)&&(n=.1171875),zot(i)&&(i=.85),zot(r)&&(r="mic"==o?-80:-100),zot(a)&&(a="mic"==o?-40:-10),zot(s)&&(s=function(t,o){return t*(.5+1*o/Math.pow(e.SoundWave.bufferLength,.95))}),zot(l)&&(l="mic"==o?0:30),zot(d)&&(d="mic"==o?1:10),zot(c)&&(c=0),e.SoundWave.bufferLength=1024,_num=t;var p=this;p.baseline=l,p.magnify=d,p.reduce=c;var m=new(window.AudioContext||window.webkitAudioContext),g=p.analyser=m.createAnalyser();if(g.minDecibels=r,g.maxDecibels=a,g.smoothingTimeConstant=i,Object.defineProperty(this,"smoothing",{get:function(){return g.smoothingTimeConstant},set:function(e){g.smoothingTimeConstant=e}}),Object.defineProperty(this,"num",{get:function(){return _num},set:function(t){_num=t,b=Math.floor(n*e.SoundWave.bufferLength/_num),1>b&&zog("ZIM SoundWave: num is too big")}}),"mic"==o)return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,void(navigator.getUserMedia?navigator.getUserMedia({audio:!0},function(e){var t=p.source=m.createMediaStreamSource(e);u(t)},function(e){zog("ZIM SoundWave: Error occured: "+e)}):zog("ZIM SoundWave: Sorry, mic not supported"));if(o.type&&"sound"==o.type)return void zog("ZIM SoundWave: pass in the result of a zim.asset('somesound').play() for the input");if(o.playbackResource)var z=o.playbackResource,v=m.createMediaElementSource(z);else var z=o,v=m.createMediaElementSource(z);u(v);var b},e.extend(e.SoundWave,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),zon&&zog("ZIM FRAME"),e.Frame=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v){function b(){if(!X){if(X=!0,-1==A.indexOf(t)){if(O=t,zot(zid(O)))return void zog("zim.Frame - scaling: HTML tag with id="+t+" must exist");B=this.tag=zid(O),t=zot(o)||zot(n)?"tag":"inline","myCanvas"==c&&(c=O+"Canvas")}zot(o)&&(o=500),zot(n)&&(n=500),y(),w(),S?(s&&setTimeout(function(){window.scrollTo(0,0)},50),setTimeout(function(){x(),j.dispatchEvent("ready"),_=!0,C()},100),h>100&&setTimeout(function(){x(),C()},h)):(j.dispatchEvent("ready"),_=!0,C())}}function y(){var o=j.canvas=document.createElement("canvas");o.setAttribute("id",c),o.setAttribute("tabindex",0),"full"==t||"tag"==t?(o.setAttribute("width",e.windowWidth()),o.setAttribute("height",e.windowHeight())):(o.setAttribute("width",I),o.setAttribute("height",L)),"tag"==t||"inline"==t?B.appendChild(o):document.body.appendChild(o),zot(i)||(o.style.backgroundColor=i),("full"==t||"fit"==t||"outside"==t)&&(o.style.position="absolute",document.body.style.overflow="hidden")}function w(){x(),-1==A.indexOf(t)||v||(j.zil=zil()),E=p?new createjs.StageGL(c,m):new createjs.Stage(c),!zot(i)&&p&&E.setClearColor(e.convertColor(i)),E.setBounds(0,0,I,L),E.width=I,E.height=L,r&&E.enableMouseOver(10),a&&createjs.Touch.enable(E,!1,v),g&&(E.nextStage=g.stage),z&&(E.nextStage=z)}function x(){var o,n,i=zid(c),r=e.windowWidth(),a=e.windowHeight();if(P=j.orientation=r>a?"horizontal":"vertical",P!=D&&(D=P,j.dispatchEvent("orientation")),S&&s&&setTimeout(function(){window.scrollTo(0,0)},100),i){if("fit"==t)j.scale=r/a>=I/L?a/L:r/I;else if("outside"==t)j.scale=r/a>=I/L?r/I:a/L;else{if("full"==t)return i.style.left=i.style.top="0px",i.width=I=r,i.height=L=a,void(E&&(E.setBounds(0,0,I,L),E.width=I,E.height=L,p&&E.updateViewport(I,L)));if("tag"==t)return I=B.offsetWidth,L=B.offsetHeight,E&&(E.setBounds(0,0,I,L),E.width=I,E.height=L,p&&E.updateViewport(I,L)),B.style.overflow="hidden",i.width=I,i.height=L,void(i.style.left=i.style.top="0px");if("inline"==t)return E&&(E.setBounds(0,0,I,L),E.width=I,E.height=L,p&&E.updateViewport(I,L)),void(i.style.left=i.style.top="0px")}n=L*j.scale,o=I*j.scale,i.style.width=o+"px",i.style.height=n+"px",j.x="left"==l?0:"right"==l?r-o:(r-o)/2,j.y="top"==d?0:"bottom"==d?a-n:(a-n)/2,i.style.left=j.x+"px",i.style.top=j.y+"px"}}function C(){_&&(j.dispatchEvent("resize"),!e.OPTIMIZE&&E&&"full"==t&&E.update())}var T,k="scaling, width, height, color, rollover, touch, scrollTop, align, valign, canvasID, rollPerSecond, delay, canvasCheck, gpu, gpuObj, nextFrame, nextStage, allowDefault";
if(T=zob(e.Frame,arguments,k,this))return T;z_d("83"),this.cjsEventDispatcher_constructor();var j=this;"undefined"==typeof zimDefaultFrame&&(zimDefaultFrame=this),zot(f)&&(f=!0);var M=!!window.HTMLCanvasElement;if(!M&&f)return void setTimeout(function(){j.dispatchEvent("failed")},100);var S=e.mobile();zot(t)&&(t="full"),zot(r)&&(r=!S),zot(a)&&(a=!0),zot(s)&&(s=!0),zot(l)&&(l="center"),zot(d)&&(d="center"),zot(c)&&(c="myCanvas"),zot(u)&&(u=20),zot(h)&&(h=0),zot(p)&&(p=!1),zot(v)&&(v=!1);var A=["fit","outside","full"];this.scale=1,this.x=0,this.y=0;var E,P,D,O,B,I=o,L=n,_=!1,X=!1;"interactive"===document.readyState||"complete"===document.readyState?setTimeout(function(){b()},200):document.addEventListener("DOMContentLoaded",b);var Y,R=!1,W="full"==t&&"undefined"!=typeof InstallTrigger;window.addEventListener("resize",function(){W?R||(R=!0,Y=e.Ticker.update,e.Ticker.update=!1,setTimeout(function(){R=!1,E==zimDefaultFrame.stage&&(e.Ticker.update=Y)},40),setTimeout(function(){x(),C()},20)):(x(),C(),h>0&&S&&setTimeout(function(){x(),C()},h))}),this.loadAssetsCount=0,this.assets={},this.loadAssets=function(t,o,n,i){if(!zot(t)){zot(n)&&(n=!1),Array.isArray(t)||(t=[t]),zot(i)&&(i=0);var r,a,s,l=!1,d=[],c=/\.([^.]+)$/i;for(s=0;s<t.length;s++)r=t[s],a=r.match(c),createjs.Sound.SUPPORTED_EXTENSIONS.indexOf(a[1])>=0&&(l=!0),d.push({src:r});var u=new e.Queue;j.loadAssetsCount++,j.isLoading=!0;var h=u.preload=j.preload=new createjs.LoadQueue(n,o);l&&h.installPlugin(createjs.Sound),h.on("progress",function(e){u.dispatchEvent(e),j.dispatchEvent(e)}),h.on("error",function(e){u.dispatchEvent(e),j.dispatchEvent(e)}),h.on("fileload",function(t){{var o,n=t.item,i=t.item.type;n.id.match(c)}o=j.assets[n.id]=i&&"sound"==i?{type:"sound",id:n.id,play:function(e){var t=createjs.Sound.play(n.id,e);return t.getStage=function(){return E},t}}:"image"==i?new e.Bitmap(t.result,t.result.width,t.result.height,n.id):t.result;var r=new createjs.Event("assetload");r.item=n,r.asset=o,u.dispatchEvent(t),j.dispatchEvent(r)});var f=Date.now();return j.preloadEvent=h.on("complete",function(e){var t=Date.now();i=Math.max(0,i-(t-f)),setTimeout(function(){j.loadAssetsCount--,j.loadAssetsCount<=0&&(j.isLoading=!1),u.isLoading=!1,u.dispatchEvent(e),j.dispatchEvent(e)},i)}),h.loadManifest(d),u}},this.asset=function(e){return zot(e)?void 0:j.assets[e]||{play:function(){return zon?(zog("zim.Frame - asset("+e+") not found"),{}):void 0}}},Object.defineProperty(j,"stage",{get:function(){return E},set:function(){zog("zim.Frame(): stage is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(j,"width",{get:function(){return I},set:function(){zog("zim.Frame(): width is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(j,"height",{get:function(){return L},set:function(){zog("zim.Frame(): height is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(this,"color",{get:function(){return i},set:function(t){i=t,zot(t)?zid(c).style.backgroundColor="default":(zid(c).style.backgroundColor=i,!zot(i)&&p&&E.setClearColor(e.convertColor(i)))}});var H=new createjs.Event("keydown");this.eventRemove=H.remove,window.addEventListener("keydown",function(e){e.remove=j.eventRemove,j.altKey=e.altKey,j.ctrlKey=e.ctrlKey,j.metaKey=e.metaKey,j.shiftKey=e.shiftKey,j.dispatchEvent(e)}),window.addEventListener("keyup",function(e){j.altKey=e.altKey,j.ctrlKey=e.ctrlKey,j.metaKey=e.metaKey,j.shiftKey=e.shiftKey,e.remove=j.eventRemove,j.dispatchEvent(e)}),this.remakeCanvas=function(e,o){"full"!=t&&(zot(e)&&(e=I),zot(o)&&(o=L),zid(c)&&zid(c).parentNode.removeChild(zid(c)),I=e,L=o,y(),w())},this.dispose=function(){return window.removeEventListener("resize",x),E.removeAllChildren(),E.removeAllEventListeners(),zid(c)&&zid(c).parentNode.removeChild(zid(c)),E=null,j=null,!0},this.orange="#f58e25",this.green="#acd241",this.pink="#e472c4",this.blue="#50c4b7",this.brown="#d1a170",this.yellow="#ebcb35",this.silver="#999999",this.tin="#777777",this.grey="#555555",this.gray="#555555",this.lighter="#eeeeee",this.light="#cccccc",this.dark="#333333",this.darker="#111111",this.purple="#993399",this.black="#000000",this.white="#FFFFFF",this.clear="rgba(0,0,0,0)",this.faint="rgba(0,0,0,.01)",this.makeCircles=function(t){zot(t)&&(t=100);var o=[j.orange,j.green,j.pink,j.blue,j.brown,j.dark],n=new e.Shape,i=n.graphics;n.radius=t;for(var r=0;r<o.length;r++)i.f(o[r]).dc(0,0,n.radius/o.length*(o.length-r));return n.setBounds(-n.radius,-n.radius,2*n.radius,2*n.radius),n}},e.extend(e.Frame,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),e.Queue=function(){this.cjsEventDispatcher_constructor(),this.isLoading=!0},e.extend(e.Queue,createjs.EventDispatcher,null,"cjsEventDispatcher"),e.DISTILL=!1,e.distillery=[],e.distill=function(){!window.zns&&e&&e.DISTILL&&e.distillery.push("83.3","83.35"),zog("zim.distill() - go to http://zimjs.com/code/distill and enter the following:"),zog(e.distillery.length>0?e.distillery.join(" "):"must set zim.DISTILL = true;")},e}(zim||{}),zim=function(e){return e.Wonder=function(t,o,n,i,r){function a(){h.length>0&&(e.async(r+"?wonder="+JSON.stringify(h)),h=[],p++)}function s(e,t){return zot(e)?(zog("zim.Wonder "+t+" - please provide a keyword"),!1):c[t+"sOff"][e]?!1:!0}var l,d="wid, client, app, notes, server";if(l=zob(e.Wonder,arguments,d,this))return l;if(z_d("82"),zot(t))return void zog("zim.Wonder() - please provide Wonder ID (see http://zimjs.com/code/wonder/)");zot(r)&&(r="http://54.237.229.197:3001/wonder");var c=this;zot(e.wonderSession)&&(e.wonderSession="W"+e.rand(1e5,999999));var u,h=[],f=setInterval(a,1e3),p=0,m=setInterval(function(){p>28&&(h.push({id:t,c:o,a:n,n:i,k:u,t:"e",v:"frequency max - terminated",s:e.wonderSession}),zog("zim.Wonder() - frequency max - terminated"),c.dispose()),p=0},3e4);this.countsOff={},this.timesOff={},this.ordersOff={},this.count=function(r){s(r,"count")&&(u=r,h.push({id:t,c:o,a:n,n:i,k:r,t:"c",v:1,s:e.wonderSession}))};var g={};this.timeStart=function(e){s(e,"time")&&(c.timeEnd(e),u=e,g[e]=(new Date).getTime())};var z={};this.timePause=function(e){s(e,"time")&&(z[e]||(z[e]=(new Date).getTime()))},this.timeUnpause=function(e){if(s(e,"time")&&z[e]){var t=(new Date).getTime()-z[e];g[e]&&(g[e]+=t),delete z[e]}},this.timeEnd=function(r){if(s(r,"time")&&g[r]){var a=z[r]?z[r]:(new Date).getTime(),l=Math.round((a-g[r])/1e3);delete z[r],delete g[r],h.push({id:t,c:o,a:n,n:i,k:r,t:"t",v:l,s:e.wonderSession})}},this.order=function(r,a){return s(r,"order")?(u=r,zot(a)?void zog("zim.Wonder order() - please provide an item"):void h.push({id:t,c:o,a:n,n:i,k:r,t:"o",v:a,s:e.wonderSession})):void 0},this.countOff=function(e){c.countsOff[e]=1},this.countOn=function(e){delete c.countOff[e]},this.timeOff=function(e){c.timesOff[e]=1},this.timeOn=function(e){delete c.timesOff[e]},this.orderOff=function(e){c.ordersOff[e]=1},this.orderOn=function(e){delete c.ordersOff[e]},this.dispose=function(){a(),clearInterval(f),clearInterval(m)}},e}(zim||{});window.zns||zimplify();