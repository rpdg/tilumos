var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function i(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}(),BitmapData=createjs.BitmapData,Scene2=function(t){function e(e){var a=t.call(this,e)||this;return a.distortLength=0,a.castleContainer=new Container,a.showCastleWhite(),a}return __extends(e,t),e.prototype.showCastleWhite=function(){Util.addImage(this.castleContainer,this.app.preLoader.getResult("castle-white-bg"),0);var t=this.app.draftWidth/2,e=this.app.draftHeight/2-50,a=Util.addImage(this.castleContainer,this.app.preLoader.getResult("castle-white-hole"),1,{x:t,y:e,regX:t/2,regY:e/2,scaleX:2,scaleY:2}),i=Util.addImage(this.castleContainer,this.app.preLoader.getResult("castle-white"),2,{x:100,y:200});this.stage.addChild(this.castleContainer),Tween.get(a,{loop:!0}).to({rotation:360},3e3);var s=0,n=0;this.castleContainer.on("mousedown",function(t){s=t.localX,n=i.x},this),this.castleContainer.on("pressup",function(t){Math.abs(t.localX-s)<200&&Tween.get(i).to({x:n},200)},this),this.castleContainer.on("pressmove",function(t){i.x=n+t.localX-s},this),this.castleContainer.on("dblclick",function(){Tween.removeTweens(a),this.distort()},this,!0)},e.prototype.distort=function(){this.castleContainer.cache(0,0,this.app.draftWidth,this.app.draftHeight),this.sourceBmd=createjs.BitmapData.getBitmapData(this.castleContainer),this.targetBmd=new createjs.BitmapData(null,this.app.draftWidth,this.app.draftHeight),this.stage.removeChild(this.castleContainer);var t=new createjs.Bitmap(this.targetBmd.canvas);this.stage.addChild(t),this.distortLength=1},e.prototype.tick=function(){if(this.distortLength>0&&this.distortLength<300){for(var t=0;t<this.app.draftWidth;t++){var e=this.distortLength*Math.sin(t/18)+200-162;this.targetBmd.drawImage(this.sourceBmd,t,0,1,this.app.draftHeight,t,e,1,this.app.draftHeight)}this.distortLength+=5}this.stage.update()},e}(Scene);